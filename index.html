<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Eathard&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Eathard&#39;s Blog">
<meta property="og:url" content="https://eathard2.github.io/index.html">
<meta property="og:site_name" content="Eathard&#39;s Blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Eathard&#39;s Blog">
  
  
    <link rel="icon" href="/favicon.png">
  
  

  
  <link rel="stylesheet" href="/css/style.css">
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Eathard&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">A note for hardware development.</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="##" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://eathard2.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-Understanding-extern-keyword-in-C" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/08/11/Understanding-extern-keyword-in-C/" class="article-date">
  <time datetime="2017-08-11T11:51:19.000Z" itemprop="datePublished">2017-08-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/08/11/Understanding-extern-keyword-in-C/">Understanding extern keyword in C</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="http://www.geeksforgeeks.org/understanding-extern-keyword-in-c/" target="_blank" rel="external">原文Understanding “extern” keyword in C</a></p>
<p>I’m sure that this post will be as interesting and informative to C virgins (i.e. beginners) as it will be to those who are well versed in C. So let me start with saying that extern keyword applies to C variables (data objects) and C functions. Basically extern keyword extends the visibility of the C variables and C functions. Probably that’s is the reason why it was named as extern.</p>
<p>我确信这篇文章无论对于C语言初学者还是老鸟都是有充满信息量的，并且学起来很有趣。<br>所以让我们从一句“谚语”说起，extern关键字是用来修饰C变量或者C函数的。<br>extern关键字基本上就是拓展C变量和C函数的可见范围。<br>或许这就是他被称为extern的原因吧。</p>
<p>Though (almost) everyone knows the meaning of declaration and definition of a variable/function yet for the sake of completeness of this post, I would like to clarify them. Declaration of a variable/function simply declares that the variable/function exists somewhere in the program but the memory is not allocated for them. But the declaration of a variable/function serves an important role. And that is the type of the variable/function. Therefore, when a variable is declared, the program knows the data type of that variable. In case of function declaration, the program knows what are the arguments to that functions, their data types, the order of arguments and the return type of the function. So that’s all about declaration. Coming to the definition, when we define a variable/function, apart from the role of declaration, it also allocates memory for that variable/function. Therefore, we can think of definition as a super set of declaration. (or declaration as a subset of definition). From this explanation, it should be obvious that a variable/function can be declared any number of times but it can be defined only once. (Remember the basic principle that you can’t have two locations of the same variable/function). So that’s all about declaration and definition.</p>
<p>虽然几乎所有人都知道声明（declaration）和定义（definition）一个变量或者函数的含义，但是为了本文的完整性，在这里我还会澄清他们。<br>变量/函数的声明简单的说就是为了说明某个变量/函数存在于程序的某个位置，但是并没有分配内存空间。<br>但是声明一个变量和函数起着至关重要的作用，那就是变量/函数的类型。<br>因此，当一个变量被声明，程序就知道了这个变量的数据类型。函数一旦声明，程序就知道函数的参数，数据类型，参数顺序和函数返回值类型是什么。<br>这就是关于声明的全部。<br>下面讨论定义的问题，当我们定义一个函数或者变量，和声明不同的是，它还会分配内存空间给变量或者函数。因此，我们可以认为定义是一种更高级的声明。<br>从这种解释中，我们可以得出结论：一个变量/函数可以被无限次声明，但是只能仅仅被定义一次！（记住这个基本原理：一个相同的函数/变量不能同时占据两个位置。）这就是关于声明和定义的全部。</p>
<p>Now coming back to our main objective: Understanding “extern” keyword in C. I’ve explained the role of declaration/definition because it’s mandatory to understand them to understand the “extern” keyword. Let us first take the easy case. Use of extern with C functions. By default, the declaration and definition of a C function have “extern” prepended with them. It means even though we don’t use extern with the declaration/definition of C functions, it is present there. For example, when we write.</p>
<p>下面开始回到我们的主要问题：认识C语言中的extern关键字。我已经解释了声明和定义的作用。因为必须先了解定义和声明才能了解extern关键字。<br>先让我们从简单的案例开始。在C函数中使用extern关键字。默认情况下，当我们定义或者声明一个C函数时，extern已经附加在函数的首部了。所以，这就意味着即使我们不在声明和定义中突出extern，它其实已经使用过extern修饰过了。举个例子，当我们写，<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">foo</span><span class="params">(<span class="keyword">int</span> arg1, <span class="keyword">char</span> arg2)</span></span>;</div></pre></td></tr></table></figure></p>
<p>There’s an extern present in the beginning which is hidden and the compiler treats it as below.<br>上边没有被extern修饰的和下边这个完全一样，编译器就是这么认为的：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">extern</span> <span class="keyword">int</span> <span class="title">foo</span><span class="params">(<span class="keyword">int</span> arg1, <span class="keyword">char</span> arg2)</span></span>;</div></pre></td></tr></table></figure></p>
<p>Same is the case with the definition of a C function (Definition of a C function means writing the body of the function). Therefore whenever we define a C function, an extern is present there in the beginning of the function definition. Since the declaration can be done any number of times and definition can be done only once, we can notice that declaration of a function can be added in several C/H files or in a single C/H file several times. But we notice the actual definition of the function only once (i.e. in one file only). And as the extern extends the visibility to the whole program, the functions can be used (called) anywhere in any of the files of the whole program provided the declaration of the function is known. (By knowing the declaration of the function, C compiler knows that the definition of the function exists and it goes ahead to compile the program). So that’s all about extern with C functions.</p>
<p>定义一个C函数也是同样的（定义一个C函数意味着要书写函数体）。<br>因此，无论何时当我们定义一个C函数时,extern已经默认放在定义被定义函数的首部了。<br>尽管声明可以声明无数次然而定义只能定义一次，我们可以注意到，函数的声明可以在几个C/H文件或单个C/H文件中添加多次。<br>但是我们注意到函数的实际定义只有一次（即仅在一个文件中）。<br>因为extern拓展了函数在整个程序中的可见性，所以只要函数的声明已知，函数就可以在程序的任何文件中被调用。<br>（通过函数的声明，C编译器知道该函数的定义存在，并且继续编译程序）这就是关于extern在C函数中的全部。</p>
<p>Now let us the take the second and final case i.e. use of extern with C variables. I feel that it more interesting and information than the previous case where extern is present by default with C functions. So let me ask the question, how would you declare a C variable without defining it? Many of you would see it trivial but it’s important question to understand extern with C variables. The answer goes as follows.</p>
<p>现在让我们来讨论第二个也是最后一个问题，即在C变量中使用extern。我感觉比起前者（extern已经默认放在C函数前面），这更加有趣并且更有价值。<br>所以先让我问一个问题：你如何声明一个没有被定义的C变量？你或许认为这没有什么但是这对于理解如何在C变量中使用extern是一个重要的问题。下面揭示答案。<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">extern</span> <span class="keyword">int</span> var;</div></pre></td></tr></table></figure></p>
<p>Here, an integer type variable called var has been declared (remember no definition i.e. no memory allocation for var so far). And we can do this declaration as many times as needed. (remember that declaration can be done any number of times) So far so good.</p>
<p>这里有一个称作var的整型变量（记住，没有定义，即没有内存空间分配给var）,我们可以根据需要声明很多次。（记住：声明可以做很多次）。</p>
<p>Now how would you define a variable. Now I agree that it is the most trivial question in programming and the answer is as follows.<br>现在怎么定义一个变量呢，现在我可以同意这是在编程中最小的事情了，答案在这里;<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> var;</div></pre></td></tr></table></figure></p>
<p>Here, an integer type variable called var has been declared as well as defined. (remember that definition is the super set of declaration). Here the memory for var is also allocated. Now here comes the surprise, when we declared/defined a C function, we saw that an extern was present by default. While defining a function, we can prepend it with extern without any issues. But it is not the case with C variables. If we put the presence of extern in variable as default then the memory for them will not be allocated ever, they will be declared only. Therefore, we put extern explicitly for C variables when we want to declare them without defining them. Also, as the extern extends the visibility to the whole program, by externing a variable we can use the variables anywhere in the program provided we know the declaration of them and the variable is defined somewhere.</p>
<p>这里一个叫做var的整型变量已经被声明或者定义。（记住：定义是更高级的声明）。<br>这里的var已经被分配内存了。<br>现在这里有一个惊喜，当我们声明/定义了一个C函数时，我们看到一个extern是默认存在的。当定义一个函数时，我们可以前置extern而不会有任何问题。<br>但是对于C变量来说不是这个情况。<strong>如果我们在变量前默认放置一个extern,他们的内存将不会被分配，而是仅仅声明。</strong><br>因此，我们在想声明变量而不去定义它们时通常使用extern修饰变量。<br>当然，extern会将可见性扩展到整个程序，通过extern一个变量，只要知道他们的声明和变量在某处已经被定义，我们就可以在程序的任何位置使用他们。</p>
<p>Now let us try to understand extern with examples.</p>
<p>Example 1:<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> var;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></div><div class="line"><span class="function"></span>&#123;</div><div class="line">   var = <span class="number">10</span>;</div><div class="line">   <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Analysis: This program is compiled successfully. Here var is defined (and declared implicitly[隐晦地]) globally.</p>
<p>Example 2:<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">extern</span> <span class="keyword">int</span> var;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></div><div class="line"><span class="function"></span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Analysis: This program is compiled successfully. Here var is declared only. Notice var is never used so no problems.</p>
<p>Example 3:<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">extern</span> <span class="keyword">int</span> var;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></div><div class="line"><span class="function"></span>&#123;</div><div class="line"> var = <span class="number">10</span>;</div><div class="line"> <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Analysis: This program throws error in compilation. Because var is declared but not defined anywhere. Essentially, the var isn’t allocated any memory. And the program is trying to change the value to 10 of a variable that doesn’t exist at all.</p>
<p>Example 4:<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"somefile.h"</span></span></div><div class="line"><span class="keyword">extern</span> <span class="keyword">int</span> var;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></div><div class="line"><span class="function"></span>&#123;</div><div class="line"> var = <span class="number">10</span>;</div><div class="line"> <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Analysis: Supposing that <code>somefile.h</code> has the definition of var. This program will be compiled successfully.</p>
<p>Example 5:<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">extern</span> <span class="keyword">int</span> var = <span class="number">0</span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></div><div class="line"><span class="function"></span>&#123;</div><div class="line"> var = <span class="number">10</span>;</div><div class="line"> <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Analysis: Guess this program will work? Well, here comes another surprise from C standards. They say that..if a variable is only declared and an initializer is also provided with that declaration, then the memory for that variable will be allocated i.e. that variable will be considered as defined. Therefore, as per the C standard, this program will compile successfully and work.<br>分析：猜想一下这个程序会工作吗？是的，这是来自C标准的另一个惊喜。他们说,<strong>如果一个变量在声明的时候被初始化了一个值，编译器认为这应该是一个定义语句而不是声明，所以程序正常运行。</strong><br>So that was a preliminary look at “extern” keyword in C.</p>
<p>I’m sure that you want to have some take away from the reading of this post. And I would not disappoint you.<br>In short, we can say</p>
<ol>
<li>Declaration can be done any number of times but definition only once.</li>
<li>“extern” keyword is used to extend the visibility of variables/functions().</li>
<li>Since functions are visible through out the program by default. The use of extern is not needed in function declaration/definition. Its use is redundant.</li>
<li>When extern is used with a variable, it’s only declared not defined.</li>
<li>As an exception, when an extern variable is declared with initialization, it is taken as definition of the variable as well.</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://eathard2.github.io/2017/08/11/Understanding-extern-keyword-in-C/" data-id="cj684vpaw0000rs0l3nt3961g" class="article-share-link">Share</a>
      
        <a href="https://eathard2.github.io/2017/08/11/Understanding-extern-keyword-in-C/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C语言/">C语言</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-stm32启动文件分析" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/08/10/stm32启动文件分析/" class="article-date">
  <time datetime="2017-08-10T05:49:06.000Z" itemprop="datePublished">2017-08-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/08/10/stm32启动文件分析/">stm32启动文件分析</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div></pre></td><td class="code"><pre><div class="line">;******************** (C) COPYRIGHT 2011 STMicroelectronics ********************</div><div class="line">;* File Name          : startup_stm32f10x_hd.s</div><div class="line">;* Author             : MCD Application Team</div><div class="line">;* Version            : V3.5.0</div><div class="line">;* Date               : 11-March-2011</div><div class="line">;* Description        : STM32F10x High Density Devices vector table for MDK-ARM</div><div class="line">;*                      toolchain.</div><div class="line">//                       此文件为 STM32F10x高密度设备MDK工具链的启动文件</div><div class="line">;*                      This module performs:</div><div class="line">//                        这个模块执行以下功能：</div><div class="line">;*                      - Set the initial SP</div><div class="line">//                       设置初始化SP寄存器</div><div class="line">;*                      - Set the initial PC == Reset_Handler</div><div class="line">//                        设置初始化PC寄存器等于复位入口，并在执行main函数前初始化系统时钟</div><div class="line">;*                      - Set the vector table entries with the exceptions ISR address</div><div class="line">//                        设置中断向量表入口为异常事件服务的入口地址</div><div class="line">;*                      - Configure the clock system and also configure the external</div><div class="line">;*                        SRAM mounted on STM3210E-EVAL board to be used as data</div><div class="line">;*                        memory (optional, to be enabled by user)</div><div class="line">//                        配置时钟系统和挂载在开发板外部的SRAM</div><div class="line">;*                      - Branches to __main in the C library (which eventually</div><div class="line">;*                        calls main()).</div><div class="line">;*                      After Reset the CortexM3 processor is in Thread mode,</div><div class="line">;*                      priority is Privileged, and the Stack is set to Main.</div><div class="line">//                     复位之后处理器为线程模式，优先级为特权级，堆栈设置为MSP主堆栈</div><div class="line">;* &lt;&lt;&lt; Use Configuration Wizard in Context Menu &gt;&gt;&gt;   </div><div class="line">;*******************************************************************************</div><div class="line">; THE PRESENT FIRMWARE WHICH IS FOR GUIDANCE ONLY AIMS AT PROVIDING CUSTOMERS</div><div class="line">; WITH CODING INFORMATION REGARDING THEIR PRODUCTS IN ORDER FOR THEM TO SAVE TIME.</div><div class="line">; AS A RESULT, STMICROELECTRONICS SHALL NOT BE HELD LIABLE FOR ANY DIRECT,</div><div class="line">; INDIRECT OR CONSEQUENTIAL DAMAGES WITH RESPECT TO ANY CLAIMS ARISING FROM THE</div><div class="line">; CONTENT OF SUCH FIRMWARE AND/OR THE USE MADE BY CUSTOMERS OF THE CODING</div><div class="line">; INFORMATION CONTAINED HEREIN IN CONNECTION WITH THEIR PRODUCTS.</div><div class="line">;*******************************************************************************</div><div class="line">; 首先对栈和堆的大小进行定义，并在代码区的起始处建立中断向量表，其第一个表项是栈顶地址，</div><div class="line">；第二个表项是复位中断服务入口地址。然后在复位中断服务程序中跳转C/C++标准实时库的__main函数。</div><div class="line">；假设STM32被设置为从内部FLASH启动中断向量表起始地位为0x8000000，</div><div class="line"></div><div class="line">; 则栈顶地址存放于0x8000000处，而复位中断服务入口地址存放于0x8000004处。当STM32遇</div><div class="line"></div><div class="line">; 到复位信号后，则从0x80000004处取出复位中断服务入口地址继而执行复位中断服务程序，</div><div class="line"></div><div class="line">; 然后跳转__main函数，最后来到C的世界。</div><div class="line"></div><div class="line"></div><div class="line">; DCD指令：作用是开辟一段空间，其意义等价于C语言中的地址符“&amp;”。开始建立的中断向量</div><div class="line"></div><div class="line">; 表则类似于使用C语.其每一个成员都是一个函数指针，分别指向各个中断服务函数</div><div class="line"></div><div class="line"></div><div class="line">;伪指令AREA，表示开辟一段大小为Stack_Size的内存空间作为栈，段名是STACK，可读可写。</div><div class="line"></div><div class="line">;NOINIT：指定此数据段仅仅保留了内存单元，而没有将各初始值写入内存单元，或者将各个内存单元值初始化为0</div><div class="line"></div><div class="line">; Amount of memory (in bytes) allocated for Stack</div><div class="line">; Tailor this value to your application needs</div><div class="line">; &lt;h&gt; Stack Configuration</div><div class="line">;   &lt;o&gt; Stack Size (in Bytes) &lt;0x0-0xFFFFFFFF:8&gt;</div><div class="line">; &lt;/h&gt;</div><div class="line"></div><div class="line">Stack_Size      EQU     0x00000400    ;定义堆栈大小</div><div class="line"></div><div class="line">                AREA    STACK, NOINIT, READWRITE, ALIGN=3   ;堆栈段，未初始化，允许读写，8字节边界对齐</div><div class="line">Stack_Mem       SPACE   Stack_Size     ;分配堆栈空间，把首地址赋值给Stack_Mem</div><div class="line">__initial_sp                           ;初始化堆栈指针，指向堆栈顶。</div><div class="line"></div><div class="line">; &lt;h&gt; Heap Configuration</div><div class="line">;   &lt;o&gt;  Heap Size (in Bytes) &lt;0x0-0xFFFFFFFF:8&gt;</div><div class="line">; &lt;/h&gt;</div><div class="line"></div><div class="line">Heap_Size       EQU     0x00000200      ;定义堆的大小</div><div class="line"></div><div class="line">                AREA    HEAP, NOINIT, READWRITE, ALIGN=3   ;堆段,未初始化,允许读写,堆数据段8字节边界对齐</div><div class="line">__heap_base</div><div class="line">Heap_Mem        SPACE   Heap_Size         ;分配栈的空间</div><div class="line">__heap_limit                              ;与__heap_base配合限制堆栈的大小</div><div class="line"></div><div class="line">                PRESERVE8                 ;命令指定当前文件保持栈的8字节对齐</div><div class="line">                THUMB                     ;指令集，THUMB 必须位于使用新语法的任何 Thumb代码之前</div><div class="line"></div><div class="line"></div><div class="line">; Vector Table Mapped to Address 0 at Reset    ;以下为向量表，在复位时被映射到FLASH的0地址</div><div class="line">                AREA    RESET, DATA, READONLY  ;复位段，只包含数据，只读</div><div class="line">                EXPORT  __Vectors              ;符号输出，中断向量表开始</div><div class="line">                EXPORT  __Vectors_End          ;中断向量表结束</div><div class="line">                EXPORT  __Vectors_Size         ;中断向量表大小</div><div class="line">; DCD 命令分配一个或多个字的存储器，在四个字节的边界上对齐，并定义存储器的运行时初值。</div><div class="line">__Vectors       DCD     __initial_sp               ; Top of Stack 栈顶指针，被放在向量表的开始，FLASH的0地址，复位后首先装载栈顶指针</div><div class="line">                DCD     Reset_Handler              ; Reset Handler 复位异常，装载完栈顶后，第一个执行的，并且不返回。</div><div class="line">                DCD     NMI_Handler                ; NMI Handler   不可屏蔽中断</div><div class="line">                DCD     HardFault_Handler          ; Hard Fault Handler硬件错误中断</div><div class="line">                DCD     MemManage_Handler          ; MPU Fault Handler内存管理错误中断</div><div class="line">                DCD     BusFault_Handler           ; Bus Fault Handler总线错误中断，一般发生在数据访问异常，比如fsmc访问不当</div><div class="line">                DCD     UsageFault_Handler         ; Usage Fault Handler用法错误中断，一般是预取值，或者位置指令，数据处理等错误</div><div class="line">                DCD     0                          ; Reserved</div><div class="line">                DCD     0                          ; Reserved</div><div class="line">                DCD     0                          ; Reserved</div><div class="line">                DCD     0                          ; Reserved</div><div class="line">                DCD     SVC_Handler                ; SVCall Handler系统调用异常，主要是为了调用操作系统内核服务</div><div class="line">                DCD     DebugMon_Handler           ; Debug Monitor Handler	调试监视异常</div><div class="line">                DCD     0                          ; Reserved</div><div class="line">                DCD     PendSV_Handler             ; PendSV Handler</div><div class="line">                ；挂起异常，此处可以看见用作了uCOS-II的上下文切换异常，这是被推荐</div><div class="line">                ;使用的，因为Cortex-M3会在异常发生时自动保存R0-R3，R12,R13(堆栈指针SP)，</div><div class="line">                ;R14(链接地址，也叫返回地址LR，在异常返回时使用)，R15（程序计数器PC，为当前</div><div class="line">								;应用程序+4）和中断完成时自动回复，我们只需保存R4-R11,大大减少了中断响应和</div><div class="line">                ;上下文切换的时间。</div><div class="line">                ;说明：此处涉及到一个中断保存寄存器问题：因为在所有的运行模式下，未分组</div><div class="line">                ;寄存器都指向同一个物理寄存器，他们未被系统用作特殊的用途，因此，在中断或</div><div class="line">                ;者异常处理进行模式转换时，由于不同模式（此处为&quot;线程&quot;和&quot;特权&quot;）均使用相同</div><div class="line">                ;的物理寄存器，可能会造成寄存器中数据的破坏。这也是常说的&quot;关键代码段&quot;</div><div class="line">                ;和&quot;l临界区&quot;保护的原因。</div><div class="line"></div><div class="line">                DCD     SysTick_Handler            ; SysTick Handler嘀嗒定时器，为操作系统内核时钟</div><div class="line"></div><div class="line">                ; External Interrupts外部中断向量表如下，</div><div class="line">                DCD     WWDG_IRQHandler            ; Window Watchdog</div><div class="line">                DCD     PVD_IRQHandler             ; PVD through EXTI Line detect</div><div class="line">                DCD     TAMPER_IRQHandler          ; Tamper</div><div class="line">                DCD     RTC_IRQHandler             ; RTC</div><div class="line">                DCD     FLASH_IRQHandler           ; Flash</div><div class="line">                DCD     RCC_IRQHandler             ; RCC</div><div class="line">                DCD     EXTI0_IRQHandler           ; EXTI Line 0</div><div class="line">                DCD     EXTI1_IRQHandler           ; EXTI Line 1</div><div class="line">                DCD     EXTI2_IRQHandler           ; EXTI Line 2</div><div class="line">                DCD     EXTI3_IRQHandler           ; EXTI Line 3</div><div class="line">                DCD     EXTI4_IRQHandler           ; EXTI Line 4</div><div class="line">                DCD     DMA1_Channel1_IRQHandler   ; DMA1 Channel 1</div><div class="line">                DCD     DMA1_Channel2_IRQHandler   ; DMA1 Channel 2</div><div class="line">                DCD     DMA1_Channel3_IRQHandler   ; DMA1 Channel 3</div><div class="line">                DCD     DMA1_Channel4_IRQHandler   ; DMA1 Channel 4</div><div class="line">                DCD     DMA1_Channel5_IRQHandler   ; DMA1 Channel 5</div><div class="line">                DCD     DMA1_Channel6_IRQHandler   ; DMA1 Channel 6</div><div class="line">                DCD     DMA1_Channel7_IRQHandler   ; DMA1 Channel 7</div><div class="line">                DCD     ADC1_2_IRQHandler          ; ADC1 &amp; ADC2</div><div class="line">                DCD     USB_HP_CAN1_TX_IRQHandler  ; USB High Priority or CAN1 TX</div><div class="line">                DCD     USB_LP_CAN1_RX0_IRQHandler ; USB Low  Priority or CAN1 RX0</div><div class="line">                DCD     CAN1_RX1_IRQHandler        ; CAN1 RX1</div><div class="line">                DCD     CAN1_SCE_IRQHandler        ; CAN1 SCE</div><div class="line">                DCD     EXTI9_5_IRQHandler         ; EXTI Line 9..5</div><div class="line">                DCD     TIM1_BRK_IRQHandler        ; TIM1 Break</div><div class="line">                DCD     TIM1_UP_IRQHandler         ; TIM1 Update</div><div class="line">                DCD     TIM1_TRG_COM_IRQHandler    ; TIM1 Trigger and Commutation</div><div class="line">                DCD     TIM1_CC_IRQHandler         ; TIM1 Capture Compare</div><div class="line">                DCD     TIM2_IRQHandler            ; TIM2</div><div class="line">                DCD     TIM3_IRQHandler            ; TIM3</div><div class="line">                DCD     TIM4_IRQHandler            ; TIM4</div><div class="line">                DCD     I2C1_EV_IRQHandler         ; I2C1 Event</div><div class="line">                DCD     I2C1_ER_IRQHandler         ; I2C1 Error</div><div class="line">                DCD     I2C2_EV_IRQHandler         ; I2C2 Event</div><div class="line">                DCD     I2C2_ER_IRQHandler         ; I2C2 Error</div><div class="line">                DCD     SPI1_IRQHandler            ; SPI1</div><div class="line">                DCD     SPI2_IRQHandler            ; SPI2</div><div class="line">                DCD     USART1_IRQHandler          ; USART1</div><div class="line">                DCD     USART2_IRQHandler          ; USART2</div><div class="line">                DCD     USART3_IRQHandler          ; USART3</div><div class="line">                DCD     EXTI15_10_IRQHandler       ; EXTI Line 15..10</div><div class="line">                DCD     RTCAlarm_IRQHandler        ; RTC Alarm through EXTI Line</div><div class="line">                DCD     USBWakeUp_IRQHandler       ; USB Wakeup from suspend</div><div class="line">                DCD     TIM8_BRK_IRQHandler        ; TIM8 Break</div><div class="line">                DCD     TIM8_UP_IRQHandler         ; TIM8 Update</div><div class="line">                DCD     TIM8_TRG_COM_IRQHandler    ; TIM8 Trigger and Commutation</div><div class="line">                DCD     TIM8_CC_IRQHandler         ; TIM8 Capture Compare</div><div class="line">                DCD     ADC3_IRQHandler            ; ADC3</div><div class="line">                DCD     FSMC_IRQHandler            ; FSMC</div><div class="line">                DCD     SDIO_IRQHandler            ; SDIO</div><div class="line">                DCD     TIM5_IRQHandler            ; TIM5</div><div class="line">                DCD     SPI3_IRQHandler            ; SPI3</div><div class="line">                DCD     UART4_IRQHandler           ; UART4</div><div class="line">                DCD     UART5_IRQHandler           ; UART5</div><div class="line">                DCD     TIM6_IRQHandler            ; TIM6</div><div class="line">                DCD     TIM7_IRQHandler            ; TIM7</div><div class="line">                DCD     DMA2_Channel1_IRQHandler   ; DMA2 Channel1</div><div class="line">                DCD     DMA2_Channel2_IRQHandler   ; DMA2 Channel2</div><div class="line">                DCD     DMA2_Channel3_IRQHandler   ; DMA2 Channel3</div><div class="line">                DCD     DMA2_Channel4_5_IRQHandler ; DMA2 Channel4 &amp; Channel5</div><div class="line">__Vectors_End</div><div class="line"></div><div class="line">__Vectors_Size  EQU  __Vectors_End - __Vectors     ;计算向量表地址空间大小（末地址减去首地址）</div><div class="line">;|.text|用于表示由C编译程序产生的代码段，或用于以某种方式一C库关联的代码段。</div><div class="line">               AREA    |.text|, CODE, READONLY     ;定义C编译器源代码的代码段，只读</div><div class="line"></div><div class="line">; Reset handler</div><div class="line">Reset_Handler   PROC</div><div class="line">                EXPORT  Reset_Handler    [WEAK]    ;此处[WEAK]表示弱定义，优先执行其他文件的定义</div><div class="line">                IMPORT  __main</div><div class="line">                IMPORT  SystemInit</div><div class="line">                LDR     R0, =SystemInit</div><div class="line">                BLX     R0               </div><div class="line">                LDR     R0, =__main</div><div class="line">                BX      R0</div><div class="line">                ENDP</div><div class="line"></div><div class="line">; Dummy Exception Handlers (infinite loops which can be modified)</div><div class="line">；虚构的异常处理程序（无限循环，这可以被修改）</div><div class="line">NMI_Handler     PROC</div><div class="line">                EXPORT  NMI_Handler                [WEAK]</div><div class="line">                B       .</div><div class="line">                ENDP</div><div class="line">HardFault_Handler\</div><div class="line">                PROC</div><div class="line">                EXPORT  HardFault_Handler          [WEAK]</div><div class="line">                B       .</div><div class="line">                ENDP</div><div class="line">MemManage_Handler\</div><div class="line">                PROC</div><div class="line">                EXPORT  MemManage_Handler          [WEAK]</div><div class="line">                B       .</div><div class="line">                ENDP</div><div class="line">BusFault_Handler\</div><div class="line">                PROC</div><div class="line">                EXPORT  BusFault_Handler           [WEAK]</div><div class="line">                B       .</div><div class="line">                ENDP</div><div class="line">UsageFault_Handler\</div><div class="line">                PROC</div><div class="line">                EXPORT  UsageFault_Handler         [WEAK]</div><div class="line">                B       .</div><div class="line">                ENDP</div><div class="line">SVC_Handler     PROC</div><div class="line">                EXPORT  SVC_Handler                [WEAK]</div><div class="line">                B       .</div><div class="line">                ENDP</div><div class="line">DebugMon_Handler\</div><div class="line">                PROC</div><div class="line">                EXPORT  DebugMon_Handler           [WEAK]</div><div class="line">                B       .</div><div class="line">                ENDP</div><div class="line">PendSV_Handler  PROC</div><div class="line">                EXPORT  PendSV_Handler             [WEAK]</div><div class="line">                B       .</div><div class="line">                ENDP</div><div class="line">SysTick_Handler PROC</div><div class="line">                EXPORT  SysTick_Handler            [WEAK]</div><div class="line">                B       .</div><div class="line">                ENDP</div><div class="line"></div><div class="line">Default_Handler PROC</div><div class="line"></div><div class="line">                EXPORT  WWDG_IRQHandler            [WEAK]</div><div class="line">                EXPORT  PVD_IRQHandler             [WEAK]</div><div class="line">                EXPORT  TAMPER_IRQHandler          [WEAK]</div><div class="line">                EXPORT  RTC_IRQHandler             [WEAK]</div><div class="line">                EXPORT  FLASH_IRQHandler           [WEAK]</div><div class="line">                EXPORT  RCC_IRQHandler             [WEAK]</div><div class="line">                EXPORT  EXTI0_IRQHandler           [WEAK]</div><div class="line">                EXPORT  EXTI1_IRQHandler           [WEAK]</div><div class="line">                EXPORT  EXTI2_IRQHandler           [WEAK]</div><div class="line">                EXPORT  EXTI3_IRQHandler           [WEAK]</div><div class="line">                EXPORT  EXTI4_IRQHandler           [WEAK]</div><div class="line">                EXPORT  DMA1_Channel1_IRQHandler   [WEAK]</div><div class="line">                EXPORT  DMA1_Channel2_IRQHandler   [WEAK]</div><div class="line">                EXPORT  DMA1_Channel3_IRQHandler   [WEAK]</div><div class="line">                EXPORT  DMA1_Channel4_IRQHandler   [WEAK]</div><div class="line">                EXPORT  DMA1_Channel5_IRQHandler   [WEAK]</div><div class="line">                EXPORT  DMA1_Channel6_IRQHandler   [WEAK]</div><div class="line">                EXPORT  DMA1_Channel7_IRQHandler   [WEAK]</div><div class="line">                EXPORT  ADC1_2_IRQHandler          [WEAK]</div><div class="line">                EXPORT  USB_HP_CAN1_TX_IRQHandler  [WEAK]</div><div class="line">                EXPORT  USB_LP_CAN1_RX0_IRQHandler [WEAK]</div><div class="line">                EXPORT  CAN1_RX1_IRQHandler        [WEAK]</div><div class="line">                EXPORT  CAN1_SCE_IRQHandler        [WEAK]</div><div class="line">                EXPORT  EXTI9_5_IRQHandler         [WEAK]</div><div class="line">                EXPORT  TIM1_BRK_IRQHandler        [WEAK]</div><div class="line">                EXPORT  TIM1_UP_IRQHandler         [WEAK]</div><div class="line">                EXPORT  TIM1_TRG_COM_IRQHandler    [WEAK]</div><div class="line">                EXPORT  TIM1_CC_IRQHandler         [WEAK]</div><div class="line">                EXPORT  TIM2_IRQHandler            [WEAK]</div><div class="line">                EXPORT  TIM3_IRQHandler            [WEAK]</div><div class="line">                EXPORT  TIM4_IRQHandler            [WEAK]</div><div class="line">                EXPORT  I2C1_EV_IRQHandler         [WEAK]</div><div class="line">                EXPORT  I2C1_ER_IRQHandler         [WEAK]</div><div class="line">                EXPORT  I2C2_EV_IRQHandler         [WEAK]</div><div class="line">                EXPORT  I2C2_ER_IRQHandler         [WEAK]</div><div class="line">                EXPORT  SPI1_IRQHandler            [WEAK]</div><div class="line">                EXPORT  SPI2_IRQHandler            [WEAK]</div><div class="line">                EXPORT  USART1_IRQHandler          [WEAK]</div><div class="line">                EXPORT  USART2_IRQHandler          [WEAK]</div><div class="line">                EXPORT  USART3_IRQHandler          [WEAK]</div><div class="line">                EXPORT  EXTI15_10_IRQHandler       [WEAK]</div><div class="line">                EXPORT  RTCAlarm_IRQHandler        [WEAK]</div><div class="line">                EXPORT  USBWakeUp_IRQHandler       [WEAK]</div><div class="line">                EXPORT  TIM8_BRK_IRQHandler        [WEAK]</div><div class="line">                EXPORT  TIM8_UP_IRQHandler         [WEAK]</div><div class="line">                EXPORT  TIM8_TRG_COM_IRQHandler    [WEAK]</div><div class="line">                EXPORT  TIM8_CC_IRQHandler         [WEAK]</div><div class="line">                EXPORT  ADC3_IRQHandler            [WEAK]</div><div class="line">                EXPORT  FSMC_IRQHandler            [WEAK]</div><div class="line">                EXPORT  SDIO_IRQHandler            [WEAK]</div><div class="line">                EXPORT  TIM5_IRQHandler            [WEAK]</div><div class="line">                EXPORT  SPI3_IRQHandler            [WEAK]</div><div class="line">                EXPORT  UART4_IRQHandler           [WEAK]</div><div class="line">                EXPORT  UART5_IRQHandler           [WEAK]</div><div class="line">                EXPORT  TIM6_IRQHandler            [WEAK]</div><div class="line">                EXPORT  TIM7_IRQHandler            [WEAK]</div><div class="line">                EXPORT  DMA2_Channel1_IRQHandler   [WEAK]</div><div class="line">                EXPORT  DMA2_Channel2_IRQHandler   [WEAK]</div><div class="line">                EXPORT  DMA2_Channel3_IRQHandler   [WEAK]</div><div class="line">                EXPORT  DMA2_Channel4_5_IRQHandler [WEAK]</div><div class="line"></div><div class="line">;如下只是定义一个空函数</div><div class="line">WWDG_IRQHandler</div><div class="line">PVD_IRQHandler</div><div class="line">TAMPER_IRQHandler</div><div class="line">RTC_IRQHandler</div><div class="line">FLASH_IRQHandler</div><div class="line">RCC_IRQHandler</div><div class="line">EXTI0_IRQHandler</div><div class="line">EXTI1_IRQHandler</div><div class="line">EXTI2_IRQHandler</div><div class="line">EXTI3_IRQHandler</div><div class="line">EXTI4_IRQHandler</div><div class="line">DMA1_Channel1_IRQHandler</div><div class="line">DMA1_Channel2_IRQHandler</div><div class="line">DMA1_Channel3_IRQHandler</div><div class="line">DMA1_Channel4_IRQHandler</div><div class="line">DMA1_Channel5_IRQHandler</div><div class="line">DMA1_Channel6_IRQHandler</div><div class="line">DMA1_Channel7_IRQHandler</div><div class="line">ADC1_2_IRQHandler</div><div class="line">USB_HP_CAN1_TX_IRQHandler</div><div class="line">USB_LP_CAN1_RX0_IRQHandler</div><div class="line">CAN1_RX1_IRQHandler</div><div class="line">CAN1_SCE_IRQHandler</div><div class="line">EXTI9_5_IRQHandler</div><div class="line">TIM1_BRK_IRQHandler</div><div class="line">TIM1_UP_IRQHandler</div><div class="line">TIM1_TRG_COM_IRQHandler</div><div class="line">TIM1_CC_IRQHandler</div><div class="line">TIM2_IRQHandler</div><div class="line">TIM3_IRQHandler</div><div class="line">TIM4_IRQHandler</div><div class="line">I2C1_EV_IRQHandler</div><div class="line">I2C1_ER_IRQHandler</div><div class="line">I2C2_EV_IRQHandler</div><div class="line">I2C2_ER_IRQHandler</div><div class="line">SPI1_IRQHandler</div><div class="line">SPI2_IRQHandler</div><div class="line">USART1_IRQHandler</div><div class="line">USART2_IRQHandler</div><div class="line">USART3_IRQHandler</div><div class="line">EXTI15_10_IRQHandler</div><div class="line">RTCAlarm_IRQHandler</div><div class="line">USBWakeUp_IRQHandler</div><div class="line">TIM8_BRK_IRQHandler</div><div class="line">TIM8_UP_IRQHandler</div><div class="line">TIM8_TRG_COM_IRQHandler</div><div class="line">TIM8_CC_IRQHandler</div><div class="line">ADC3_IRQHandler</div><div class="line">FSMC_IRQHandler</div><div class="line">SDIO_IRQHandler</div><div class="line">TIM5_IRQHandler</div><div class="line">SPI3_IRQHandler</div><div class="line">UART4_IRQHandler</div><div class="line">UART5_IRQHandler</div><div class="line">TIM6_IRQHandler</div><div class="line">TIM7_IRQHandler</div><div class="line">DMA2_Channel1_IRQHandler</div><div class="line">DMA2_Channel2_IRQHandler</div><div class="line">DMA2_Channel3_IRQHandler</div><div class="line">DMA2_Channel4_5_IRQHandler</div><div class="line">                B       .</div><div class="line"></div><div class="line">                ENDP</div><div class="line"></div><div class="line">                ALIGN   ;默认是字对齐方式，也说明了代码是4字节对齐的</div><div class="line"></div><div class="line">;*******************************************************************************</div><div class="line">; User Stack and Heap initialization</div><div class="line">;*******************************************************************************</div><div class="line">                 IF      :DEF:__MICROLIB   ;如果勾选了</div><div class="line"></div><div class="line">                 EXPORT  __initial_sp      ;两区堆栈空间，堆和栈有各自的空间地址</div><div class="line">                 EXPORT  __heap_base</div><div class="line">                 EXPORT  __heap_limit</div><div class="line"></div><div class="line">                 ELSE</div><div class="line"></div><div class="line">                 IMPORT  __use_two_region_memory</div><div class="line">                 EXPORT  __user_initial_stackheap</div><div class="line"></div><div class="line">__user_initial_stackheap                   ;此处是初始化两区的堆栈空间，堆是由低到高的增长，</div><div class="line">                                           ；栈是由高到低增长的，两个是互相独立的数据段，不能交叉使用。</div><div class="line"></div><div class="line">                 LDR     R0, =  Heap_Mem</div><div class="line">                 LDR     R1, =(Stack_Mem + Stack_Size)</div><div class="line">                 LDR     R2, = (Heap_Mem +  Heap_Size)</div><div class="line">                 LDR     R3, = Stack_Mem</div><div class="line">                 BX      LR</div><div class="line"></div><div class="line">                 ALIGN</div><div class="line"></div><div class="line">                 ENDIF</div><div class="line"></div><div class="line">                 END</div><div class="line"></div><div class="line">;******************* (C) COPYRIGHT 2011 STMicroelectronics *****END OF FILE*****</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://eathard2.github.io/2017/08/10/stm32启动文件分析/" data-id="cj684vpbi0004rs0l8pppl2fi" class="article-share-link">Share</a>
      
        <a href="https://eathard2.github.io/2017/08/10/stm32启动文件分析/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/stm32/">stm32</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-stm32f10x-h" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/08/10/stm32f10x-h/" class="article-date">
  <time datetime="2017-08-10T05:24:36.000Z" itemprop="datePublished">2017-08-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/08/10/stm32f10x-h/">stm32f10x_h</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">******************************************************************************</div><div class="line"> * @file    stm32f10x.h</div><div class="line"> * @author  MCD Application Team</div><div class="line"> * @version V3.5.0</div><div class="line"> * @date    11-March-2011</div><div class="line"> * @brief   CMSIS Cortex-M3 Device Peripheral Access Layer Header File.</div><div class="line"> *          This file contains all the peripheral register<span class="string">'s definitions, bits</span></div><div class="line"><span class="string"> *          definitions and memory mapping for STM32F10x Connectivity line,</span></div><div class="line"><span class="string"> *          High density, High density value line, Medium density,</span></div><div class="line"><span class="string"> *          Medium density Value line, Low density, Low density Value line</span></div><div class="line"><span class="string"> *          and XL-density devices.</span></div><div class="line"><span class="string"> //         Cortex-M3设备访问层头文件。这个文件包含了所有的外设寄存器定义，位定义和内存映射。</span></div><div class="line"><span class="string"> *          The file is the unique include file that the application programmer</span></div><div class="line"><span class="string"> *          is using in the C source code, usually in main.c. This file contains:</span></div><div class="line"><span class="string"> //             这是C语言编程中的一个特有的#include，通常写在mian.c中，包含以下内容：</span></div><div class="line"><span class="string"> *           - Configuration section that allows to select:</span></div><div class="line"><span class="string"> //               段配置</span></div><div class="line"><span class="string"> *              - The device used in the target application</span></div><div class="line"><span class="string"> //               在目标应用中使用的设备</span></div><div class="line"><span class="string"> *              - To use or not the peripheral drivers in application code(i.e.</span></div><div class="line"><span class="string"> *                code will be based on direct access to peripheral registers</span></div><div class="line"><span class="string"> *                rather than drivers API), this option is controlled by</span></div><div class="line"><span class="string"> *                "#define USE_STDPERIPH_DRIVER"</span></div><div class="line"><span class="string"> //             选择是程序中否启用一些外设驱动，通过“USE_STDPERIPH_DRIVER”来控制程序直接访问外设寄存器而不是驱动api</span></div><div class="line"><span class="string"> *              - To change few application-specific parameters such as the HSE</span></div><div class="line"><span class="string"> *                crystal frequency</span></div><div class="line"><span class="string"> //            改变几个应用特定的参数，比如，HSE晶振频率参数。</span></div><div class="line"><span class="string"> *           - Data structures and the address mapping for all peripherals</span></div><div class="line"><span class="string"> //           所有外设的数据结构和地址映射</span></div><div class="line"><span class="string"> *           - Peripheral'</span>s registers declarations and bits definition</div><div class="line"> //           外设的寄存器定义和地址映射</div><div class="line"> *           - Macros to access peripheral registers hardware</div><div class="line"> //            访问硬件寄存器的宏</div><div class="line"> ******************************************************************************</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://eathard2.github.io/2017/08/10/stm32f10x-h/" data-id="cj684vpbc0003rs0lj2eaiy05" class="article-share-link">Share</a>
      
        <a href="https://eathard2.github.io/2017/08/10/stm32f10x-h/#disqus_thread" class="article-comment-link">留言</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/08/07/hello-world/" class="article-date">
  <time datetime="2017-08-07T07:32:39.660Z" itemprop="datePublished">2017-08-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/08/07/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://eathard2.github.io/2017/08/07/hello-world/" data-id="cj684vpb40001rs0labqu9p7w" class="article-share-link">Share</a>
      
        <a href="https://eathard2.github.io/2017/08/07/hello-world/#disqus_thread" class="article-comment-link">留言</a>
      
      
    </footer>
  </div>
  
</article>


  

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/C语言/">C语言</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/stm32/">stm32</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/C语言/" style="font-size: 10px;">C语言</a> <a href="/tags/stm32/" style="font-size: 10px;">stm32</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/08/11/Understanding-extern-keyword-in-C/">Understanding extern keyword in C</a>
          </li>
        
          <li>
            <a href="/2017/08/10/stm32启动文件分析/">stm32启动文件分析</a>
          </li>
        
          <li>
            <a href="/2017/08/10/stm32f10x-h/">stm32f10x_h</a>
          </li>
        
          <li>
            <a href="/2017/08/07/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 Eat Hard<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    
<script>
  var disqus_shortname = 'HTTPS-EATHARD2-GITHUB-IO';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="https://apps.bdimg.com/libs/jquery/2.0.3/jquery.min.js"></script>
//<![CDATA[
if (typeof jQuery == 'undefined') {
document.write(unescape("%3Cscript src='/js/jquery-2.0.3.min.js' type='text/javascript'%3E%3C/script%3E"));
}
// ]]>
</script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>