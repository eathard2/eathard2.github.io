<html>
<head>
  <title>stm32点亮第一个led灯（初学）</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/304720 (zh-CN, DDL); Windows/6.1.7601 Service Pack 1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="517"/>
<h1>stm32点亮第一个led灯（初学）</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2017/4/9 0:05</i></td></tr>
<tr><td><b>更新时间：</b></td><td><i>2017/4/16 15:22</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://m.blog.csdn.net/article/details?id=24482585"><i>http://m.blog.csdn.net/article/details?id=24482585</i></a></td></tr>
</table>
</div>
<br/>

<div>
<span><div style="-evernote-webclip:true"><br/><div style="font-size: 16px; display: inline-block;"><div style="box-sizing:border-box;font-family:sans-serif;text-size-adjust:100%;font-size:22.5px;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);"><div style="background:rgb(240, 240, 240);box-sizing:border-box;font-size:14px;color:rgb(51, 51, 51);font-family:&quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;background-color:rgb(255, 255, 255);"><div style="box-sizing:border-box;"><div style="box-sizing:border-box;"><div style="box-sizing:border-box;background:rgb(255, 255, 255);"><div style="box-sizing:border-box;"><h3 style="box-sizing: border-box; font-weight: 500; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; margin: 20px 0px 10px; color: rgb(51, 51, 51); padding: 0.5rem 0px 0.3rem; word-break: break-all;"><span style="font-size: 24px;">stm32点亮第一个led灯（初学）</span></h3><div style="box-sizing: border-box; margin: 0px 0px 10px; padding: 0px 0px 0.1rem; font-family: Arial, 'Microsoft YaHei'; font-size: 7px; color: rgb(153, 153, 153);"><div><span style="font-size: 18px;"><br/></span></div><div><span style="font-size: 18px; color: inherit; font-style: inherit; font-variant: inherit;">       作为一名初学stm32的人应该都具备了51单片机的和c语言基础。这是前提。首先一个好的入门视频是非常重要的</span></div></div><div style="box-sizing:border-box;font-size:0.6rem;color:rgb(51, 51, 51);word-wrap:break-word;"><h2 style="box-sizing:border-box;font-family:&quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-weight:500;color:inherit;font-size:30px;margin:0px;padding:0px;margin-top:20px;margin-bottom:10px;"><span style="box-sizing:border-box;margin:0px;padding:0px;font-family:Arial, &quot;Microsoft YaHei&quot;;font-size:18px;">在这里，我推荐鑫鑫的stm32教程视频（百度一下就懂了）， 没有打广告的意思（没任何利益关系），我之前看的是李想<br style="box-sizing:border-box;"/>
的stm32教程，感觉看的有点懵。废话不多说：<br style="box-sizing:border-box;"/>
第一个抉择：<br style="box-sizing:border-box;"/>
（I）走库还是走底层？（库就是st公司给你写好的一系列的头文件和各种函数，你只需要调用即可操纵stm32控制各种外设，而底层则需要你自己写一系列的初始化函数，操作函数），个人觉得初学者可以先用库，甚至这样说都用词不准确，因为很大一部分从事开发的人也是直接调用库函数，除非你对效率和功耗方面有很高的要求。为了方便读者，我这里提供了st库的地址：http://pan.baidu.com/disk/home?fr=ibaidu#dir/path=%2F%E5%8D%9A%E5%AE%A2%E8%B5%84%E6%96%99  。</span></h2><h2 style="box-sizing:border-box;font-family:&quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-weight:500;color:inherit;font-size:30px;margin:0px;padding:0px;margin-top:20px;margin-bottom:10px;"><span style="box-sizing:border-box;margin:0px;padding:0px;font-family:Arial, &quot;Microsoft YaHei&quot;;font-size:18px;"><br style="box-sizing:border-box;"/>
（II）首先你要有个工程文档的模板，这个你看这个视频就ok了（http://pan.baidu.com/disk/home?fr=ibaidu#dir/path=%2F%E5%8D%9A%E5%AE%A2%E8%B5%84%E6%96%99）。创建了这个工程模板之后，以后再做一个项目的时候，你只需拷贝工程模板，再把名字改下，在模板的user文件夹下加入你要写的函数</span></h2><h2 style="box-sizing:border-box;font-family:&quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-weight:500;color:inherit;font-size:30px;margin:0px;padding:0px;margin-top:20px;margin-bottom:10px;"><span style="box-sizing:border-box;margin:0px;padding:0px;font-family:Arial, &quot;Microsoft YaHei&quot;;font-size:18px;"><br style="box-sizing:border-box;"/>
（III）然后关于stm32的时钟，学过51的朋友很可能很困惑，为什么时钟都要初始化？其实这就体现了stm32功能的强大和灵活（具体的我也说不清，因为我也只是个初学者，菜鸟）。关于stm32的时钟构造你可以参看一下李想视频的相关讲解（这部分我很肯定他），然后自己去下一个stm32的中文资料参照着看，大致知道下stm32时钟的具体构造就ok。</span></h2><h2 style="box-sizing:border-box;font-family:&quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-weight:500;color:inherit;font-size:30px;margin:0px;padding:0px;margin-top:20px;margin-bottom:10px;"><span style="box-sizing:border-box;margin:0px;padding:0px;font-family:Arial, &quot;Microsoft YaHei&quot;;font-size:18px;"><br style="box-sizing:border-box;"/>
（IV）其次是gpio，这个也是重点，其实gpio就类似于51单片机的io，但是较之51，它的功能更加强大，gpio提供了很多模式，输入模式有模拟输入模式、浮空输入模式、上拉/下拉输入模式以及保留；输出模式分为通用推挽输出模式、通用开漏输出模式、复用功能推挽输出模式、复用功能开漏输出模式，在点亮led灯我们用的是通用推挽输出模式，并且这种方式是比较常用的。gpio分为7个组，GPIOA——GPIOG，其中每一组（比如GPIOA）有0--15个引脚可供使用。</span></h2><div style="box-sizing:border-box;word-break:break-all;"><span style="box-sizing:border-box;margin:0px;padding:0px;font-family:Arial, &quot;Microsoft YaHei&quot;;font-size:18px;"><br style="box-sizing:border-box;"/></span></div><h2 style="box-sizing:border-box;font-family:&quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-weight:500;color:inherit;font-size:30px;margin:0px;padding:0px;margin-top:20px;margin-bottom:10px;"><span style="box-sizing:border-box;margin:0px;padding:0px;font-family:Arial, &quot;Microsoft YaHei&quot;;font-size:18px;">（V）好了，下面直接上程序（main.c文件直接把这个代码码进去）<img src="stm32点亮第一个led灯（初学）_files/20140425172357015.png" type="image/png" height="157" style="box-sizing: border-box; border: 0px; vertical-align: middle; outline: none; max-width: 100%; max-height: 100%; height: auto;" width="338"/><br style="box-sizing:border-box;"/>
以下的解释 前提是你已经配置好了工程模板！！<br style="box-sizing:border-box;"/>
#include &quot;stm32f10x.h&quot;类似于51单片机的&quot;reg51.h&quot;,一个很重要的头文件，GPIO_InitTypeDef,这是一个结构体，c语言学的不好的可以去补补课了，我们可以很容易的从它的字面意思知道它是定义了一个GPIO的类型（比如int也是一种类型），在stm32f10x_gpio.h这个文件里我们可以找到（这里提一个技巧：如GPIO_SetBits()函数，那你就去stm32f10x.h这个文件里去找，RCC_APB2PeriphClockCmd()函数你就去stm32f10x_rcc.c文件去找edit-&gt;find,当然你也可以直接用库带的帮助文档<img src="stm32点亮第一个led灯（初学）_files/20140425180103984.png" type="image/png" height="22" style="box-sizing: border-box; border: 0px; vertical-align: middle; outline: none; max-width: 100%; max-height: 100%; height: auto;" width="257"/>找）附一张定义GPIO_InitTypeDef的图<br style="box-sizing:border-box;"/>
                                              <img src="stm32点亮第一个led灯（初学）_files/20140425180450734.png" type="image/png" height="186" style="box-sizing: border-box; border: 0px; vertical-align: middle; outline: none; max-width: 100%; max-height: 100%; height: auto;" width="267"/><br style="box-sizing:border-box;"/>
至于GPIO_InitStructure,它仅仅只是一个变量名，一个你可以任取的变量名。声明好变量之后按照 “打开时钟-&gt;配置-&gt;使用”的过程来写代码。<br style="box-sizing:border-box;"/>
RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA,ENABLE);RCC英文缩写（<span style="box-sizing:border-box;margin:0px;padding:0px;font-family:Arial;color:rgb(51,51,51);">Reset and clock control） </span>这个函数的目的是将GPIOA口的时钟打开，可是为什么是APB2，<br style="box-sizing:border-box;"/>
答案直接上图：<br style="box-sizing:border-box;"/>
                <img src="stm32点亮第一个led灯（初学）_files/20140425181711156.png" type="image/png" height="248" style="box-sizing: border-box; border: 0px; vertical-align: middle; outline: none; max-width: 100%; max-height: 100%; height: auto;" width="338"/><br style="box-sizing:border-box;"/>
可以看到APB2控制了所有的GPIO，自然我们要给开时钟的也就是APB2（具体函数意思参见帮助文档）<br style="box-sizing:border-box;"/>
然后开始配置，事实上，GPIO_Pin、GPIO_Mode、GPIO_Speed，st公司已经给我们定义了枚举类型：（这些定义在stm32f10x_gpio.h可以找到）<br style="box-sizing:border-box;"/><img src="stm32点亮第一个led灯（初学）_files/20140425182333062.png" type="image/png" height="101" style="box-sizing: border-box; border: 0px; vertical-align: middle; outline: none; max-width: 100%; max-height: 100%; height: auto;" width="203"/>      <img src="stm32点亮第一个led灯（初学）_files/20140425182419843.png" type="image/png" height="166" style="box-sizing: border-box; border: 0px; vertical-align: middle; outline: none; max-width: 100%; max-height: 100%; height: auto;" width="259"/><br style="box-sizing:border-box;"/>
选择50MHz的原因我不知道是为什么，大概是因为速度快点比较好吧，然后选择GPIO_Mode_Out_PP就是通用推挽输出模式（PUSH-PULL），管脚你自己随意选择<br style="box-sizing:border-box;"/>
GPIO_Init(GPIOA,&amp;GPIO_InitStructure);是给GPIO初始化，这个具体参照帮助文档，我不太懂<br style="box-sizing:border-box;"/>
GPIO_SetBits(GPIOA,GPIO_Pin_0)这个函数的意思是将GPIOA中的0引脚置高，如果置低就是GPIO_ResetBits(GPIOA,GPIO_Pin_0)<br style="box-sizing:border-box;"/>
ok，这样子就结束了，如果你把这个过程理顺了，会发现其实入门真的不难。<br style="box-sizing:border-box;"/>
我总结一下资源：</span></h2><h2 style="box-sizing:border-box;font-family:&quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-weight:500;color:inherit;font-size:30px;margin:0px;padding:0px;margin-top:20px;margin-bottom:10px;"><span style="box-sizing:border-box;margin:0px;padding:0px;font-family:Arial, &quot;Microsoft YaHei&quot;;font-size:18px;">http://pan.baidu.com/disk/home?fr=ibaidu#dir/path=%2F%E5%8D%9A%E5%AE%A2%E8%B5%84%E6%96%99</span></h2><h2 style="box-sizing:border-box;font-family:&quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;font-weight:500;color:inherit;font-size:30px;margin:0px;padding:0px;margin-top:20px;margin-bottom:10px;"><span style="box-sizing:border-box;margin:0px;padding:0px;font-family:Arial, &quot;Microsoft YaHei&quot;;font-size:18px;"><br style="box-sizing:border-box;"/>
邮箱：444502842@qq.com</span></h2><p style="box-sizing:border-box;margin:0px 0px 10px;font-family:Arial, &quot;Microsoft YaHei&quot;;padding:0.2rem 0px 0.3rem;font-size:0.7rem;color:rgb(51, 51, 51);word-break:break-all;"><br style="box-sizing:border-box;"/></p><p style="box-sizing:border-box;margin:0px 0px 10px;font-family:Arial, &quot;Microsoft YaHei&quot;;padding:0.2rem 0px 0.3rem;font-size:0.7rem;color:rgb(51, 51, 51);word-break:break-all;"><br style="box-sizing:border-box;"/></p><p style="box-sizing:border-box;margin:0px 0px 10px;font-family:Arial, &quot;Microsoft YaHei&quot;;padding:0.2rem 0px 0.3rem;font-size:0.7rem;color:rgb(51, 51, 51);word-break:break-all;"><br style="box-sizing:border-box;"/></p><p style="box-sizing:border-box;margin:0px 0px 10px;font-family:Arial, &quot;Microsoft YaHei&quot;;padding:0.2rem 0px 0.3rem;font-size:0.7rem;color:rgb(51, 51, 51);word-break:break-all;"><br style="box-sizing:border-box;"/></p><p style="box-sizing:border-box;margin:0px 0px 10px;font-family:Arial, &quot;Microsoft YaHei&quot;;padding:0.2rem 0px 0.3rem;font-size:0.7rem;color:rgb(51, 51, 51);word-break:break-all;"><br style="box-sizing:border-box;"/></p><p style="box-sizing:border-box;margin:0px 0px 10px;font-family:Arial, &quot;Microsoft YaHei&quot;;padding:0.2rem 0px 0.3rem;font-size:0.7rem;color:rgb(51, 51, 51);word-break:break-all;"><br style="box-sizing:border-box;"/></p><p style="box-sizing:border-box;margin:0px 0px 10px;font-family:Arial, &quot;Microsoft YaHei&quot;;padding:0.2rem 0px 0.3rem;font-size:0.7rem;color:rgb(51, 51, 51);word-break:break-all;"><br style="box-sizing:border-box;"/></p><p style="box-sizing:border-box;margin:0px 0px 10px;font-family:Arial, &quot;Microsoft YaHei&quot;;padding:0.2rem 0px 0.3rem;font-size:0.7rem;color:rgb(51, 51, 51);word-break:break-all;"><br style="box-sizing:border-box;"/></p><p style="box-sizing:border-box;margin:0px 0px 10px;font-family:Arial, &quot;Microsoft YaHei&quot;;padding:0.2rem 0px 0.3rem;font-size:0.7rem;color:rgb(51, 51, 51);word-break:break-all;"><br style="box-sizing:border-box;"/></p><p style="box-sizing:border-box;margin:0px 0px 10px;font-family:Arial, &quot;Microsoft YaHei&quot;;padding:0.2rem 0px 0.3rem;font-size:0.7rem;color:rgb(51, 51, 51);word-break:break-all;"><br style="box-sizing:border-box;"/></p><p style="box-sizing:border-box;margin:0px 0px 10px;font-family:Arial, &quot;Microsoft YaHei&quot;;padding:0.2rem 0px 0.3rem;font-size:0.7rem;color:rgb(51, 51, 51);word-break:break-all;"><br style="box-sizing:border-box;"/></p><p style="box-sizing:border-box;margin:0px 0px 10px;font-family:Arial, &quot;Microsoft YaHei&quot;;padding:0.2rem 0px 0.3rem;font-size:0.7rem;color:rgb(51, 51, 51);word-break:break-all;"><br style="box-sizing:border-box;"/></p><p style="box-sizing:border-box;margin:0px 0px 10px;font-family:Arial, &quot;Microsoft YaHei&quot;;padding:0.2rem 0px 0.3rem;font-size:0.7rem;color:rgb(51, 51, 51);word-break:break-all;"><br style="box-sizing:border-box;"/></p><p style="box-sizing:border-box;margin:0px 0px 10px;font-family:Arial, &quot;Microsoft YaHei&quot;;padding:0.2rem 0px 0.3rem;font-size:0.7rem;color:rgb(51, 51, 51);word-break:break-all;"><br style="box-sizing:border-box;"/></p><p style="box-sizing:border-box;margin:0px 0px 10px;font-family:Arial, &quot;Microsoft YaHei&quot;;padding:0.2rem 0px 0.3rem;font-size:0.7rem;color:rgb(51, 51, 51);word-break:break-all;"><br style="box-sizing:border-box;"/></p><p style="box-sizing:border-box;margin:0px 0px 10px;font-family:Arial, &quot;Microsoft YaHei&quot;;padding:0.2rem 0px 0.3rem;font-size:0.7rem;color:rgb(51, 51, 51);word-break:break-all;"><br style="box-sizing:border-box;"/></p><p style="box-sizing:border-box;margin:0px 0px 10px;font-family:Arial, &quot;Microsoft YaHei&quot;;padding:0.2rem 0px 0.3rem;font-size:0.7rem;color:rgb(51, 51, 51);word-break:break-all;"><br style="box-sizing:border-box;"/></p><p style="box-sizing:border-box;margin:0px 0px 10px;font-family:Arial, &quot;Microsoft YaHei&quot;;padding:0.2rem 0px 0.3rem;font-size:0.7rem;color:rgb(51, 51, 51);word-break:break-all;"><br style="box-sizing:border-box;"/></p><p style="box-sizing:border-box;margin:0px 0px 10px;font-family:Arial, &quot;Microsoft YaHei&quot;;padding:0.2rem 0px 0.3rem;font-size:0.7rem;color:rgb(51, 51, 51);word-break:break-all;"><br style="box-sizing:border-box;"/></p><p style="box-sizing:border-box;margin:0px 0px 10px;font-family:Arial, &quot;Microsoft YaHei&quot;;padding:0.2rem 0px 0.3rem;font-size:0.7rem;color:rgb(51, 51, 51);word-break:break-all;"><br style="box-sizing:border-box;"/></p><p style="box-sizing:border-box;margin:0px 0px 10px;font-family:Arial, &quot;Microsoft YaHei&quot;;padding:0.2rem 0px 0.3rem;font-size:0.7rem;color:rgb(51, 51, 51);word-break:break-all;"><br style="box-sizing:border-box;"/></p><p style="box-sizing:border-box;margin:0px 0px 10px;font-family:Arial, &quot;Microsoft YaHei&quot;;padding:0.2rem 0px 0.3rem;font-size:0.7rem;color:rgb(51, 51, 51);word-break:break-all;"><br style="box-sizing:border-box;"/></p><p style="box-sizing:border-box;margin:0px 0px 10px;font-family:Arial, &quot;Microsoft YaHei&quot;;padding:0.2rem 0px 0.3rem;font-size:0.7rem;color:rgb(51, 51, 51);word-break:break-all;"><br style="box-sizing:border-box;"/></p><p style="box-sizing:border-box;margin:0px 0px 10px;font-family:Arial, &quot;Microsoft YaHei&quot;;padding:0.2rem 0px 0.3rem;font-size:0.7rem;color:rgb(51, 51, 51);word-break:break-all;"><br style="box-sizing:border-box;"/></p><p style="box-sizing:border-box;margin:0px 0px 10px;font-family:Arial, &quot;Microsoft YaHei&quot;;padding:0.2rem 0px 0.3rem;font-size:0.7rem;color:rgb(51, 51, 51);word-break:break-all;"><br style="box-sizing:border-box;"/></p><p style="box-sizing:border-box;margin:0px 0px 10px;font-family:Arial, &quot;Microsoft YaHei&quot;;padding:0.2rem 0px 0.3rem;font-size:0.7rem;color:rgb(51, 51, 51);word-break:break-all;"><br style="box-sizing:border-box;"/></p><p style="box-sizing:border-box;margin:0px 0px 10px;font-family:Arial, &quot;Microsoft YaHei&quot;;padding:0.2rem 0px 0.3rem;font-size:0.7rem;color:rgb(51, 51, 51);word-break:break-all;"><br style="box-sizing:border-box;"/></p><p style="box-sizing:border-box;margin:0px 0px 10px;font-family:Arial, &quot;Microsoft YaHei&quot;;padding:0.2rem 0px 0.3rem;font-size:0.7rem;color:rgb(51, 51, 51);word-break:break-all;"><br style="box-sizing:border-box;"/></p><p style="box-sizing:border-box;margin:0px 0px 10px;font-family:Arial, &quot;Microsoft YaHei&quot;;padding:0.2rem 0px 0.3rem;font-size:0.7rem;color:rgb(51, 51, 51);word-break:break-all;"><br style="box-sizing:border-box;"/></p></div></div></div></div></div></div></div></div><br/></div></span>
</div></body></html> 