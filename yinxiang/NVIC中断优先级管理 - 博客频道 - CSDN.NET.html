<html>
<head>
  <title>NVIC中断优先级管理 - 博客频道 - CSDN.NET</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/304720 (zh-CN, DDL); Windows/6.1.7601 Service Pack 1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="631"/>
<h1>NVIC中断优先级管理 - 博客频道 - CSDN.NET</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2017/4/10 17:53</i></td></tr>
<tr><td><b>更新时间：</b></td><td><i>2017/4/10 21:23</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://blog.csdn.net/abap_brave/article/details/52457175"><i>http://blog.csdn.net/abap_brave/article/details/52457175</i></a></td></tr>
</table>
</div>
<br/>

<div><span><div style="-evernote-webclip:true"><br/><div style="font-size: 16px; display: inline-block;"><div style="box-sizing:border-box;font-family:sans-serif;text-size-adjust:100%;font-size:100%;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);outline:0px;vertical-align:baseline;background:transparent;"><div style="overflow:hidden;box-sizing:border-box;outline:0px;font-size:14px;color:rgb(153, 153, 153);font-weight:normal;font-family:Arial, sans-serif;vertical-align:baseline;background:transparent;font-style:normal;font-variant:normal;font-stretch:normal;"><div style="box-sizing:border-box;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;overflow:hidden;"><div style="box-sizing:border-box;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;overflow:hidden;"><div style="box-sizing:border-box;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;"><div style="box-sizing:border-box;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;"><div style="box-sizing:border-box;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;"><div style="box-sizing:border-box;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;list-style:none;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;"><div style="box-sizing:border-box;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;list-style:none;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;margin-left:40px;"><div style="box-sizing:border-box;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;word-break:break-word;"><div style="box-sizing:border-box;outline:0px;vertical-align:baseline;background:transparent;font-size:14px;font-family:&quot;microsoft yahei&quot;;"><h1 style="color:rgb(102, 102, 102);background:transparent;vertical-align:baseline;font-family:&quot;Microsoft YaHei&quot;;outline:0px;font-size:28px;padding:0px;border:0px;box-sizing:border-box;font-weight:100;margin:0.8em 0px;">一,STM32中断介绍</h1>

<p style="color:rgb(102, 102, 102);background:transparent;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;vertical-align:baseline;outline:0px;border:0px;box-sizing:border-box;margin:0px 0px 1.1em;font-size:15px;">CM3内核支持256个中断,16个内核中断和240个外部中断,具有256级可编程中断设置</p>

<p style="color:rgb(102, 102, 102);background:transparent;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;vertical-align:baseline;outline:0px;border:0px;box-sizing:border-box;margin:0px 0px 1.1em;font-size:15px;">STM32只使用了CM3内核的一部分,84个中断:16个内核中断+68个可屏蔽中断(外部中断),具有16级可编程的中断优先级</p>

<p style="color:rgb(102, 102, 102);background:transparent;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;vertical-align:baseline;outline:0px;border:0px;box-sizing:border-box;margin:0px 0px 1.1em;font-size:15px;">STM32F103系列只有60个可屏蔽中断(F107系列有68个)</p>

<hr style="border-image:initial;height:1px;background-color:rgb(238, 238, 238);width:100%;border:0px;border-top-color:rgba(128, 128, 128, 0.0980392);border-right-color:initial;border-left-color:initial;box-sizing:border-box;border-top-style:solid;border-bottom-color:initial;margin:2em 0px;border-left-style:initial;border-bottom-style:initial;border-right-style:initial;border-width:1px 0px 0px;"/>

<h1 style="color:rgb(102, 102, 102);background:transparent;vertical-align:baseline;font-family:&quot;Microsoft YaHei&quot;;outline:0px;font-size:28px;padding:0px;border:0px;box-sizing:border-box;font-weight:100;margin:0.8em 0px;">二,中断管理</h1>

<p style="color:rgb(102, 102, 102);background:transparent;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;vertical-align:baseline;outline:0px;border:0px;box-sizing:border-box;margin:0px 0px 1.1em;font-size:15px;">STM32有如此多的中断,那么是如何进行管理的</p>

<p style="color:rgb(102, 102, 102);background:transparent;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;vertical-align:baseline;outline:0px;border:0px;box-sizing:border-box;margin:0px 0px 1.1em;font-size:15px;"><img src="NVIC中断优先级管理 - 博客频道 - CSDN.NET_files/20160907092943534.png" type="image/png" alt="这里写图片描述" height="264" style="border:0px;vertical-align:middle;outline:0px;margin:0px;padding:0px;font-size:100%;background:transparent;box-sizing:border-box;max-width:100%;" title="" width="732"/></p>

<p style="color:rgb(102, 102, 102);background:transparent;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;vertical-align:baseline;outline:0px;border:0px;box-sizing:border-box;margin:0px 0px 1.1em;font-size:15px;"><strong style="font-weight:bold;margin:0px;padding:0px;border:0px;outline:0px;vertical-align:baseline;background:transparent;box-sizing:border-box;font-size:16px;">中断优先级分组:</strong></p>

<p style="color:rgb(102, 102, 102);background:transparent;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;vertical-align:baseline;outline:0px;border:0px;box-sizing:border-box;margin:0px 0px 1.1em;font-size:15px;">　SCB-&gt;AIRCR [10:8]3位寄存器 : </p>

<pre style="word-break:break-all;font-family:&quot;Source Code Pro&quot;, monospace;white-space:pre-wrap;box-sizing:border-box;display:block;padding:10px;margin:0px 0px 10.5px;color:rgb(51, 51, 51);font-size:14px;word-wrap:break-word;border:1px solid rgba(128, 128, 128, 0.0745098);border-radius:0px;font-weight:normal;outline:0px;vertical-align:baseline;background:transparent;background-color:rgba(128, 128, 128, 0.0470588);"><code style="border-radius:0px;font-family:&quot;Source Code Pro&quot;, monospace;box-sizing:border-box;background:transparent;vertical-align:baseline;outline:0px;border:0px;margin:0px;word-break:break-word;font-size:inherit;background-color:transparent;color:inherit;padding:0px;word-wrap:normal;white-space:pre-wrap;">配置分组,确定中断具有几位抢占优先级和几位响应优先级

每一个中断都具有一个[7:4]4位IP寄存器,通过这4个位来设置抢占和响应优先级, 16级可编程中断优先级(2的4次方=16)

配置分组寄存器SCB-&gt;AIRCR之后,抢占优先级和响应优先级的位分配也对应完成
</code></pre>

<hr style="border-image:initial;height:1px;background-color:rgb(238, 238, 238);width:100%;border:0px;border-top-color:rgba(128, 128, 128, 0.0980392);border-right-color:initial;border-left-color:initial;box-sizing:border-box;border-top-style:solid;border-bottom-color:initial;margin:2em 0px;border-left-style:initial;border-bottom-style:initial;border-right-style:initial;border-width:1px 0px 0px;"/>



<h1 style="color:rgb(102, 102, 102);background:transparent;vertical-align:baseline;font-family:&quot;Microsoft YaHei&quot;;outline:0px;font-size:28px;padding:0px;border:0px;box-sizing:border-box;font-weight:100;margin:0.8em 0px;">三,抢占优先级和响应优先级:</h1>

<pre style="word-break:break-all;font-family:&quot;Source Code Pro&quot;, monospace;white-space:pre-wrap;box-sizing:border-box;display:block;padding:10px;margin:0px 0px 10.5px;color:rgb(51, 51, 51);font-size:14px;word-wrap:break-word;border:1px solid rgba(128, 128, 128, 0.0745098);border-radius:0px;font-weight:normal;outline:0px;vertical-align:baseline;background:transparent;background-color:rgba(128, 128, 128, 0.0470588);"><code style="border-radius:0px;font-family:&quot;Source Code Pro&quot;, monospace;box-sizing:border-box;background:transparent;vertical-align:baseline;outline:0px;border:0px;margin:0px;word-break:break-word;font-size:inherit;background-color:transparent;color:inherit;padding:0px;word-wrap:normal;white-space:pre-wrap;"> 优先级高低划分:0最高,4最低

 较高抢占优先级中断可以打断正在执行的较低抢占优先级的中断

 如:A的抢占优先级是4,B的抢占优先级是0
 A中断正在执行中,B中断发生,此时由于B的抢占优先级较高,会先暂停执行A的中断,先执行B的中断,待B中中断执行完成后,继续执行A的中断

 抢占优先级相同,且两个中断同时发生时,响应优先级较高的中断先执行

 如:A,B的抢占优先级是0,A的响应优先级是0,B的响应优先级是4
 A,B中断同时发生,此时由于A的响应优先级较高,A中断先执行
</code></pre>

<hr style="border-image:initial;height:1px;background-color:rgb(238, 238, 238);width:100%;border:0px;border-top-color:rgba(128, 128, 128, 0.0980392);border-right-color:initial;border-left-color:initial;box-sizing:border-box;border-top-style:solid;border-bottom-color:initial;margin:2em 0px;border-left-style:initial;border-bottom-style:initial;border-right-style:initial;border-width:1px 0px 0px;"/>

<h1 style="color:rgb(102, 102, 102);background:transparent;vertical-align:baseline;font-family:&quot;Microsoft YaHei&quot;;outline:0px;font-size:28px;padding:0px;border:0px;box-sizing:border-box;font-weight:100;margin:0.8em 0px;">四,中断优先级分组函数</h1>

<p style="color:rgb(102, 102, 102);background:transparent;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;vertical-align:baseline;outline:0px;border:0px;box-sizing:border-box;margin:0px 0px 1.1em;font-size:15px;">中断优先级分组函数:</p>

<pre style="word-break:break-all;padding:5px 5px 5px 60px;font-family:&quot;Source Code Pro&quot;, monospace;font-size:14px;white-space:nowrap;box-sizing:border-box;display:block;overflow-y:hidden;color:rgb(51, 51, 51);border:1px solid rgba(128, 128, 128, 0.0745098);word-wrap:break-word;border-radius:0px;font-weight:normal;outline:0px;vertical-align:baseline;background:transparent;background-color:rgba(128, 128, 128, 0.0470588);position:relative;overflow-x:auto;margin:0px 0px 1.1em;"><code style="margin:0px;font-family:&quot;Source Code Pro&quot;, monospace;box-sizing:border-box;display:block;background:rgb(255, 255, 255);vertical-align:baseline;outline:0px;word-break:break-word;border:0px;font-size:inherit;border-radius:0px;color:inherit;padding:0px;background-color:transparent;word-wrap:normal;white-space:pre-wrap;"><span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 136);">void</span> NVIC_PriorityGroupConfig(uint32_t NVIC_PriorityGroup);</code><ul style="vertical-align:baseline;box-sizing:border-box;background:transparent;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;font-size:100%;border:0px;outline:0px;list-style:none;margin:0px;padding:6px 0px 40px;position:absolute;width:50px;background-color:rgb(238, 238, 238);top:0px;left:0px;border-right:1px solid rgb(221, 221, 221);text-align:right;"><li>1</li></ul></pre>

<p style="color:rgb(102, 102, 102);background:transparent;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;vertical-align:baseline;outline:0px;border:0px;box-sizing:border-box;margin:0px 0px 1.1em;font-size:15px;">在misc.c中找到NVIC_PriorityGroupConfig函数源码:</p>

<div style="padding:5px 5px 5px 60px;font-family:&quot;Source Code Pro&quot;, monospace;font-size:14px;box-sizing:border-box;display:block;overflow-y:hidden;color:rgb(51, 51, 51);border:1px solid rgba(128, 128, 128, 0.0745098);border-radius:0px;font-weight:normal;outline:0px;vertical-align:baseline;background:transparent;background-color:rgba(128, 128, 128, 0.0470588);position:relative;overflow-x:auto;margin:0px 0px 1.1em;"><code style="margin:0px;font-family:&quot;Source Code Pro&quot;, monospace;box-sizing:border-box;display:block;background:rgb(255, 255, 255);vertical-align:baseline;outline:0px;border:0px;font-size:inherit;border-radius:0px;color:inherit;padding:0px;background-color:transparent;">/**<br/>  * <span style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;border:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;box-sizing:border-box;">@brief</span>  Configures the priority <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 136, 0);">grouping</span>: pre-emption priority <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 136);">and</span> subpriority.<br/>  * <span style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;border:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;box-sizing:border-box;">@param</span>  <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 136, 0);">NVIC_PriorityGroup</span>: specifies the priority grouping bits length.<br/>  *   This parameter can be one <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 136);">of</span> the following <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 136, 0);">values</span>:<br/>  *     <span style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;border:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;box-sizing:border-box;">@arg</span> <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 136, 0);">NVIC_PriorityGroup_0</span>: <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">0</span> bits <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 136);">for</span> pre-emption priority<br/>  *                                <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">4</span> bits <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 136);">for</span> subpriority<br/>  *     <span style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;border:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;box-sizing:border-box;">@arg</span> <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 136, 0);">NVIC_PriorityGroup_1</span>: <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">1</span> bits <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 136);">for</span> pre-emption priority<br/>  *                                <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">3</span> bits <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 136);">for</span> subpriority<br/>  *     <span style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;border:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;box-sizing:border-box;">@arg</span> <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 136, 0);">NVIC_PriorityGroup_2</span>: <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">2</span> bits <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 136);">for</span> pre-emption priority<br/>  *                                <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">2</span> bits <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 136);">for</span> subpriority<br/>  *     <span style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;border:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;box-sizing:border-box;">@arg</span> <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 136, 0);">NVIC_PriorityGroup_3</span>: <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">3</span> bits <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 136);">for</span> pre-emption priority<br/>  *                                <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">1</span> bits <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 136);">for</span> subpriority<br/>  *     <span style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;border:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;box-sizing:border-box;">@arg</span> <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 136, 0);">NVIC_PriorityGroup_4</span>: <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">4</span> bits <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 136);">for</span> pre-emption priority<br/>  *                                <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">0</span> bits <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 136);">for</span> subpriority<br/>  * <span style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;border:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;box-sizing:border-box;">@retval</span> None<br/>  */<br/><span style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;border:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;box-sizing:border-box;">void</span> NVIC_PriorityGroupConfig(uint32_t NVIC_PriorityGroup)<br/>{<br/>  <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 136, 0);">/* Check the parameters */</span><br/>  assert_param(IS_NVIC_PRIORITY_GROUP(NVIC_PriorityGroup));<br/><br/>  <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 136, 0);">/* Set the PRIGROUP[10:8] bits according to NVIC_PriorityGroup value */</span><br/>  SCB-&gt;AIRCR = AIRCR_VECTKEY_MASK | NVIC_PriorityGroup;  <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 136, 0);">//</span>实际操作了SCB-&gt;AIRCR寄存器<br/>}</code><div style="vertical-align:baseline;box-sizing:border-box;background:transparent;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;font-size:100%;border:0px;outline:0px;list-style:none;margin:0px;padding:6px 0px 40px;position:absolute;width:50px;background-color:rgb(238, 238, 238);top:0px;left:0px;border-right:1px solid rgb(221, 221, 221);text-align:right;"><div><br/></div></div></div>

<p style="color:rgb(102, 102, 102);background:transparent;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;vertical-align:baseline;outline:0px;border:0px;box-sizing:border-box;margin:0px 0px 1.1em;font-size:15px;">入参NVIC_PriorityGroup有效性判断: <br style="box-sizing:border-box;"/>
在misc.h中找到IS_NVIC_PRIORITY_GROUP的声明</p>

<div style="padding:5px 5px 5px 60px;font-family:&quot;Source Code Pro&quot;, monospace;font-size:14px;box-sizing:border-box;display:block;overflow-y:hidden;color:rgb(51, 51, 51);border:1px solid rgba(128, 128, 128, 0.0745098);border-radius:0px;font-weight:normal;outline:0px;vertical-align:baseline;background:transparent;background-color:rgba(128, 128, 128, 0.0470588);position:relative;overflow-x:auto;margin:0px 0px 1.1em;"><code style="margin:0px;font-family:&quot;Source Code Pro&quot;, monospace;box-sizing:border-box;display:block;background:rgb(255, 255, 255);vertical-align:baseline;outline:0px;border:0px;font-size:inherit;border-radius:0px;color:inherit;padding:0px;background-color:transparent;"><span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">/** @defgroup Preemption_Priority_Group<br/>  * @{<br/>  */</span></code><div><span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);"><span style="background-color: transparent;">#define</span></span><span style="color: inherit;"><span style="background-color: transparent;"><span style="font-size: inherit;"> NVIC_PriorityGroup_0         ((uint32_t)</span></span></span><span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);"><span style="background-color: transparent;">0x700</span></span><span style="color: inherit;"><span style="background-color: transparent;"><span style="font-size: inherit;">) </span></span></span><span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);"><span style="background-color: transparent;">//0位抢占,4为响应</span></span></div><code style="margin:0px;font-family:&quot;Source Code Pro&quot;, monospace;box-sizing:border-box;display:block;background:rgb(255, 255, 255);vertical-align:baseline;outline:0px;border:0px;font-size:inherit;border-radius:0px;color:inherit;padding:0px;background-color:transparent;"><span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">#define</span> NVIC_PriorityGroup_1         ((uint32_t)<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">0x600</span>) <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">//1位抢占,3为响应</span><br/><span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">#define</span> NVIC_PriorityGroup_2         ((uint32_t)<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">0x500</span>) <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">//2位抢占,2为响应</span><br/><span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">#define</span> NVIC_PriorityGroup_3         ((uint32_t)<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">0x400</span>) <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">//3位抢占,1为响应</span><br/><span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">#define</span> NVIC_PriorityGroup_4         ((uint32_t)<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">0x300</span>) <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">//4位抢占,0为响应</span><br/><br/><span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">//有效性 分组0 - 分组4</span><br/><span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">#define</span> IS_NVIC_PRIORITY_GROUP(<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 136);">GROUP</span>) (((<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 136);">GROUP</span>) <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 0);">==</span> NVIC_PriorityGroup_0) <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 0);">||</span> <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 0);">\</span><br/>                                       ((<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 136);">GROUP</span>) <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 0);">==</span> NVIC_PriorityGroup_1) <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 0);">||</span> <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 0);">\</span><br/>                                       ((<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 136);">GROUP</span>) <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 0);">==</span> NVIC_PriorityGroup_2) <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 0);">||</span> <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 0);">\</span><br/>                                       ((<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 136);">GROUP</span>) <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 0);">==</span> NVIC_PriorityGroup_3) <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 0);">||</span> <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 0);">\</span><br/>                                       ((<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 136);">GROUP</span>) <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 0);">==</span> NVIC_PriorityGroup_4))</code><div style="vertical-align:baseline;box-sizing:border-box;background:transparent;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;font-size:100%;border:0px;outline:0px;list-style:none;margin:0px;padding:6px 0px 40px;position:absolute;width:50px;background-color:rgb(238, 238, 238);top:0px;left:0px;border-right:1px solid rgb(221, 221, 221);text-align:right;"><div><br/></div></div></div>

<p style="color:rgb(102, 102, 102);background:transparent;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;vertical-align:baseline;outline:0px;border:0px;box-sizing:border-box;margin:0px 0px 1.1em;font-size:15px;">设置分组:</p>

<pre style="word-break:break-all;padding:5px 5px 5px 60px;font-family:&quot;Source Code Pro&quot;, monospace;font-size:14px;white-space:nowrap;box-sizing:border-box;display:block;overflow-y:hidden;color:rgb(51, 51, 51);border:1px solid rgba(128, 128, 128, 0.0745098);word-wrap:break-word;border-radius:0px;font-weight:normal;outline:0px;vertical-align:baseline;background:transparent;background-color:rgba(128, 128, 128, 0.0470588);position:relative;overflow-x:auto;margin:0px 0px 1.1em;"><code style="margin:0px;font-family:&quot;Source Code Pro&quot;, monospace;box-sizing:border-box;display:block;background:rgb(255, 255, 255);vertical-align:baseline;outline:0px;word-break:break-word;border:0px;font-size:inherit;border-radius:0px;color:inherit;padding:0px;background-color:transparent;word-wrap:normal;white-space:pre-wrap;"><span style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;border:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;box-sizing:border-box;">NVIC_PriorityGroupConfig(NVIC_PriorityGroup_2)</span>;<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">//分组2</span></code><ul style="vertical-align:baseline;box-sizing:border-box;background:transparent;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;font-size:100%;border:0px;outline:0px;list-style:none;margin:0px;padding:6px 0px 40px;position:absolute;width:50px;background-color:rgb(238, 238, 238);top:0px;left:0px;border-right:1px solid rgb(221, 221, 221);text-align:right;"><li>1</li></ul></pre>

<hr style="border-image:initial;height:1px;background-color:rgb(238, 238, 238);width:100%;border:0px;border-top-color:rgba(128, 128, 128, 0.0980392);border-right-color:initial;border-left-color:initial;box-sizing:border-box;border-top-style:solid;border-bottom-color:initial;margin:2em 0px;border-left-style:initial;border-bottom-style:initial;border-right-style:initial;border-width:1px 0px 0px;"/>



<h1 style="color:rgb(102, 102, 102);background:transparent;vertical-align:baseline;font-family:&quot;Microsoft YaHei&quot;;outline:0px;font-size:28px;padding:0px;border:0px;box-sizing:border-box;font-weight:100;margin:0.8em 0px;">五,设置分组相关寄存器:</h1>

<div style="padding:5px 5px 5px 60px;font-family:&quot;Source Code Pro&quot;, monospace;font-size:14px;box-sizing:border-box;display:block;overflow-y:hidden;color:rgb(51, 51, 51);border:1px solid rgba(128, 128, 128, 0.0745098);border-radius:0px;font-weight:normal;outline:0px;vertical-align:baseline;background:transparent;background-color:rgba(128, 128, 128, 0.0470588);position:relative;overflow-x:auto;margin:0px 0px 1.1em;"><code style="margin:0px;font-family:&quot;Source Code Pro&quot;, monospace;box-sizing:border-box;display:block;background:rgb(255, 255, 255);vertical-align:baseline;outline:0px;border:0px;font-size:inherit;border-radius:0px;color:inherit;padding:0px;background-color:transparent;">__IO uint8_t  IP<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 136, 0);">[240]</span>; <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">//中断优先级控制的寄存器组</span><br/><br/>__IO uint32_t ISER<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 136, 0);">[8]</span>; <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">//中断使能寄存器组</span><br/><br/>__IO uint32_t ICER<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 136, 0);">[8]</span>; <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">//中断失能寄存器组</span><br/><br/>__IO uint32_t ISPR<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 136, 0);">[8]</span>; <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">//中断挂起寄存器组</span><br/><br/>__IO uint32_t ICPR<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 136, 0);">[8]</span>; <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">//中断解挂寄存器组</span><br/><br/>__IO uint32_t IABR<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 136, 0);">[8]</span>; <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">//中断激活标志位寄存器组</span></code><div style="vertical-align:baseline;box-sizing:border-box;background:transparent;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;font-size:100%;border:0px;outline:0px;list-style:none;margin:0px;padding:6px 0px 40px;position:absolute;width:50px;background-color:rgb(238, 238, 238);top:0px;left:0px;border-right:1px solid rgb(221, 221, 221);text-align:right;"><div><br/></div></div></div>

<p style="color:rgb(102, 102, 102);background:transparent;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;vertical-align:baseline;outline:0px;border:0px;box-sizing:border-box;margin:0px 0px 1.1em;font-size:15px;">中断优先级分组属于内核级别,在core_cm3.h中找到NVIC_Type结构体</p>

<div style="padding:5px 5px 5px 60px;font-family:&quot;Source Code Pro&quot;, monospace;font-size:14px;box-sizing:border-box;display:block;overflow-y:hidden;color:rgb(51, 51, 51);border:1px solid rgba(128, 128, 128, 0.0745098);border-radius:0px;font-weight:normal;outline:0px;vertical-align:baseline;background:transparent;background-color:rgba(128, 128, 128, 0.0470588);position:relative;overflow-x:auto;margin:0px 0px 1.1em;"><code style="margin:0px;font-family:&quot;Source Code Pro&quot;, monospace;box-sizing:border-box;display:block;background:rgb(255, 255, 255);vertical-align:baseline;outline:0px;border:0px;font-size:inherit;border-radius:0px;color:inherit;padding:0px;background-color:transparent;"><span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">/** @addtogroup CMSIS_CM3_NVIC CMSIS CM3 NVIC</span></code><div><span style="font-family: &quot;Microsoft YaHei&quot;;"><span style="color: rgb(136, 0, 0);"><span style="background-color: transparent;">  memory mapped structure for Nested Vectored Interrupt Controller (NVIC)</span></span></span></div><code style="margin:0px;font-family:&quot;Source Code Pro&quot;, monospace;box-sizing:border-box;display:block;background:rgb(255, 255, 255);vertical-align:baseline;outline:0px;border:0px;font-size:inherit;border-radius:0px;color:inherit;padding:0px;background-color:transparent;"><span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">  @{<br/> */</span><br/>typedef struct<br/>{<br/>  __IO uint32_t ISER<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 136, 0);">[8]</span>;       <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">/*!&lt; Offset: 0x000  中断使能寄存器组 */</span><br/>       uint32_t RESERVED0<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 136, 0);">[24]</span>;<br/>  __IO uint32_t ICER<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 136, 0);">[8]</span>;       <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">/*!&lt; Offset: 0x080  中断失能寄存器组 */</span><br/>       uint32_t RSERVED1<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 136, 0);">[24]</span>;<br/>  __IO uint32_t ISPR<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 136, 0);">[8]</span>;       <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">/*!&lt; Offset: 0x100  中断挂起寄存器组 */</span><br/>       uint32_t RESERVED2<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 136, 0);">[24]</span>;<br/>  __IO uint32_t ICPR<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 136, 0);">[8]</span>;       <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">/*!&lt; Offset: 0x180  中断解挂寄存器组 */</span><br/>       uint32_t RESERVED3<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 136, 0);">[24]</span>;<br/>  __IO uint32_t IABR<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 136, 0);">[8]</span>;       <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">/*!&lt; Offset: 0x200  中断激活标志位寄存器组 */</span><br/>       uint32_t RESERVED4<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 136, 0);">[56]</span>;<br/>  __IO uint8_t  IP<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 136, 0);">[240]</span>;       <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">/*!&lt; Offset: 0x300  中断优先级控制的寄存器组(8Bit wide) */</span><br/>       uint32_t RESERVED5<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 136, 0);">[644]</span>;<br/>  __O  uint32_t STIR;          <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">/*!&lt; Offset: 0xE00  Software Trigger Interrupt Register     */</span><br/>}  NVIC_Type;</code><div style="vertical-align:baseline;box-sizing:border-box;background:transparent;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;font-size:100%;border:0px;outline:0px;list-style:none;margin:0px;padding:6px 0px 40px;position:absolute;width:50px;background-color:rgb(238, 238, 238);top:0px;left:0px;border-right:1px solid rgb(221, 221, 221);text-align:right;"><div><br/></div></div></div>



<p style="color:rgb(102, 102, 102);background:transparent;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;vertical-align:baseline;outline:0px;border:0px;box-sizing:border-box;margin:0px 0px 1.1em;font-size:15px;"><strong style="font-weight:bold;margin:0px;padding:0px;border:0px;outline:0px;vertical-align:baseline;background:transparent;box-sizing:border-box;font-size:16px;">1,中断优先级控制的寄存器组 IP[240]</strong></p>

<p style="color:rgb(102, 102, 102);background:transparent;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;vertical-align:baseline;outline:0px;border:0px;box-sizing:border-box;margin:0px 0px 1.1em;font-size:15px;">　IP[240]寄存器组,对于每个中断都有一个IP寄存器,共240个8位寄存器</p>

<pre style="word-break:break-all;font-family:&quot;Source Code Pro&quot;, monospace;white-space:pre-wrap;box-sizing:border-box;display:block;padding:10px;margin:0px 0px 10.5px;color:rgb(51, 51, 51);font-size:14px;word-wrap:break-word;border:1px solid rgba(128, 128, 128, 0.0745098);border-radius:0px;font-weight:normal;outline:0px;vertical-align:baseline;background:transparent;background-color:rgba(128, 128, 128, 0.0470588);"><code style="border-radius:0px;font-family:&quot;Source Code Pro&quot;, monospace;box-sizing:border-box;background:transparent;vertical-align:baseline;outline:0px;border:0px;margin:0px;word-break:break-word;font-size:inherit;background-color:transparent;color:inherit;padding:0px;word-wrap:normal;white-space:pre-wrap;">CM3内核最多有240个可屏蔽中断,所以有240个8位寄存器来配置240个中断的优先级
STM32F10x系列共60个可屏蔽中断,使用IP[59]-IP[0]
每个IP寄存器的高4位用于设置抢占和响应优先级.低4位没有用到
</code></pre>

<p style="color:rgb(102, 102, 102);background:transparent;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;vertical-align:baseline;outline:0px;border:0px;box-sizing:border-box;margin:0px 0px 1.1em;font-size:15px;">通过NVIC_Init()函数设置抢占和响应优先级 <br style="box-sizing:border-box;"/>
在misc.h中找到NVIC_Init()函数源码:</p>

<div style="padding:5px 5px 5px 60px;font-family:&quot;Source Code Pro&quot;, monospace;font-size:14px;box-sizing:border-box;display:block;overflow-y:hidden;color:rgb(51, 51, 51);border:1px solid rgba(128, 128, 128, 0.0745098);border-radius:0px;font-weight:normal;outline:0px;vertical-align:baseline;background:transparent;background-color:rgba(128, 128, 128, 0.0470588);position:relative;overflow-x:auto;margin:0px 0px 1.1em;"><code style="margin:0px;font-family:&quot;Source Code Pro&quot;, monospace;box-sizing:border-box;display:block;background:rgb(255, 255, 255);vertical-align:baseline;outline:0px;border:0px;font-size:inherit;border-radius:0px;color:inherit;padding:0px;background-color:transparent;">/**<br/>  * @brief  <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">Initializes</span> the <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">NVIC</span> peripheral according to the specified<br/>  *         parameters <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 136);">in</span> the <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">NVIC_InitStruct</span>.<br/>  * @param  <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">NVIC_InitStruct</span>: pointer to a <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">NVIC_InitTypeDef</span> structure that contains<br/>  *         the configuration information for the specified <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">NVIC</span> peripheral.<br/>  * @retval <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">None</span><br/>  */<br/><span style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;border:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;box-sizing:border-box;">void</span> <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">NVIC_Init</span>(<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">NVIC_InitTypeDef</span>* <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">NVIC_InitStruct</span>)<br/>{<br/>  uint32_t tmppriority = <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">0x00</span>, tmppre = <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">0x00</span>, tmpsub = <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">0x0F</span>;<br/><br/>  /* <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">Check</span> the parameters */<br/>  assert_param(<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">IS_FUNCTIONAL_STATE</span>(<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">NVIC_InitStruct</span>-&gt;<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">NVIC_IRQChannelCmd</span>));<br/>  assert_param(<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">IS_NVIC_PREEMPTION_PRIORITY</span>(<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">NVIC_InitStruct</span>-&gt;<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">NVIC_IRQChannelPreemptionPriority</span>));<br/>  assert_param(<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">IS_NVIC_SUB_PRIORITY</span>(<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">NVIC_InitStruct</span>-&gt;<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">NVIC_IRQChannelSubPriority</span>));<br/><br/>  <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 136);">if</span> (<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">NVIC_InitStruct</span>-&gt;<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">NVIC_IRQChannelCmd</span> != <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">DISABLE</span>)<br/>  {<br/>    /* <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">Compute</span> the <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">Corresponding</span> <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">IRQ</span> <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">Priority</span> <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">--------------------------------*/</span><br/>    tmppriority = (<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">0x700</span> - ((<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">SCB</span>-&gt;<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">AIRCR</span>) &amp; (uint32_t)<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">0x700</span>))&gt;&gt; <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">0x08</span>;<br/>    tmppre = (<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">0x4</span> - tmppriority);<br/>    tmpsub = tmpsub &gt;&gt; tmppriority;<br/><br/>    tmppriority = (uint32_t)<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">NVIC_InitStruct</span>-&gt;<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">NVIC_IRQChannelPreemptionPriority</span> &lt;&lt; tmppre;<br/>    tmppriority |=  <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">NVIC_InitStruct</span>-&gt;<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">NVIC_IRQChannelSubPriority</span> &amp; tmpsub;<br/>    tmppriority = tmppriority &lt;&lt; <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">0x04</span>;<br/><br/>    <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">NVIC</span>-&gt;<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">IP</span>[<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">NVIC_InitStruct</span>-&gt;<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">NVIC_IRQChannel</span>] = tmppriority;<br/><br/>    /* <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">Enable</span> the <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">Selected</span> <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">IRQ</span> <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">Channels</span> <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">--------------------------------------*/</span><br/>    <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">NVIC</span>-&gt;<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">ISER</span>[<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">NVIC_InitStruct</span>-&gt;<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">NVIC_IRQChannel</span> &gt;&gt; <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">0x05</span>] =<br/>      (uint32_t)<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">0x01</span> &lt;&lt; (<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">NVIC_InitStruct</span>-&gt;<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">NVIC_IRQChannel</span> &amp; (uint8_t)<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">0x1F</span>);<br/>  }<br/>  <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 136);">else</span><br/>  {<br/>    /* <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">Disable</span> the <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">Selected</span> <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">IRQ</span> <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">Channels</span> <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">-------------------------------------*/</span><br/>    <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">NVIC</span>-&gt;<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">ICER</span>[<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">NVIC_InitStruct</span>-&gt;<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">NVIC_IRQChannel</span> &gt;&gt; <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">0x05</span>] =<br/>      (uint32_t)<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">0x01</span> &lt;&lt; (<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">NVIC_InitStruct</span>-&gt;<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);">NVIC_IRQChannel</span> &amp; (uint8_t)<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">0x1F</span>);<br/>  }<br/>}</code><div style="vertical-align:baseline;box-sizing:border-box;background:transparent;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;font-size:100%;border:0px;outline:0px;list-style:none;margin:0px;padding:6px 0px 40px;position:absolute;width:50px;background-color:rgb(238, 238, 238);top:0px;left:0px;border-right:1px solid rgb(221, 221, 221);text-align:right;"><div><br/></div></div></div>

<p style="color:rgb(102, 102, 102);background:transparent;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;vertical-align:baseline;outline:0px;border:0px;box-sizing:border-box;margin:0px 0px 1.1em;font-size:15px;">参数NVIC_InitTypeDef*结构体指针,位于misc.h</p>



<div style="padding:5px 5px 5px 60px;font-family:&quot;Source Code Pro&quot;, monospace;font-size:14px;box-sizing:border-box;display:block;overflow-y:hidden;color:rgb(51, 51, 51);border:1px solid rgba(128, 128, 128, 0.0745098);border-radius:0px;font-weight:normal;outline:0px;vertical-align:baseline;background:transparent;background-color:rgba(128, 128, 128, 0.0470588);position:relative;overflow-x:auto;margin:0px 0px 1.1em;"><code style="margin:0px;font-family:&quot;Source Code Pro&quot;, monospace;box-sizing:border-box;display:block;background:rgb(255, 255, 255);vertical-align:baseline;outline:0px;border:0px;font-size:inherit;border-radius:0px;color:inherit;padding:0px;background-color:transparent;"><span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 136);">typedef</span> <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 136);">struct</span><br/><br/>{<br/><br/>  uint8_t NVIC_IRQChannel; <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">//设置中断通道</span></code><div><br/></div><div><span style="color: inherit;"><span style="background-color: transparent;"><span style="font-size: inherit;">  uint8_t NVIC_IRQChannelPreemptionPriority;</span></span></span><span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);"><span style="background-color: transparent;">//设置抢占优先级</span></span></div><div><code style="margin:0px;font-family:&quot;Source Code Pro&quot;, monospace;box-sizing:border-box;display:block;background:rgb(255, 255, 255);vertical-align:baseline;outline:0px;border:0px;font-size:inherit;border-radius:0px;color:inherit;padding:0px;background-color:transparent;"><br/></code></div><div><span style="color: inherit;"><span style="background-color: transparent;"><span style="font-size: inherit;">  uint8_t NVIC_IRQChannelSubPriority; </span></span></span><span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);"><span style="background-color: transparent;">//设置响应优先级</span></span></div><div><code style="margin:0px;font-family:&quot;Source Code Pro&quot;, monospace;box-sizing:border-box;display:block;background:rgb(255, 255, 255);vertical-align:baseline;outline:0px;border:0px;font-size:inherit;border-radius:0px;color:inherit;padding:0px;background-color:transparent;"><br/></code></div><div><span style="color: inherit;"><span style="background-color: transparent;"><span style="font-size: inherit;">  FunctionalState NVIC_IRQChannelCmd; </span></span></span><span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);"><span style="background-color: transparent;">//中断使能（ENABLE 或者DISABLE）</span></span></div><code style="margin:0px;font-family:&quot;Source Code Pro&quot;, monospace;box-sizing:border-box;display:block;background:rgb(255, 255, 255);vertical-align:baseline;outline:0px;border:0px;font-size:inherit;border-radius:0px;color:inherit;padding:0px;background-color:transparent;"><br/>} NVIC_InitTypeDef;</code><div style="vertical-align:baseline;box-sizing:border-box;background:transparent;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;font-size:100%;border:0px;outline:0px;list-style:none;margin:0px;padding:6px 0px 40px;position:absolute;width:50px;background-color:rgb(238, 238, 238);top:0px;left:0px;border-right:1px solid rgb(221, 221, 221);text-align:right;"><div><br/></div></div></div>



<div style="padding:5px 5px 5px 60px;font-family:&quot;Source Code Pro&quot;, monospace;font-size:14px;box-sizing:border-box;display:block;overflow-y:hidden;color:rgb(51, 51, 51);border:1px solid rgba(128, 128, 128, 0.0745098);border-radius:0px;font-weight:normal;outline:0px;vertical-align:baseline;background:transparent;background-color:rgba(128, 128, 128, 0.0470588);position:relative;overflow-x:auto;margin:0px 0px 1.1em;"><code style="margin:0px;font-family:&quot;Source Code Pro&quot;, monospace;box-sizing:border-box;display:block;background:rgb(255, 255, 255);vertical-align:baseline;outline:0px;border:0px;font-size:inherit;border-radius:0px;color:inherit;padding:0px;background-color:transparent;"><span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">/**<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);"> @addtogroup</span> STM32F10x_StdPeriph_Driver<br/>  * @{<br/>  */</span><br/><br/><span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">/**<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);"> @addtogroup</span> MISC<br/>  * @{<br/>  */</span><br/><br/><span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">/**<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);"> @defgroup</span> MISC_Exported_Types<br/>  * @{<br/>  */</span><br/><br/><span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">/**<br/>  *<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(102, 0, 102);"> @brief</span>  NVIC Init Structure definition<br/>  */</span><br/><br/>typedef struct<br/>{<br/>  uint8_t NVIC_IRQChannel;                    <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">/*!&lt; Specifies the IRQ channel to be enabled or disabled.<br/>                                                   This parameter can be a value of @ref IRQn_Type<br/>                                                   (For the complete STM32 Devices IRQ Channels list, please<br/>                                                    refer to stm32f10x.h file) */</span><br/>                                                  <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">//通道</span><br/>  uint8_t NVIC_IRQChannelPreemptionPriority;  <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">/*!&lt; Specifies the pre-emption priority for the IRQ channel<br/>                                                   specified in NVIC_IRQChannel. This parameter can be a value<br/>                                                   between 0 and 15 as described in the table @ref NVIC_Priority_Table */</span><br/>                                                  <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">//抢占优先级</span><br/>  uint8_t NVIC_IRQChannelSubPriority;         <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">/*!&lt; Specifies the subpriority level for the IRQ channel specified<br/>                                                   in NVIC_IRQChannel. This parameter can be a value<br/>                                                   between 0 and 15 as described in the table @ref NVIC_Priority_Table */</span><br/>                                                  <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">//响应优先级</span><br/>  FunctionalState NVIC_IRQChannelCmd;         <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">/*!&lt; Specifies whether the IRQ channel defined in NVIC_IRQChannel<br/>                                                   will be enabled or disabled.<br/>                                                   This parameter can be set either to ENABLE or DISABLE */</span><br/>                                                  <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">//使能</span><br/>} NVIC_InitTypeDef;</code><div style="vertical-align:baseline;box-sizing:border-box;background:transparent;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;font-size:100%;border:0px;outline:0px;list-style:none;margin:0px;padding:6px 0px 40px;position:absolute;width:50px;background-color:rgb(238, 238, 238);top:0px;left:0px;border-right:1px solid rgb(221, 221, 221);text-align:right;"><div><br/></div></div></div>

<hr style="border-image:initial;height:1px;background-color:rgb(238, 238, 238);width:100%;border:0px;border-top-color:rgba(128, 128, 128, 0.0980392);border-right-color:initial;border-left-color:initial;box-sizing:border-box;border-top-style:solid;border-bottom-color:initial;margin:2em 0px;border-left-style:initial;border-bottom-style:initial;border-right-style:initial;border-width:1px 0px 0px;"/>

<p style="color:rgb(102, 102, 102);background:transparent;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;vertical-align:baseline;outline:0px;border:0px;box-sizing:border-box;margin:0px 0px 1.1em;font-size:15px;"><strong style="font-weight:bold;margin:0px;padding:0px;border:0px;outline:0px;vertical-align:baseline;background:transparent;box-sizing:border-box;font-size:16px;">2,中断使能寄存器组 ISER[8]</strong></p>

<pre style="word-break:break-all;font-family:&quot;Source Code Pro&quot;, monospace;white-space:pre-wrap;box-sizing:border-box;display:block;padding:10px;margin:0px 0px 10.5px;color:rgb(51, 51, 51);font-size:14px;word-wrap:break-word;border:1px solid rgba(128, 128, 128, 0.0745098);border-radius:0px;font-weight:normal;outline:0px;vertical-align:baseline;background:transparent;background-color:rgba(128, 128, 128, 0.0470588);"><code style="border-radius:0px;font-family:&quot;Source Code Pro&quot;, monospace;box-sizing:border-box;background:transparent;vertical-align:baseline;outline:0px;border:0px;margin:0px;word-break:break-word;font-size:inherit;background-color:transparent;color:inherit;padding:0px;word-wrap:normal;white-space:pre-wrap;">ISER[8]寄存器组 : 8个32位寄存器,每个位控制一个中断的使能
STM32F10x有60个可屏蔽中断,所以只使用到了ISER[0]和 ISER[1]
ISER[0]的bit0-bit31对应中断0-31,ISER[1]的bit0-27对应中断32-59
</code></pre>

<hr style="border-image:initial;height:1px;background-color:rgb(238, 238, 238);width:100%;border:0px;border-top-color:rgba(128, 128, 128, 0.0980392);border-right-color:initial;border-left-color:initial;box-sizing:border-box;border-top-style:solid;border-bottom-color:initial;margin:2em 0px;border-left-style:initial;border-bottom-style:initial;border-right-style:initial;border-width:1px 0px 0px;"/>

<p style="color:rgb(102, 102, 102);background:transparent;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;vertical-align:baseline;outline:0px;border:0px;box-sizing:border-box;margin:0px 0px 1.1em;font-size:15px;"><strong style="font-weight:bold;margin:0px;padding:0px;border:0px;outline:0px;vertical-align:baseline;background:transparent;box-sizing:border-box;font-size:16px;">3,中断失能寄存器组 ICER[8]</strong></p>

<pre style="word-break:break-all;font-family:&quot;Source Code Pro&quot;, monospace;white-space:pre-wrap;box-sizing:border-box;display:block;padding:10px;margin:0px 0px 10.5px;color:rgb(51, 51, 51);font-size:14px;word-wrap:break-word;border:1px solid rgba(128, 128, 128, 0.0745098);border-radius:0px;font-weight:normal;outline:0px;vertical-align:baseline;background:transparent;background-color:rgba(128, 128, 128, 0.0470588);"><code style="border-radius:0px;font-family:&quot;Source Code Pro&quot;, monospace;box-sizing:border-box;background:transparent;vertical-align:baseline;outline:0px;border:0px;margin:0px;word-break:break-word;font-size:inherit;background-color:transparent;color:inherit;padding:0px;word-wrap:normal;white-space:pre-wrap;">ICER[8]寄存器组 : 8个32位寄存器,每个位控制一个中断的失能
STM32F10x有60个可屏蔽中断,所以只使用到了ICER[0]和 ICER[1]
ICER[0]的bit0-bit31对应中断0-31,ISER[1]的bit0-27对应中断32-59
</code></pre>

<hr style="border-image:initial;height:1px;background-color:rgb(238, 238, 238);width:100%;border:0px;border-top-color:rgba(128, 128, 128, 0.0980392);border-right-color:initial;border-left-color:initial;box-sizing:border-box;border-top-style:solid;border-bottom-color:initial;margin:2em 0px;border-left-style:initial;border-bottom-style:initial;border-right-style:initial;border-width:1px 0px 0px;"/>

<p style="color:rgb(102, 102, 102);background:transparent;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;vertical-align:baseline;outline:0px;border:0px;box-sizing:border-box;margin:0px 0px 1.1em;font-size:15px;"><strong style="font-weight:bold;margin:0px;padding:0px;border:0px;outline:0px;vertical-align:baseline;background:transparent;box-sizing:border-box;font-size:16px;">4,中断挂起控制寄存器组 ISPR[8]</strong> <br style="box-sizing:border-box;"/>
作用:挂起中断</p>

<div style="padding:5px 5px 5px 60px;font-family:&quot;Source Code Pro&quot;, monospace;font-size:14px;box-sizing:border-box;display:block;overflow-y:hidden;color:rgb(51, 51, 51);border:1px solid rgba(128, 128, 128, 0.0745098);border-radius:0px;font-weight:normal;outline:0px;vertical-align:baseline;background:transparent;background-color:rgba(128, 128, 128, 0.0470588);position:relative;overflow-x:auto;margin:0px 0px 1.1em;"><code style="margin:0px;font-family:&quot;Source Code Pro&quot;, monospace;box-sizing:border-box;display:block;background:rgb(255, 255, 255);vertical-align:baseline;outline:0px;border:0px;font-size:inherit;border-radius:0px;color:inherit;padding:0px;background-color:transparent;"><span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 136);">static</span> __INLINE uint32_t NVIC_GetPendingIRQ(IRQn_Type IRQn)<br/>{<br/>  <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">/* Return 1 if pending else 0 */</span><br/>  <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 136);">return</span>((uint32_t) ((NVIC-&gt;ISPR[(uint32_t)(IRQn) &gt;&gt; <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">5</span>] &amp; (<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">1</span> &lt;&lt; ((uint32_t)(IRQn) &amp; <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">0x1F</span>)))?<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">1</span>:<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">0</span>)); <br/>}<br/><br/><span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 136);">static</span> __INLINE <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 136);">void</span> NVIC_SetPendingIRQ(IRQn_Type IRQn)<br/>{<br/>  <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">/* set interrupt pending */</span><br/>  NVIC-&gt;ISPR[((uint32_t)(IRQn) &gt;&gt; <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">5</span>)] = (<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">1</span> &lt;&lt; ((uint32_t)(IRQn) &amp; <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">0x1F</span>));<br/>}</code><div style="vertical-align:baseline;box-sizing:border-box;background:transparent;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;font-size:100%;border:0px;outline:0px;list-style:none;margin:0px;padding:6px 0px 40px;position:absolute;width:50px;background-color:rgb(238, 238, 238);top:0px;left:0px;border-right:1px solid rgb(221, 221, 221);text-align:right;"><div><br/></div></div></div>

<hr style="border-image:initial;height:1px;background-color:rgb(238, 238, 238);width:100%;border:0px;border-top-color:rgba(128, 128, 128, 0.0980392);border-right-color:initial;border-left-color:initial;box-sizing:border-box;border-top-style:solid;border-bottom-color:initial;margin:2em 0px;border-left-style:initial;border-bottom-style:initial;border-right-style:initial;border-width:1px 0px 0px;"/>

<p style="color:rgb(102, 102, 102);background:transparent;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;vertical-align:baseline;outline:0px;border:0px;box-sizing:border-box;margin:0px 0px 1.1em;font-size:15px;"><strong style="font-weight:bold;margin:0px;padding:0px;border:0px;outline:0px;vertical-align:baseline;background:transparent;box-sizing:border-box;font-size:16px;">5,中断解挂控制寄存器组 ICPR[8]</strong> <br style="box-sizing:border-box;"/>
作用:用来解挂中断</p>

<div style="padding:5px 5px 5px 60px;font-family:&quot;Source Code Pro&quot;, monospace;font-size:14px;box-sizing:border-box;display:block;overflow-y:hidden;color:rgb(51, 51, 51);border:1px solid rgba(128, 128, 128, 0.0745098);border-radius:0px;font-weight:normal;outline:0px;vertical-align:baseline;background:transparent;background-color:rgba(128, 128, 128, 0.0470588);position:relative;overflow-x:auto;margin:0px 0px 1.1em;"><code style="margin:0px;font-family:&quot;Source Code Pro&quot;, monospace;box-sizing:border-box;display:block;background:rgb(255, 255, 255);vertical-align:baseline;outline:0px;border:0px;font-size:inherit;border-radius:0px;color:inherit;padding:0px;background-color:transparent;"><span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 136);">static</span> __INLINE <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 0, 136);">void</span> NVIC_ClearPendingIRQ(IRQn_Type IRQn)<br/>{<br/>  <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">/* Clear pending interrupt */</span><br/>  NVIC-&gt;ICPR[((uint32_t)(IRQn) &gt;&gt; <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">5</span>)] = (<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">1</span> &lt;&lt; ((uint32_t)(IRQn) &amp; <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">0x1F</span>)); <br/>}</code><div style="vertical-align:baseline;box-sizing:border-box;background:transparent;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;font-size:100%;border:0px;outline:0px;list-style:none;margin:0px;padding:6px 0px 40px;position:absolute;width:50px;background-color:rgb(238, 238, 238);top:0px;left:0px;border-right:1px solid rgb(221, 221, 221);text-align:right;"><div><br/></div></div></div>

<hr style="border-image:initial;height:1px;background-color:rgb(238, 238, 238);width:100%;border:0px;border-top-color:rgba(128, 128, 128, 0.0980392);border-right-color:initial;border-left-color:initial;box-sizing:border-box;border-top-style:solid;border-bottom-color:initial;margin:2em 0px;border-left-style:initial;border-bottom-style:initial;border-right-style:initial;border-width:1px 0px 0px;"/>

<p style="color:rgb(102, 102, 102);background:transparent;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;vertical-align:baseline;outline:0px;border:0px;box-sizing:border-box;margin:0px 0px 1.1em;font-size:15px;"><strong style="font-weight:bold;margin:0px;padding:0px;border:0px;outline:0px;vertical-align:baseline;background:transparent;box-sizing:border-box;font-size:16px;">6,中断激活标志位寄存器组: IABR[8]</strong></p>

<pre style="word-break:break-all;font-family:&quot;Source Code Pro&quot;, monospace;white-space:pre-wrap;box-sizing:border-box;display:block;padding:10px;margin:0px 0px 10.5px;color:rgb(51, 51, 51);font-size:14px;word-wrap:break-word;border:1px solid rgba(128, 128, 128, 0.0745098);border-radius:0px;font-weight:normal;outline:0px;vertical-align:baseline;background:transparent;background-color:rgba(128, 128, 128, 0.0470588);"><code style="border-radius:0px;font-family:&quot;Source Code Pro&quot;, monospace;box-sizing:border-box;background:transparent;vertical-align:baseline;outline:0px;border:0px;margin:0px;word-break:break-word;font-size:inherit;background-color:transparent;color:inherit;padding:0px;word-wrap:normal;white-space:pre-wrap;">IABR[8]寄存器组: 8个32位寄存器,每个位控制一个中断激活标志位
F10x只有60个可屏蔽中断,只用到了 IABR[0]  IABR[1]
IABR[0]的bit0-bit31对应中断0-31,IABR[1]的bit0-27对应中断32-59
作用:只读,通过它可以知道当前在执行的中断是哪一个,如果对应位为1,说明该中断正在执行
</code></pre>

<div style="padding:5px 5px 5px 60px;font-family:&quot;Source Code Pro&quot;, monospace;font-size:14px;box-sizing:border-box;display:block;overflow-y:hidden;color:rgb(51, 51, 51);border:1px solid rgba(128, 128, 128, 0.0745098);border-radius:0px;font-weight:normal;outline:0px;vertical-align:baseline;background:transparent;background-color:rgba(128, 128, 128, 0.0470588);position:relative;overflow-x:auto;margin:0px 0px 1.1em;"><code style="margin:0px;font-family:&quot;Source Code Pro&quot;, monospace;box-sizing:border-box;display:block;background:rgb(255, 255, 255);vertical-align:baseline;outline:0px;border:0px;font-size:inherit;border-radius:0px;color:inherit;padding:0px;background-color:transparent;"><span style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;border:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;box-sizing:border-box;">static</span> __INLINE uint32_t <span style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;border:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;box-sizing:border-box;">NVIC_GetActive(IRQn_Type IRQn)</span><br/>{<br/>  <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">/* Return 1 if active else 0 */</span><br/>  <span style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;border:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;box-sizing:border-box;">return((uint32_t)</span>((NVIC-&gt;IABR<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 136, 0);">[(uint32_t)(IRQn) &gt;&gt; 5]</span> &amp; (1 &lt;&lt; ((uint32_t)(IRQn) &amp; 0x1F)))?1<span style="margin:0px;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;border:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;box-sizing:border-box;">:<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">0</span>));</span> <br/>}</code><div style="vertical-align:baseline;box-sizing:border-box;background:transparent;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;font-size:100%;border:0px;outline:0px;list-style:none;margin:0px;padding:6px 0px 40px;position:absolute;width:50px;background-color:rgb(238, 238, 238);top:0px;left:0px;border-right:1px solid rgb(221, 221, 221);text-align:right;"><div><br/></div></div></div>

<hr style="border-image:initial;height:1px;background-color:rgb(238, 238, 238);width:100%;border:0px;border-top-color:rgba(128, 128, 128, 0.0980392);border-right-color:initial;border-left-color:initial;box-sizing:border-box;border-top-style:solid;border-bottom-color:initial;margin:2em 0px;border-left-style:initial;border-bottom-style:initial;border-right-style:initial;border-width:1px 0px 0px;"/>



<h1 style="color:rgb(102, 102, 102);background:transparent;vertical-align:baseline;font-family:&quot;Microsoft YaHei&quot;;outline:0px;font-size:28px;padding:0px;border:0px;box-sizing:border-box;font-weight:100;margin:0.8em 0px;">六,中断初始化和配置步骤</h1>

<p style="color:rgb(102, 102, 102);background:transparent;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;vertical-align:baseline;outline:0px;border:0px;box-sizing:border-box;margin:0px 0px 1.1em;font-size:15px;"><strong style="font-weight:bold;margin:0px;padding:0px;border:0px;outline:0px;vertical-align:baseline;background:transparent;box-sizing:border-box;font-size:16px;">中断初始化步骤</strong></p>

<pre style="word-break:break-all;font-family:&quot;Source Code Pro&quot;, monospace;white-space:pre-wrap;box-sizing:border-box;display:block;padding:10px;margin:0px 0px 10.5px;color:rgb(51, 51, 51);font-size:14px;word-wrap:break-word;border:1px solid rgba(128, 128, 128, 0.0745098);border-radius:0px;font-weight:normal;outline:0px;vertical-align:baseline;background:transparent;background-color:rgba(128, 128, 128, 0.0470588);"><code style="border-radius:0px;font-family:&quot;Source Code Pro&quot;, monospace;box-sizing:border-box;background:transparent;vertical-align:baseline;outline:0px;border:0px;margin:0px;word-break:break-word;font-size:inherit;background-color:transparent;color:inherit;padding:0px;word-wrap:normal;white-space:pre-wrap;">1,定义结构体变量
2,配置中断
     配置哪个中断
     配置抢占优先级
     配置响应优先级
     配置使能
3,地址赋值给初始化函数
</code></pre>

<p style="color:rgb(102, 102, 102);background:transparent;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;vertical-align:baseline;outline:0px;border:0px;box-sizing:border-box;margin:0px 0px 1.1em;font-size:15px;"><strong style="font-weight:bold;margin:0px;padding:0px;border:0px;outline:0px;vertical-align:baseline;background:transparent;box-sizing:border-box;font-size:16px;">中断优先级设置步骤</strong></p>

<pre style="word-break:break-all;font-family:&quot;Source Code Pro&quot;, monospace;white-space:pre-wrap;box-sizing:border-box;display:block;padding:10px;margin:0px 0px 10.5px;color:rgb(51, 51, 51);font-size:14px;word-wrap:break-word;border:1px solid rgba(128, 128, 128, 0.0745098);border-radius:0px;font-weight:normal;outline:0px;vertical-align:baseline;background:transparent;background-color:rgba(128, 128, 128, 0.0470588);"><code style="border-radius:0px;font-family:&quot;Source Code Pro&quot;, monospace;box-sizing:border-box;background:transparent;vertical-align:baseline;outline:0px;border:0px;margin:0px;word-break:break-word;font-size:inherit;background-color:transparent;color:inherit;padding:0px;word-wrap:normal;white-space:pre-wrap;">系统运行后,先设置中断优先级分组
     调用函数: void NVIC_PriorityGroupConfig(uint32_t NVIC_PriorityGroup);
系统执行过程中,只设置一个中断分组

针对每个中断,设置对应的抢占优先级和响应优先级
     调用函数:`void NVIC_Init(NVIC_InitTypeDef* NVIC_InitStruct);`
如果需要挂起/解挂,查看中断当前激活状态,分别调用相关函数即可
</code></pre>

<hr style="border-image:initial;height:1px;background-color:rgb(238, 238, 238);width:100%;border:0px;border-top-color:rgba(128, 128, 128, 0.0980392);border-right-color:initial;border-left-color:initial;box-sizing:border-box;border-top-style:solid;border-bottom-color:initial;margin:2em 0px;border-left-style:initial;border-bottom-style:initial;border-right-style:initial;border-width:1px 0px 0px;"/>

<h1 style="color:rgb(102, 102, 102);background:transparent;vertical-align:baseline;font-family:&quot;Microsoft YaHei&quot;;outline:0px;font-size:28px;padding:0px;border:0px;box-sizing:border-box;font-weight:100;margin:0.8em 0px;">七,配置中断代码:</h1>



<div style="padding:5px 5px 5px 60px;font-family:&quot;Source Code Pro&quot;, monospace;font-size:14px;box-sizing:border-box;display:block;overflow-y:hidden;color:rgb(51, 51, 51);border:1px solid rgba(128, 128, 128, 0.0745098);border-radius:0px;font-weight:normal;outline:0px;vertical-align:baseline;background:transparent;background-color:rgba(128, 128, 128, 0.0470588);position:relative;overflow-x:auto;margin:0px 0px 1.1em;"><code style="margin:0px;font-family:&quot;Source Code Pro&quot;, monospace;box-sizing:border-box;display:block;background:rgb(255, 255, 255);vertical-align:baseline;outline:0px;border:0px;font-size:inherit;border-radius:0px;color:inherit;padding:0px;background-color:transparent;">NVIC_InitTypeDef   NVIC_InitStructure;                  <br/><br/>NVIC_InitStructure.NVIC_IRQChannel = USART1_IRQn;          <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">//串口1中断</span><br/><br/>NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority=<span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">1</span> ;   <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">// 抢占优先级为1</span><br/><br/>NVIC_InitStructure.NVIC_IRQChannelSubPriority = <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(0, 102, 102);">2</span>;         <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">// 子优先级(响应)为2</span><br/><br/>NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;            <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">// IRQ通道使能</span><br/><br/>NVIC_Init(&amp;NVIC_InitStructure);                            <span style="border:0px;box-sizing:border-box;padding:0px;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;margin:0px;outline:0px;font-size:100%;vertical-align:baseline;background:transparent;color:rgb(136, 0, 0);">//根据上面指定的参数初始化NVIC寄存器</span></code><div style="vertical-align:baseline;box-sizing:border-box;background:transparent;font-family:&quot;Microsoft YaHei&quot;;font-weight:normal;font-size:100%;border:0px;outline:0px;list-style:none;margin:0px;padding:6px 0px 40px;position:absolute;width:50px;background-color:rgb(238, 238, 238);top:0px;left:0px;border-right:1px solid rgb(221, 221, 221);text-align:right;"><div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div><br/></div></span>
</div></body></html> 