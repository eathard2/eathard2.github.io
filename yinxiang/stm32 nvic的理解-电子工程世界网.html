<html>
<head>
  <title>stm32 nvic的理解-电子工程世界网</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/304720 (zh-CN, DDL); Windows/6.1.7601 Service Pack 1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="530"/>
<h1>stm32 nvic的理解-电子工程世界网</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2017/4/10 0:28</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://m.eeworld.com.cn/ic_article/268/27435.html"><i>http://m.eeworld.com.cn/ic_article/268/27435.html</i></a></td></tr>
</table>
</div>
<br/>

<div><span><div style="-evernote-webclip:true"><br/><div style="font-size: 16px; display: inline-block;"><div style="font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;font-size:inherit;line-height:inherit;font-family:inherit;vertical-align:baseline;outline:none;box-sizing:border-box;"><div style="line-height:1.231;font-style:normal;font-weight:normal;font-stretch:normal;font-size:13px;font-variant:normal;font-family:arial;vertical-align:baseline;outline:none;box-sizing:border-box;color:rgb(51, 51, 51);"><div style="font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;font-size:inherit;line-height:inherit;font-family:inherit;vertical-align:baseline;outline:none;box-sizing:border-box;"><div style="line-height:inherit;font-style:inherit;font-weight:inherit;font-stretch:inherit;font-size:inherit;font-variant:inherit;font-family:inherit;vertical-align:baseline;outline:none;box-sizing:border-box;background-color:rgb(248, 248, 248);">
<h2 style="font-stretch:inherit;margin:0px;border:0px;font-style:inherit;font-variant:inherit;font-weight:inherit;padding:0px;outline:none;line-height:inherit;font-family:inherit;vertical-align:baseline;box-sizing:border-box;font-size:20px;">stm32 nvic的理解</h2>
<div style="line-height:inherit;margin:0px;border:0px;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;font-size:inherit;padding:0px;font-family:inherit;vertical-align:baseline;outline:none;box-sizing:border-box;zoom:1;color:rgb(136, 136, 136);margin-top:6px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;font-size:inherit;line-height:inherit;font-family:inherit;color:rgb(136, 136, 136);display:table;"></span>
<span style="font-stretch:inherit;margin:0px;border:0px;font-style:inherit;font-variant:inherit;font-weight:inherit;padding:0px;font-size:inherit;line-height:inherit;font-family:inherit;vertical-align:baseline;outline:none;box-sizing:border-box;">eefocus</span>
<span style="font-stretch:inherit;margin:0px;border:0px;font-style:inherit;font-variant:inherit;font-weight:inherit;padding:0px;font-size:inherit;line-height:inherit;font-family:inherit;vertical-align:baseline;outline:none;box-sizing:border-box;">2016-07-11</span>
<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;font-size:inherit;line-height:inherit;font-family:inherit;color:rgb(136, 136, 136);display:table;clear:both;"></span></div>
<div style="line-height:inherit;margin:0px;border:0px;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;font-size:inherit;padding:0px;font-family:inherit;vertical-align:baseline;outline:none;box-sizing:border-box;zoom:1;color:rgb(136, 136, 136);margin-top:6px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;font-size:inherit;line-height:inherit;font-family:inherit;color:rgb(136, 136, 136);display:table;"></span>
<span style="font-stretch:inherit;margin:0px;border:0px;font-style:inherit;font-variant:inherit;font-weight:inherit;padding:0px;font-size:inherit;line-height:inherit;font-family:inherit;vertical-align:baseline;outline:none;box-sizing:border-box;">tag:
<a href="http://m.eeworld.com.cn/tags/STM32.html" style="line-height:inherit;margin:0px;border:0px;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;font-size:100%;padding:0px;font-family:inherit;vertical-align:baseline;outline:none;box-sizing:border-box;text-decoration:underline;color:rgb(36, 137, 206);margin-left:2%;" target="_self">STM32</a>
<a href="http://m.eeworld.com.cn/tags/NVIC.html" style="line-height:inherit;margin:0px;border:0px;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;font-size:100%;padding:0px;font-family:inherit;vertical-align:baseline;outline:none;box-sizing:border-box;text-decoration:underline;color:rgb(36, 137, 206);margin-left:2%;" target="_self">NVIC</a>
</span>
<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;font-size:inherit;line-height:inherit;font-family:inherit;color:rgb(136, 136, 136);display:table;clear:both;"></span></div>
<div style="font-size:16px;margin:0px;border:0px;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;padding:0px;box-sizing:border-box;font-family:inherit;vertical-align:baseline;outline:none;line-height:26px;margin-top:10px;">
因为stm32有43个中断源，当同时用到多个中断时，就要指定其中断的优先级了。
<p style="font-stretch:inherit;box-sizing:border-box;border:0px;font-style:inherit;font-variant:inherit;font-weight:inherit;padding:0px;font-size:inherit;line-height:inherit;font-family:inherit;vertical-align:baseline;outline:none;margin:4px 0px 6px;"> nvic即是中断向量的控制！由SCB-&gt;AIRCR寄存器控制，SCB-&gt;AIRCR中目前只用到4位，也就是最高能有16级中断嵌套，如果全使用的话可以达到256级</p>
<p style="font-stretch:inherit;box-sizing:border-box;border:0px;font-style:inherit;font-variant:inherit;font-weight:inherit;padding:0px;font-size:inherit;line-height:inherit;font-family:inherit;vertical-align:baseline;outline:none;margin:4px 0px 6px;"> （1）；选用优先级分组(实际就是选几位用于主优先级几位用于辅优先级)</p>
<p style="font-stretch:inherit;box-sizing:border-box;border:0px;font-style:inherit;font-variant:inherit;font-weight:inherit;padding:0px;font-size:inherit;line-height:inherit;font-family:inherit;vertical-align:baseline;outline:none;margin:4px 0px 6px;">group0:选0位用于主优先级，4位用于辅优先级。</p>
<p style="font-stretch:inherit;box-sizing:border-box;border:0px;font-style:inherit;font-variant:inherit;font-weight:inherit;padding:0px;font-size:inherit;line-height:inherit;font-family:inherit;vertical-align:baseline;outline:none;margin:4px 0px 6px;">group1:选1位用于主优先级，3位用于辅优先级。</p>
<p style="font-stretch:inherit;box-sizing:border-box;border:0px;font-style:inherit;font-variant:inherit;font-weight:inherit;padding:0px;font-size:inherit;line-height:inherit;font-family:inherit;vertical-align:baseline;outline:none;margin:4px 0px 6px;">group2:选2位用于主优先级，2位用于辅优先级。</p>
<p style="font-stretch:inherit;box-sizing:border-box;border:0px;font-style:inherit;font-variant:inherit;font-weight:inherit;padding:0px;font-size:inherit;line-height:inherit;font-family:inherit;vertical-align:baseline;outline:none;margin:4px 0px 6px;">group3:选3位用于主优先级，1位用于辅优先级。</p>
<p style="font-stretch:inherit;box-sizing:border-box;border:0px;font-style:inherit;font-variant:inherit;font-weight:inherit;padding:0px;font-size:inherit;line-height:inherit;font-family:inherit;vertical-align:baseline;outline:none;margin:4px 0px 6px;">group4:选4位用于主优先级，0位用于辅优先级。</p>
<p style="font-stretch:inherit;box-sizing:border-box;border:0px;font-style:inherit;font-variant:inherit;font-weight:inherit;padding:0px;font-size:inherit;line-height:inherit;font-family:inherit;vertical-align:baseline;outline:none;margin:4px 0px 6px;"> </p>
<p style="font-stretch:inherit;box-sizing:border-box;border:0px;font-style:inherit;font-variant:inherit;font-weight:inherit;padding:0px;font-size:inherit;line-height:inherit;font-family:inherit;vertical-align:baseline;outline:none;margin:4px 0px 6px;">（2）这样打个比方不恰当的比方吧，如果把一个中断比作一个人，则他的国籍就是主优先级，省籍就是辅优先级。主优先级高的可以</p>
<p style="font-stretch:inherit;box-sizing:border-box;border:0px;font-style:inherit;font-variant:inherit;font-weight:inherit;padding:0px;font-size:inherit;line-height:inherit;font-family:inherit;vertical-align:baseline;outline:none;margin:4px 0px 6px;">打断主优先级低的中断（如主优先级0（我们叫他美国）的中断高于主优先级2（我们叫他伊拉克）的中断，则主优先级为0的中断（美国人）可以</p>
<p style="font-stretch:inherit;box-sizing:border-box;border:0px;font-style:inherit;font-variant:inherit;font-weight:inherit;padding:0px;font-size:inherit;line-height:inherit;font-family:inherit;vertical-align:baseline;outline:none;margin:4px 0px 6px;">打断主优先级为2的中断（伊拉克人））。而对于辅优先级，我们称之为省籍，比如两个人都是中国人（主优先级），一个是北京的（假设辅优先级为0</p>
<p style="font-stretch:inherit;box-sizing:border-box;border:0px;font-style:inherit;font-variant:inherit;font-weight:inherit;padding:0px;font-size:inherit;line-height:inherit;font-family:inherit;vertical-align:baseline;outline:none;margin:4px 0px 6px;">，高），一个是山西的（省籍为辅优先级，假设为2，低），则北京人不能去打断山西人做的事，但是，如果有同一个机会，则应该先给北京人，即</p>
<p style="font-stretch:inherit;box-sizing:border-box;border:0px;font-style:inherit;font-variant:inherit;font-weight:inherit;padding:0px;font-size:inherit;line-height:inherit;font-family:inherit;vertical-align:baseline;outline:none;margin:4px 0px 6px;">当同时要响应两个这两个主优先级一样的中断时，辅助优先级高的先响应。如果两个中断的主，辅优先级都一样时，则在中断向量表中靠前的</p>
<p style="font-stretch:inherit;box-sizing:border-box;border:0px;font-style:inherit;font-variant:inherit;font-weight:inherit;padding:0px;font-size:inherit;line-height:inherit;font-family:inherit;vertical-align:baseline;outline:none;margin:4px 0px 6px;">先响应。</p>
<p style="font-stretch:inherit;box-sizing:border-box;border:0px;font-style:inherit;font-variant:inherit;font-weight:inherit;padding:0px;font-size:inherit;line-height:inherit;font-family:inherit;vertical-align:baseline;outline:none;margin:4px 0px 6px;"> （3）group4可以最多执行15个嵌套和一个中断，group3可以最多执行7个嵌套和一个中断，依次类推。</p>
<p style="font-stretch:inherit;box-sizing:border-box;border:0px;font-style:inherit;font-variant:inherit;font-weight:inherit;padding:0px;font-size:inherit;line-height:inherit;font-family:inherit;vertical-align:baseline;outline:none;margin:4px 0px 6px;"> 所以，</p>
<p style="font-stretch:inherit;box-sizing:border-box;border:0px;font-style:inherit;font-variant:inherit;font-weight:inherit;padding:0px;font-size:inherit;line-height:inherit;font-family:inherit;vertical-align:baseline;outline:none;margin:4px 0px 6px;">group4可以指定主优先级的范围为0——15，辅优先级的范围为0</p>
<p style="font-stretch:inherit;box-sizing:border-box;border:0px;font-style:inherit;font-variant:inherit;font-weight:inherit;padding:0px;font-size:inherit;line-height:inherit;font-family:inherit;vertical-align:baseline;outline:none;margin:4px 0px 6px;">group3可以指定主优先级的范围0———7，辅优先级的范围为0----1</p>
<p style="font-stretch:inherit;box-sizing:border-box;border:0px;font-style:inherit;font-variant:inherit;font-weight:inherit;padding:0px;font-size:inherit;line-height:inherit;font-family:inherit;vertical-align:baseline;outline:none;margin:4px 0px 6px;">group2可以指定主优先级的范围0———3，辅优先级的范围为0----3</p>
<p style="font-stretch:inherit;box-sizing:border-box;border:0px;font-style:inherit;font-variant:inherit;font-weight:inherit;padding:0px;font-size:inherit;line-height:inherit;font-family:inherit;vertical-align:baseline;outline:none;margin:4px 0px 6px;">group1可以指定主优先级的范围0———1，辅优先级的范围为0----7</p>
<p style="font-stretch:inherit;box-sizing:border-box;border:0px;font-style:inherit;font-variant:inherit;font-weight:inherit;padding:0px;font-size:inherit;line-height:inherit;font-family:inherit;vertical-align:baseline;outline:none;margin:4px 0px 6px;">group1可以指定主优先级的范围0，辅优先级的范围为0----15</p>
<p style="font-stretch:inherit;box-sizing:border-box;border:0px;font-style:inherit;font-variant:inherit;font-weight:inherit;padding:0px;font-size:inherit;line-height:inherit;font-family:inherit;vertical-align:baseline;outline:none;margin:4px 0px 6px;">所谓嵌套，即是主优先级高的可以打断主优先级低的中断的执行（嵌套）。</p>
</div>
</div></div></div></div></div><br/></div></span>
</div></body></html> 