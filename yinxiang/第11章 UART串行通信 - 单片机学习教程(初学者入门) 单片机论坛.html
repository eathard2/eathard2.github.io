<html>
<head>
  <title>第11章 UART串行通信 - 单片机学习教程(初学者入门) 单片机论坛</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/304720 (zh-CN, DDL); Windows/6.1.7601 Service Pack 1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="739"/>
<h1>第11章 UART串行通信 - 单片机学习教程(初学者入门) 单片机论坛</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2017/4/13 15:32</i></td></tr>
<tr><td><b>更新时间：</b></td><td><i>2017/5/1 10:17</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://www.51hei.com/bbs/dpj-22296-1.html"><i>http://www.51hei.com/bbs/dpj-22296-1.html</i></a></td></tr>
</table>
</div>
<br/>

<div>
<span><div style="-evernote-webclip:true"><br/><div style="font-size: 16px; display: inline-block;"><div style="word-wrap:break-word;"><div style="word-wrap:break-word;background:url(&quot;../../static/image/common/background.png&quot;) 0px 0px repeat-x rgb(255, 255, 255);font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:12px;font-family:Tahoma, &quot;Microsoft Yahei&quot;, Simsun;color:rgb(37, 37, 37);"><div style="word-wrap:break-word;"><div style="word-wrap:break-word;zoom:1;"><div style="word-wrap:break-word;background:rgb(255, 255, 255);"><div style="word-wrap:break-word;"><table style="font-size:inherit;font-weight:inherit;font-style:inherit;font-variant:inherit;word-wrap:break-word;empty-cells:show;"><tbody style="word-wrap:break-word;"><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;vertical-align:top;"><div style="word-wrap:break-word;overflow:hidden;margin-bottom:10px;padding:10px 0px;height:16px;border-bottom:1px dashed rgb(205, 205, 205);"><div style="word-wrap:break-word;float:right;margin-left:5px;"><span style="word-wrap:break-word;float:left;cursor:pointer;margin-right:4px;padding:0px;height:16px;">电梯直达</span> <a href="#" style="word-wrap:break-word;float:left;color:rgb(51, 51, 51);text-decoration:none;" title="跳转到指定楼层"><img src="第11章 UART串行通信 - 单片机学习教程(初学者入门) 单片机论坛_files/Image.png" type="image/png" alt="跳转到指定楼层" height="16" style="word-wrap: break-word; border: none; vertical-align: middle; height: auto;" width="16"/></a></div><strong style="word-wrap:break-word;"><a href="http://www.51hei.com/bbs/dpj-22296-1.html" style="word-wrap:break-word;color:rgb(51, 51, 51);text-decoration:none;float:right;margin-top:-6px;padding:4px 6px;border:1px solid rgb(255, 255, 255);font-weight:400;">楼主</a></strong><div style="word-wrap:break-word;"><div style="word-wrap:break-word;"><div><img src="第11章 UART串行通信 - 单片机学习教程(初学者入门) 单片机论坛_files/online_admin.gif" type="image/gif" height="16" style="word-wrap: break-word; vertical-align: middle; cursor: pointer; width: 16px; height: auto;" width="16"/> <a href="http://www.51hei.com/bbs/space-uid-1.html" style="word-wrap:break-word;text-decoration:none;color:rgb(51, 102, 153);" target="_blank">admin</a> <em style="word-wrap:break-word;font-style:normal;">发表于 2013-9-28 14:47</em> <span style="word-wrap:break-word;margin:0px 5px;color:rgb(204, 204, 204);">|</span> <a href="http://www.51hei.com/bbs/forum.php?mod=viewthread&amp;tid=22296&amp;page=1&amp;authorid=1" rel="nofollow" style="word-wrap:break-word;color:rgb(51, 51, 51);text-decoration:none;">只看该作者</a> <span style="word-wrap:break-word;margin:0px 5px;color:rgb(204, 204, 204);">|</span><a href="http://www.51hei.com/bbs/forum.php?mod=viewthread&amp;tid=22296&amp;from=album" style="word-wrap:break-word;color:rgb(51, 51, 51);text-decoration:none;">只看大图</a> <span style="word-wrap:break-word;display:inline-block;"><img src="第11章 UART串行通信 - 单片机学习教程(初学者入门) 单片机论坛_files/arw_r.gif" type="image/gif" alt="回帖奖励" height="15" style="word-wrap: break-word; vertical-align: middle; height: auto;" width="15"/></span></div></div></div></div><div style="word-wrap:break-word;padding-bottom:1em;"><div style="word-wrap:break-word;background:url(&quot;../../static/image/common/ad.gif&quot;) 0px 50% no-repeat;margin-bottom:6px;padding-left:20px;zoom:1;"><div><a href="http://www.51hei.com/150a.htm" style="word-wrap:break-word;color:rgb(51, 51, 51);text-decoration:none;" target="_blank">  </a></div></div><div style="word-wrap:break-word;clear:left;margin-right:0px;"><div style="word-wrap:break-word;min-height:100px;"><table cellpadding="0" cellspacing="0" style="font-size:inherit;font-weight:inherit;font-style:inherit;font-variant:inherit;word-wrap:break-word;empty-cells:show;border-collapse:collapse;table-layout:fixed;width:100%;"><tbody style="word-wrap:break-word;"><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;"><div align="left" style="word-wrap:break-word;"><div><br style="word-wrap:break-word;"/></div><div>通信按照传统的理解就是信息的传输与交换。对于单片机来说，通信则与传感器、存储芯片、外围控制芯片等技术紧密结合，成为整个单片机系统的“神经中枢”。没有通信，单片机所实现的功能仅仅局限于单片机本身，就无法通过其他设备获得有用信息，也无法将自己产生的信息告诉其它设备。如果单片机通信没处理好的话，它和外围器件的合作程度就受到限制，最终整个系统也无法完成强大的功能，由此可见单片机通信技术的重要性。<font face="Consolas" style="word-wrap:break-word;">UART</font>（Universal Asynchronous Receiver/Transmitter，即通用异步收发器）串行通信是单片机最常用的一种通信技术，通常用于单片机和电脑之间以及单片机和单片机之间的通信。</div></div><strong style="word-wrap:break-word;font-weight:700;"><font color="#000" style="word-wrap:break-word;">11.1</font> <font color="#000" style="word-wrap:break-word;">串行通信的初步认识</font></strong><div align="left" style="word-wrap:break-word;">通信按照基本类型可以分为并行通信和串行通信。并行通信时数据的各个位同时传送，可以实现字节为单位通信，但是因为通信线多占用资源多，成本高。比如我们前边用到的<font face="Consolas" style="word-wrap:break-word;">P0 = 0xfe;</font><font face="宋体" style="word-wrap:break-word;">一次给</font><font face="Consolas" style="word-wrap:break-word;">P0</font><font face="宋体" style="word-wrap:break-word;">的</font><font face="Consolas" style="word-wrap:break-word;">8</font><font face="宋体" style="word-wrap:break-word;">个</font><font face="Consolas" style="word-wrap:break-word;">IO</font><font face="宋体" style="word-wrap:break-word;">口分别赋值，同时进行信号输出，类似于有</font><font face="Consolas" style="word-wrap:break-word;">8</font><font face="宋体" style="word-wrap:break-word;">个车道同时可以过去</font><font face="Consolas" style="word-wrap:break-word;">8</font><font face="宋体" style="word-wrap:break-word;">辆车一样，这种形式就是并行的，我们习惯上还称</font><font face="Consolas" style="word-wrap:break-word;">P0</font><font face="宋体" style="word-wrap:break-word;">、</font><font face="Consolas" style="word-wrap:break-word;">P1</font><font face="宋体" style="word-wrap:break-word;">、</font><font face="Consolas" style="word-wrap:break-word;">P2</font><font face="宋体" style="word-wrap:break-word;">和</font><font face="Consolas" style="word-wrap:break-word;">P3</font><font face="宋体" style="word-wrap:break-word;">为</font><font face="Consolas" style="word-wrap:break-word;">51</font><font face="宋体" style="word-wrap:break-word;">单片机的</font><font face="Consolas" style="word-wrap:break-word;">4</font><font face="宋体" style="word-wrap:break-word;">组并行总线。</font></div><div align="left" style="word-wrap:break-word;">而串行通信，就如同一条车道，一次只能一辆车过去，如果一个<font face="Consolas" style="word-wrap:break-word;">0xfe</font><font face="宋体" style="word-wrap:break-word;">这样一个字节的数据要传输过去的话，假如低位在前高位在后，那发送方式就是</font><font face="Consolas" style="word-wrap:break-word;">0</font>-1-1-1-1-1-1-1-1<font face="宋体" style="word-wrap:break-word;">，一位一位的发送出去的，要发送</font><font face="Consolas" style="word-wrap:break-word;">8</font><font face="宋体" style="word-wrap:break-word;">次才能发送完一个字节。</font></div><div align="left" style="word-wrap:break-word;">在我们的<font face="Consolas" style="word-wrap:break-word;">STC89C52</font><font face="宋体" style="word-wrap:break-word;">上，有两</font>个引脚，是专门用来做<font face="Consolas" style="word-wrap:break-word;">UART</font><font face="宋体" style="word-wrap:break-word;">串口通信的，一个是</font><font face="Consolas" style="word-wrap:break-word;">P3.0</font><font face="宋体" style="word-wrap:break-word;">一个是</font><font face="Consolas" style="word-wrap:break-word;">P3.1</font><font face="宋体" style="word-wrap:break-word;">，还分别有另外的名字叫做</font><font face="Consolas" style="word-wrap:break-word;">RXD</font><font face="宋体" style="word-wrap:break-word;">和</font><font face="Consolas" style="word-wrap:break-word;">TXD</font><font face="宋体" style="word-wrap:break-word;">，这两个引脚是专门用来进行</font><font face="Consolas" style="word-wrap:break-word;">UART</font><font face="宋体" style="word-wrap:break-word;">通信的，如果我们两个单片机进行</font><font face="Consolas" style="word-wrap:break-word;">UART</font><font face="宋体" style="word-wrap:break-word;">串口通信的话，那基本的演示图如图</font><font face="Consolas" style="word-wrap:break-word;">11-1</font><font face="宋体" style="word-wrap:break-word;">所示。</font></div><div align="center" style="word-wrap:break-word;"><span style="word-wrap:break-word;"><img src="第11章 UART串行通信 - 单片机学习教程(初学者入门) 单片机论坛_files/143051k09f8ffohm8m9c83.jpg" type="image/jpeg" height="341" style="word-wrap: break-word; cursor: pointer; height: auto;" width="733"/></span></div><div align="center" style="word-wrap:break-word;">图<font face="Times New Roman" style="word-wrap:break-word;">11-1</font> <font face="宋体" style="word-wrap:break-word;">单片机之间</font><font face="Times New Roman" style="word-wrap:break-word;">UART</font><font face="宋体" style="word-wrap:break-word;">通信示意图</font></div><div align="left" style="word-wrap:break-word;">图中，GND<font face="宋体" style="word-wrap:break-word;">表示单片机系统电源的参考地，</font>TXD<font face="宋体" style="word-wrap:break-word;">是</font>串行发送引脚，<font face="Consolas" style="word-wrap:break-word;">RXD</font><font face="宋体" style="word-wrap:break-word;">是</font>串行接收引脚。两个单片机之间要通信，首先电源基准得一样，所以我们要把两个单片机的<font face="Consolas" style="word-wrap:break-word;">GND</font><font face="宋体" style="word-wrap:break-word;">相互连起来，然后单片机</font><font face="Consolas" style="word-wrap:break-word;">1</font><font face="宋体" style="word-wrap:break-word;">的</font><font face="Consolas" style="word-wrap:break-word;">TXD</font><font face="宋体" style="word-wrap:break-word;">引脚接到单片机</font><font face="Consolas" style="word-wrap:break-word;">2</font><font face="宋体" style="word-wrap:break-word;">的</font><font face="Consolas" style="word-wrap:break-word;">RXD</font><font face="宋体" style="word-wrap:break-word;">引脚上</font>，即此路为单片机1<font face="宋体" style="word-wrap:break-word;">发送而单片机</font><font face="Consolas" style="word-wrap:break-word;">2</font><font face="宋体" style="word-wrap:break-word;">接收的通道</font>，单片机<font face="Consolas" style="word-wrap:break-word;">1</font><font face="宋体" style="word-wrap:break-word;">的</font><font face="Consolas" style="word-wrap:break-word;">RXD</font><font face="宋体" style="word-wrap:break-word;">引脚接到单片机</font><font face="Consolas" style="word-wrap:break-word;">2</font><font face="宋体" style="word-wrap:break-word;">的</font><font face="Consolas" style="word-wrap:break-word;">TXD</font><font face="宋体" style="word-wrap:break-word;">引脚上</font>，即此路为单片机2<font face="宋体" style="word-wrap:break-word;">发送而单片机</font><font face="Consolas" style="word-wrap:break-word;">2</font><font face="宋体" style="word-wrap:break-word;">接收的通道</font>。这个示意图就体现了两个单片机各自收发信息的过程。</div><div align="left" style="word-wrap:break-word;">当单片机<font face="Consolas" style="word-wrap:break-word;">1</font><font face="宋体" style="word-wrap:break-word;">想给单片机</font><font face="Consolas" style="word-wrap:break-word;">2</font><font face="宋体" style="word-wrap:break-word;">发送数据时，比如发送一个</font><font face="Consolas" style="word-wrap:break-word;">0xE4</font><font face="宋体" style="word-wrap:break-word;">这个数据，</font>用二进制形式表示就是0b11100100，在<font face="Consolas" style="word-wrap:break-word;">UART</font><font face="宋体" style="word-wrap:break-word;">通信过程中，是低位先发，高位后发的原则，那么就让</font><font face="Consolas" style="word-wrap:break-word;">TXD</font><font face="宋体" style="word-wrap:break-word;">首先拉低电平，持续一段时间，发送一位</font><font face="Consolas" style="word-wrap:break-word;">0</font><font face="宋体" style="word-wrap:break-word;">，然后继续拉低，再持续一段时间，又发送了一位</font><font face="Consolas" style="word-wrap:break-word;">0</font><font face="宋体" style="word-wrap:break-word;">，然后拉高电平，持续一段时间，发了一位</font><font face="Consolas" style="word-wrap:break-word;">1......</font><font face="宋体" style="word-wrap:break-word;">一直到把</font><font face="Consolas" style="word-wrap:break-word;">8</font><font face="宋体" style="word-wrap:break-word;">位二进制数字</font><font face="Consolas" style="word-wrap:break-word;">0</font>b11100100<font face="宋体" style="word-wrap:break-word;">全部发送完毕。这里就牵扯到了一个问题，就是持续的这“一段时间”到底是多久？从这里引入我们通信</font>中的另外重要概念——波特率，也叫做比特率。</div><div align="left" style="word-wrap:break-word;">波特率就是发送一位二进制数据的速率，习惯上用<font face="Consolas" style="word-wrap:break-word;">baud</font><font face="宋体" style="word-wrap:break-word;">表示，即我们发送一位数据的持续时间</font><font face="Consolas" style="word-wrap:break-word;">=1/baud</font><font face="宋体" style="word-wrap:break-word;">。在通信之前，单片机</font><font face="Consolas" style="word-wrap:break-word;">1</font><font face="宋体" style="word-wrap:break-word;">和单片机</font><font face="Consolas" style="word-wrap:break-word;">2</font><font face="宋体" style="word-wrap:break-word;">首先都要明确的约定好他们之间的通信波特率</font>，必须保持一致，收发双方才能正常实现通信，这一点大家一定要记清楚。</div><div align="left" style="word-wrap:break-word;">约定好速度后，我们还要考虑第二个问题，数据什么时候是起始，什么时候是结束呢？不管是提前接收还是延迟接收，数据都会接收错误。在<font face="Consolas" style="word-wrap:break-word;">UART</font>串行通信的时候，一个字节是<font face="Consolas" style="word-wrap:break-word;">8</font><font face="宋体" style="word-wrap:break-word;">位，规定当没有通信信号发生时，通信线路保持高电平，当要发送数据之前，先发一位</font><font face="Consolas" style="word-wrap:break-word;">0</font><font face="宋体" style="word-wrap:break-word;">表示起始位，然后发送</font><font face="Consolas" style="word-wrap:break-word;">8</font><font face="宋体" style="word-wrap:break-word;">位数据位，数据位是先低后高的</font>顺序，数据位发完后再发一位<font face="Consolas" style="word-wrap:break-word;">1</font><font face="宋体" style="word-wrap:break-word;">表示停止位。这样本来要发送一个字节</font><font face="Consolas" style="word-wrap:break-word;">8</font><font face="宋体" style="word-wrap:break-word;">位数据，而实际上我们一共发送了</font><font face="Consolas" style="word-wrap:break-word;">10</font><font face="宋体" style="word-wrap:break-word;">位，</font>多出来的两位其中一位起始位，一位停止位。而接收方呢，原本一直保持的高电平，一旦检测到来了一位低电平，那就知道了要开始准备接收数据了，接收到<font face="Consolas" style="word-wrap:break-word;">8</font><font face="宋体" style="word-wrap:break-word;">位数据位后，然后检测到停止位，再准备下一个数据的接收了。我们图示看一下，如图</font><font face="Consolas" style="word-wrap:break-word;">11-2</font><font face="宋体" style="word-wrap:break-word;">所示。</font></div><div align="left" style="word-wrap:break-word;"><span style="word-wrap:break-word;"><img src="第11章 UART串行通信 - 单片机学习教程(初学者入门) 单片机论坛_files/143053lqh7jlrswgglc9t9.jpg" type="image/jpeg" height="179" style="word-wrap: break-word; cursor: pointer; height: auto;" width="733"/></span></div><div align="center" style="word-wrap:break-word;">图<font face="Consolas" style="word-wrap:break-word;">11-2</font> <font face="宋体" style="word-wrap:break-word;">串口数据发送示意图</font></div><div align="left" style="word-wrap:break-word;">    像我们的图<font face="Consolas" style="word-wrap:break-word;">11-2</font><font face="宋体" style="word-wrap:break-word;">串口数据发送示意图，实际上是一个时域示意图，就是信号随着时间变化的对应关系。比如在单片机的发送引脚上，左边的是先发生的，右边的是后发生的，数据位的切换时间就是波特率分之一秒，如果能够理解时域的概念，后边很多通信的时序图就很容易理解了。</font></div><strong style="word-wrap:break-word;font-weight:700;"><font color="#000" style="word-wrap:break-word;">11.2</font> <font color="#000" style="word-wrap:break-word;">串行</font><font color="#000" style="word-wrap:break-word;">RS</font>232<font face="黑体" style="word-wrap:break-word;">通信接口</font></strong><div align="left" style="word-wrap:break-word;">在我们的台式电脑上，有一个<font face="Times New Roman" style="word-wrap:break-word;">9</font><font face="宋体" style="word-wrap:break-word;">针的串行接口，这个串行接口叫做</font>RS232<font face="宋体" style="word-wrap:break-word;">接口，它和</font><font face="Times New Roman" style="word-wrap:break-word;">UART</font>通信有关联，但是由于现在笔记本电脑都不带这种<font face="Times New Roman" style="word-wrap:break-word;">9</font><font face="宋体" style="word-wrap:break-word;">针串口了，所以和单片机通信越来越趋向于使用</font><font face="Times New Roman" style="word-wrap:break-word;">USB</font><font face="宋体" style="word-wrap:break-word;">虚拟的串口和单片机通信，因此这一节的内容作为了解内容，大家知道有这么回事就行。</font></div><div align="left" style="word-wrap:break-word;">我们先来认识一下这个标准串口，串口分为<font face="Times New Roman" style="word-wrap:break-word;">9</font><font face="宋体" style="word-wrap:break-word;">针的和</font><font face="Times New Roman" style="word-wrap:break-word;">9</font><font face="宋体" style="word-wrap:break-word;">孔的，习惯上我们也称之为公头和母头，如图</font><font face="Times New Roman" style="word-wrap:break-word;">11-3</font><font face="宋体" style="word-wrap:break-word;">所示。  </font></div><div align="center" style="word-wrap:break-word;"><span style="word-wrap:break-word;"><img src="第11章 UART串行通信 - 单片机学习教程(初学者入门) 单片机论坛_files/143054k0naazoa6a9a6vn8.jpg" type="image/jpeg" height="250" style="word-wrap: break-word; cursor: pointer; height: auto;" width="733"/></span></div><div align="center" style="word-wrap:break-word;">图<font face="Times New Roman" style="word-wrap:break-word;">11-3</font> RS232<font face="宋体" style="word-wrap:break-word;">通信接口</font></div><div align="left" style="word-wrap:break-word;">RS232<font face="宋体" style="word-wrap:break-word;">接口一共有</font><font face="Times New Roman" style="word-wrap:break-word;">9</font><font face="宋体" style="word-wrap:break-word;">个引脚，分别定义是：</font><font face="Times New Roman" style="word-wrap:break-word;">1</font><font face="宋体" style="word-wrap:break-word;">、载波检测</font><font face="Times New Roman" style="word-wrap:break-word;">(DCD)</font><font face="宋体" style="word-wrap:break-word;">；</font><font face="Times New Roman" style="word-wrap:break-word;">2</font><font face="宋体" style="word-wrap:break-word;">、接收数据</font><font face="Times New Roman" style="word-wrap:break-word;">(RXD)</font><font face="宋体" style="word-wrap:break-word;">；</font><font face="Times New Roman" style="word-wrap:break-word;">3</font><font face="宋体" style="word-wrap:break-word;">、发送数据</font><font face="Times New Roman" style="word-wrap:break-word;">(TXD)</font><font face="宋体" style="word-wrap:break-word;">；</font><font face="Times New Roman" style="word-wrap:break-word;">4</font><font face="宋体" style="word-wrap:break-word;">、数据终端准备好</font><font face="Times New Roman" style="word-wrap:break-word;">(DTR)</font><font face="宋体" style="word-wrap:break-word;">；</font><font face="Times New Roman" style="word-wrap:break-word;">5</font><font face="宋体" style="word-wrap:break-word;">、信号地线</font><font face="Times New Roman" style="word-wrap:break-word;">(SG)</font><font face="宋体" style="word-wrap:break-word;">；</font><font face="Times New Roman" style="word-wrap:break-word;">6</font><font face="宋体" style="word-wrap:break-word;">、数据准备好</font><font face="Times New Roman" style="word-wrap:break-word;">(DSR)</font><font face="宋体" style="word-wrap:break-word;">；</font><font face="Times New Roman" style="word-wrap:break-word;">7</font><font face="宋体" style="word-wrap:break-word;">、请求发送</font><font face="Times New Roman" style="word-wrap:break-word;">(RTS)</font><font face="宋体" style="word-wrap:break-word;">；</font><font face="Times New Roman" style="word-wrap:break-word;">8</font><font face="宋体" style="word-wrap:break-word;">、清除发送</font><font face="Times New Roman" style="word-wrap:break-word;">(CTS)</font><font face="宋体" style="word-wrap:break-word;">；</font><font face="Times New Roman" style="word-wrap:break-word;">9</font><font face="宋体" style="word-wrap:break-word;">、振铃提示</font><font face="Times New Roman" style="word-wrap:break-word;">(RI)</font><font face="宋体" style="word-wrap:break-word;">。我们要让这个串口和我们单片机进行通信，我们只需要关心其中的</font><font face="Times New Roman" style="word-wrap:break-word;">2</font><font face="宋体" style="word-wrap:break-word;">脚</font><font face="Times New Roman" style="word-wrap:break-word;">(RXD)</font><font face="宋体" style="word-wrap:break-word;">，</font><font face="Times New Roman" style="word-wrap:break-word;">3</font><font face="宋体" style="word-wrap:break-word;">脚</font><font face="Times New Roman" style="word-wrap:break-word;">(TXD)</font><font face="宋体" style="word-wrap:break-word;">和</font><font face="Times New Roman" style="word-wrap:break-word;">5</font><font face="宋体" style="word-wrap:break-word;">脚</font><font face="Times New Roman" style="word-wrap:break-word;">(GND)</font><font face="宋体" style="word-wrap:break-word;">。</font></div><div align="left" style="word-wrap:break-word;">虽然这三个脚的名字和我们单片机上的串口名字一样，但是却不能直接和单片机对连直接通信，这是为什么呢？随着我们了解的内容越来越多，我们得慢慢知道，不是所有的电路都是5V代表高电平而0V代表低电平的。对于RS232标准来说，它是个反逻辑，也叫做负逻辑。为何叫负逻辑？它的<font face="Times New Roman" style="word-wrap:break-word;">TXD</font><font face="宋体" style="word-wrap:break-word;">和</font><font face="Times New Roman" style="word-wrap:break-word;">RXD</font><font face="宋体" style="word-wrap:break-word;">的电压，</font><font face="Times New Roman" style="word-wrap:break-word;">-3V</font><font face="宋体" style="word-wrap:break-word;">到</font><font face="Times New Roman" style="word-wrap:break-word;">-15V</font><font face="宋体" style="word-wrap:break-word;">代表是</font><font face="Times New Roman" style="word-wrap:break-word;">1</font><font face="宋体" style="word-wrap:break-word;">，</font><font face="Times New Roman" style="word-wrap:break-word;">3-15V</font><font face="宋体" style="word-wrap:break-word;">之间的电压代表是</font><font face="Times New Roman" style="word-wrap:break-word;">0</font><font face="宋体" style="word-wrap:break-word;">。低电平代表的是</font><font face="Times New Roman" style="word-wrap:break-word;">1</font><font face="宋体" style="word-wrap:break-word;">，而高电平代表的是</font><font face="Times New Roman" style="word-wrap:break-word;">0</font><font face="宋体" style="word-wrap:break-word;">，所以称之为负逻辑。因此电脑的</font><font face="Times New Roman" style="word-wrap:break-word;">9</font><font face="宋体" style="word-wrap:break-word;">针</font><font face="Times New Roman" style="word-wrap:break-word;">232</font><font face="宋体" style="word-wrap:break-word;">串口是不能和单片机直接连接的，需要用一个转换芯片</font><font face="Times New Roman" style="word-wrap:break-word;">MAX232</font><font face="宋体" style="word-wrap:break-word;">来完成，如图</font><font face="Times New Roman" style="word-wrap:break-word;">11-4</font><font face="宋体" style="word-wrap:break-word;">所示。</font></div><div align="center" style="word-wrap:break-word;"><span style="word-wrap:break-word;"><img src="第11章 UART串行通信 - 单片机学习教程(初学者入门) 单片机论坛_files/143057agyooya8o4soy054.jpg" type="image/jpeg" height="418" style="word-wrap: break-word; cursor: pointer; height: auto;" width="733"/></span></div><div align="center" style="word-wrap:break-word;">图<font face="Times New Roman" style="word-wrap:break-word;">11-4 MAX232</font><font face="宋体" style="word-wrap:break-word;">转接图</font></div><div align="left" style="word-wrap:break-word;">这个芯片就可以实现把标准RS232<font face="宋体" style="word-wrap:break-word;">串口</font>电平转换成我们单片机能够识别和承受的UART 0V/5V<font face="宋体" style="word-wrap:break-word;">电平标准</font>。从这里大家似乎慢慢有点明白了，其实RS232<font face="宋体" style="word-wrap:break-word;">串口和</font><font face="Times New Roman" style="word-wrap:break-word;">UART</font><font face="宋体" style="word-wrap:break-word;">串口，他们的协议类型是一样，只是</font>电平不同而已，而<font face="Times New Roman" style="word-wrap:break-word;">MAX232</font><font face="宋体" style="word-wrap:break-word;">这个芯片起到的就是中间人的作用，他把</font><font face="Times New Roman" style="word-wrap:break-word;">UART</font>电平转换成RS232电平，也把RS232电平转换成<font face="Times New Roman" style="word-wrap:break-word;">UART</font>电平，从而实现标准RS232<font face="宋体" style="word-wrap:break-word;">接口和单片机</font><font face="Times New Roman" style="word-wrap:break-word;">UART</font><font face="宋体" style="word-wrap:break-word;">之间的通信连接</font>。</div><strong style="word-wrap:break-word;font-weight:700;"><font color="#000" style="word-wrap:break-word;">11.3</font> USB<font face="黑体" style="word-wrap:break-word;">转串口通信</font></strong><div align="left" style="word-wrap:break-word;">随着技术的发展，工业上还有RS232<font face="宋体" style="word-wrap:break-word;">串口通信的大量使用，但是商业技术的应用上，已经慢慢的使用</font><font face="Times New Roman" style="word-wrap:break-word;">USB</font><font face="宋体" style="word-wrap:break-word;">转</font><font face="Times New Roman" style="word-wrap:break-word;">UART</font><font face="宋体" style="word-wrap:break-word;">技术取代了</font>RS232<font face="宋体" style="word-wrap:break-word;">串口，绝大多数笔记本电脑已经没有串口这个东西了，那我们要实现单片机和电脑之间的通信该如何办呢？</font></div><div align="left" style="word-wrap:break-word;">我们只需要在我们电路上添加一个<font face="Times New Roman" style="word-wrap:break-word;">USB</font><font face="宋体" style="word-wrap:break-word;">转串口芯片，就可以成功实现</font><font face="Times New Roman" style="word-wrap:break-word;">USB</font><font face="宋体" style="word-wrap:break-word;">通信协议和标准</font><font face="Times New Roman" style="word-wrap:break-word;">UART</font><font face="宋体" style="word-wrap:break-word;">串行通信协议的转换，在我们的开发板上，我们使用的是</font><font face="Times New Roman" style="word-wrap:break-word;">CH340T</font><font face="宋体" style="word-wrap:break-word;">这个芯片，如图</font><font face="Times New Roman" style="word-wrap:break-word;">11-5</font><font face="宋体" style="word-wrap:break-word;">所示。</font></div><div align="center" style="word-wrap:break-word;"><span style="word-wrap:break-word;"><img src="第11章 UART串行通信 - 单片机学习教程(初学者入门) 单片机论坛_files/143059xyq7j4mlfa4lqvti.jpg" type="image/jpeg" height="282" style="word-wrap: break-word; cursor: pointer; height: auto;" width="733"/></span></div><div align="center" style="word-wrap:break-word;">图<font face="Times New Roman" style="word-wrap:break-word;">11-5 USB</font><font face="宋体" style="word-wrap:break-word;">转串口电路</font></div><div align="left" style="word-wrap:break-word;">左侧J2<font face="宋体" style="word-wrap:break-word;">是一组跳线的组合</font>，大家可以在我们板子左下角的跳线位置找到，我们是把3脚和5脚、4脚和6脚通过跳线帽短接到一起。右侧的<font face="Times New Roman" style="word-wrap:break-word;">CH340</font>T这个电路很简单，把电源电路，晶振电路接好后，<font face="Times New Roman" style="word-wrap:break-word;">6</font><font face="宋体" style="word-wrap:break-word;">脚和</font><font face="Times New Roman" style="word-wrap:break-word;">7</font><font face="宋体" style="word-wrap:break-word;">脚</font>的DP<font face="宋体" style="word-wrap:break-word;">和</font><font face="Times New Roman" style="word-wrap:break-word;">DM</font>分别接<font face="Times New Roman" style="word-wrap:break-word;">USB</font><font face="宋体" style="word-wrap:break-word;">口的</font><font face="Times New Roman" style="word-wrap:break-word;">2</font><font face="宋体" style="word-wrap:break-word;">个数据引脚上去，</font><font face="Times New Roman" style="word-wrap:break-word;">3</font><font face="宋体" style="word-wrap:break-word;">脚和</font><font face="Times New Roman" style="word-wrap:break-word;">4</font><font face="宋体" style="word-wrap:break-word;">脚</font>通过跳线接到了我们单片机的<font face="Times New Roman" style="word-wrap:break-word;">TXD</font><font face="宋体" style="word-wrap:break-word;">和</font><font face="Times New Roman" style="word-wrap:break-word;">RXD</font><font face="宋体" style="word-wrap:break-word;">上去。</font></div><div align="left" style="word-wrap:break-word;">CH340T<font face="宋体" style="word-wrap:break-word;">的电路里</font><font face="Times New Roman" style="word-wrap:break-word;">3</font><font face="宋体" style="word-wrap:break-word;">脚位置加了个</font><font face="Times New Roman" style="word-wrap:break-word;">4148</font><font face="宋体" style="word-wrap:break-word;">的二极管，是一个小技巧。因为我们的</font><font face="Times New Roman" style="word-wrap:break-word;">STC89C52RC</font><font face="宋体" style="word-wrap:break-word;">这个单片机下载程序需要冷启动，就是先点下载后上电，上电瞬间单片机会先检测需要不需要下载程序。虽然单片机的</font><font face="Times New Roman" style="word-wrap:break-word;">VCC</font><font face="宋体" style="word-wrap:break-word;">是由开关来控制，但是由于</font><font face="Times New Roman" style="word-wrap:break-word;">CH340</font>T的<font face="Times New Roman" style="word-wrap:break-word;">3</font><font face="宋体" style="word-wrap:break-word;">脚是输出引脚，如果没有此二极管，开关后级单片机在断电的情况下，</font><font face="Times New Roman" style="word-wrap:break-word;">CH340</font>T的<font face="Times New Roman" style="word-wrap:break-word;">3</font><font face="宋体" style="word-wrap:break-word;">脚和单片机的</font><font face="Times New Roman" style="word-wrap:break-word;">P3.0</font>（即RXD）引脚连在一起，有电流会通过这个引脚流入后级电路并且给后级的电容充电，造成后级有一定幅度的电压，这个电压值虽然只有两三伏左右，但是可能会影响到我们的冷启动。加了二极管后，一方面不影响通信，另外一个方面还可以消除这种问题。这个地方可以暂时作为了解，大家如果自己做这块电路，可以参考一下。</div><strong style="word-wrap:break-word;font-weight:700;"><font color="#000" style="word-wrap:break-word;">11.4</font> IO<font face="黑体" style="word-wrap:break-word;">口模拟</font><font face="Times New Roman" style="word-wrap:break-word;">UART</font><font face="黑体" style="word-wrap:break-word;">串口通信</font></strong><div align="left" style="word-wrap:break-word;">为了让大家充分理解<font face="Times New Roman" style="word-wrap:break-word;">UART</font><font face="宋体" style="word-wrap:break-word;">串口通信的原理，我们先用</font><font face="Times New Roman" style="word-wrap:break-word;">P3.0</font><font face="宋体" style="word-wrap:break-word;">和</font><font face="Times New Roman" style="word-wrap:break-word;">P3.1</font><font face="宋体" style="word-wrap:break-word;">这两个当做</font><font face="Times New Roman" style="word-wrap:break-word;">IO</font><font face="宋体" style="word-wrap:break-word;">口来进行模拟实际串口通信的过程，原理搞懂后，我们再使用寄存器配置实现串口通信过程。</font></div><div align="left" style="word-wrap:break-word;">对于<font face="Times New Roman" style="word-wrap:break-word;">UART</font><font face="宋体" style="word-wrap:break-word;">串口波特率，常用的值是</font><font face="Times New Roman" style="word-wrap:break-word;">300</font><font face="宋体" style="word-wrap:break-word;">、</font><font face="Times New Roman" style="word-wrap:break-word;">600</font><font face="宋体" style="word-wrap:break-word;">、</font><font face="Times New Roman" style="word-wrap:break-word;">1200</font><font face="宋体" style="word-wrap:break-word;">、</font><font face="Times New Roman" style="word-wrap:break-word;">2400</font><font face="宋体" style="word-wrap:break-word;">、</font><font face="Times New Roman" style="word-wrap:break-word;">4800</font><font face="宋体" style="word-wrap:break-word;">、</font><font face="Times New Roman" style="word-wrap:break-word;">9600</font><font face="宋体" style="word-wrap:break-word;">、</font><font face="Times New Roman" style="word-wrap:break-word;">14400</font><font face="宋体" style="word-wrap:break-word;">、</font><font face="Times New Roman" style="word-wrap:break-word;">19200</font><font face="宋体" style="word-wrap:break-word;">、</font><font face="Times New Roman" style="word-wrap:break-word;">28800</font><font face="宋体" style="word-wrap:break-word;">、</font><font face="Times New Roman" style="word-wrap:break-word;">38400</font><font face="宋体" style="word-wrap:break-word;">、</font><font face="Times New Roman" style="word-wrap:break-word;">57600</font><font face="宋体" style="word-wrap:break-word;">、</font><font face="Times New Roman" style="word-wrap:break-word;">115200</font><font face="宋体" style="word-wrap:break-word;">、</font><font face="Times New Roman" style="word-wrap:break-word;">128000</font><font face="宋体" style="word-wrap:break-word;">、</font><font face="Times New Roman" style="word-wrap:break-word;">256000</font><font face="宋体" style="word-wrap:break-word;">等速率。</font><font face="Times New Roman" style="word-wrap:break-word;">IO</font><font face="宋体" style="word-wrap:break-word;">口模拟</font><font face="Times New Roman" style="word-wrap:break-word;">UART</font><font face="宋体" style="word-wrap:break-word;">串行通信程序是一个简单的演示程序，我们使用串口调试助手下发一个数据，数据加</font><font face="Times New Roman" style="word-wrap:break-word;">1</font><font face="宋体" style="word-wrap:break-word;">后，再自动返回。串口调试助手，在我们进行全板子测试视频的时候，大家已经见过，这里我们直接使用</font><font face="Times New Roman" style="word-wrap:break-word;">STC-ISP</font><font face="宋体" style="word-wrap:break-word;">软件自带的串口调试助手，</font><font face="宋体" style="word-wrap:break-word;">可到<a href="http://www.51hei.com/" style="word-wrap:break-word;color:rgb(51, 102, 153);text-decoration:underline;" target="_blank">www.51hei.com</a>去下载此程序，先把串口调试助手使用给大家说一下，如图</font><font face="Times New Roman" style="word-wrap:break-word;">11-6</font><font face="宋体" style="word-wrap:break-word;">所示。第一步要选择串口助手菜单，第二步选择十六进制显示，第三步选择十六进制发送，第四步选择</font><font face="Times New Roman" style="word-wrap:break-word;">COM</font><font face="宋体" style="word-wrap:break-word;">口，这个</font><font face="Times New Roman" style="word-wrap:break-word;">COM</font><font face="宋体" style="word-wrap:break-word;">口要和自己电脑设备管理器里的那个</font><font face="Times New Roman" style="word-wrap:break-word;">COM</font><font face="宋体" style="word-wrap:break-word;">口一致，波特率是我们程序设定好的选择，我们程序中让一个数据位持续时间是</font><font face="Times New Roman" style="word-wrap:break-word;">1/9600</font><font face="宋体" style="word-wrap:break-word;">秒，那这个地方选择波特率就是选</font><font face="Times New Roman" style="word-wrap:break-word;">9600</font><font face="宋体" style="word-wrap:break-word;">，校验位选</font><font face="Times New Roman" style="word-wrap:break-word;">N</font><font face="宋体" style="word-wrap:break-word;">，数据位</font><font face="Times New Roman" style="word-wrap:break-word;">8</font><font face="宋体" style="word-wrap:break-word;">，停止位</font><font face="Times New Roman" style="word-wrap:break-word;">1</font><font face="宋体" style="word-wrap:break-word;">。</font></div><div align="center" style="word-wrap:break-word;"><span style="word-wrap:break-word;"><img src="第11章 UART串行通信 - 单片机学习教程(初学者入门) 单片机论坛_files/143106wkykryau6ys1nnct.jpg" type="image/jpeg" height="482" style="word-wrap: break-word; cursor: pointer; height: auto;" width="733"/></span></div><div align="center" style="word-wrap:break-word;">图<font face="Times New Roman" style="word-wrap:break-word;">11-6</font> <font face="宋体" style="word-wrap:break-word;">串口调试助手示意图</font></div><div align="left" style="word-wrap:break-word;">串口调试助手的实质就是我们利用电脑上的<font face="Times New Roman" style="word-wrap:break-word;">UART</font><font face="宋体" style="word-wrap:break-word;">通信接口，通过这个</font><font face="Times New Roman" style="word-wrap:break-word;">UART</font><font face="宋体" style="word-wrap:break-word;">接口发送数据给我们的单片机，也可以把我们的单片机发送的数据接收到这个调试助手界面上。</font></div><div align="left" style="word-wrap:break-word;">因为初次接触通信方面的技术，所以我对这个程序进行一下解释，大家可以边看我的解释边看程序，把底层原理先彻底弄懂。</div><div align="left" style="word-wrap:break-word;">变量定义部分就不用说了，直接看<font face="Times New Roman" style="word-wrap:break-word;">main</font><font face="宋体" style="word-wrap:break-word;">主函数。首先是对通信的波特率的设定，在这里我们配置的波特率是</font><font face="Times New Roman" style="word-wrap:break-word;">9600</font><font face="宋体" style="word-wrap:break-word;">，那么串口调试助手也得是</font><font face="Times New Roman" style="word-wrap:break-word;">9600</font><font face="宋体" style="word-wrap:break-word;">。配置波特率的时候，我们用的是定时器</font><font face="Times New Roman" style="word-wrap:break-word;">0</font><font face="宋体" style="word-wrap:break-word;">的模式</font><font face="Times New Roman" style="word-wrap:break-word;">2</font><font face="宋体" style="word-wrap:break-word;">。模式</font><font face="Times New Roman" style="word-wrap:break-word;">2</font><font face="宋体" style="word-wrap:break-word;">中，不再是</font><font face="Times New Roman" style="word-wrap:break-word;">TH0</font><font face="宋体" style="word-wrap:break-word;">代表高</font><font face="Times New Roman" style="word-wrap:break-word;">8</font><font face="宋体" style="word-wrap:break-word;">位，</font><font face="Times New Roman" style="word-wrap:break-word;">TL0</font><font face="宋体" style="word-wrap:break-word;">代表低</font><font face="Times New Roman" style="word-wrap:break-word;">8</font><font face="宋体" style="word-wrap:break-word;">位了，而只有</font><font face="Times New Roman" style="word-wrap:break-word;">TL0</font><font face="宋体" style="word-wrap:break-word;">在进行计数了。当</font><font face="Times New Roman" style="word-wrap:break-word;">TL0</font><font face="宋体" style="word-wrap:break-word;">溢出后，不仅仅会让</font><font face="Times New Roman" style="word-wrap:break-word;">TF0</font><font face="宋体" style="word-wrap:break-word;">变</font><font face="Times New Roman" style="word-wrap:break-word;">1</font><font face="宋体" style="word-wrap:break-word;">，而且还会将</font><font face="Times New Roman" style="word-wrap:break-word;">TH0</font><font face="宋体" style="word-wrap:break-word;">中的内容重新自动装到</font><font face="Times New Roman" style="word-wrap:break-word;">TL0</font><font face="宋体" style="word-wrap:break-word;">中。这样有一个好处，我们可以把我们想要的定时器初值提前存在</font><font face="Times New Roman" style="word-wrap:break-word;">TH0</font><font face="宋体" style="word-wrap:break-word;">中，当</font><font face="Times New Roman" style="word-wrap:break-word;">TL0</font><font face="宋体" style="word-wrap:break-word;">溢出后，</font><font face="Times New Roman" style="word-wrap:break-word;">TH0</font><font face="宋体" style="word-wrap:break-word;">自动把初值就重新送入</font><font face="Times New Roman" style="word-wrap:break-word;">TL0</font><font face="宋体" style="word-wrap:break-word;">了，全自动的，不需要程序上再给</font><font face="Times New Roman" style="word-wrap:break-word;">TL0</font><font face="宋体" style="word-wrap:break-word;">重新赋值了，配置方式很简单，大家可以自己看下程序并且计算一下初值。</font></div><div align="left" style="word-wrap:break-word;">波特率设置好以后，打开中断，然后等待接收串口调试助手下发的数据。接收数据的时候，首先要进行低电平检测 while (PIN_RXD)，若没有低电平则说明没有数据，一旦检测到低电平，就进入启动接收函数StartRXD()。接收函数最开始启动半个波特率周期，初学可能这里不是很明白。大家回头看一下我们的图11-2<font face="宋体" style="word-wrap:break-word;">里边的串口数据示意图，信号在数据位电平变化的时候去读，因为时序上的误差以及信号稳定性的问题很容易读错数据，所以我们希望在信号最稳定的时候去读数据。除了信号变化的那个沿的位置外，其他位置都很稳定，那么我们现在就约定在信号中间位置去读取电平状态，这样能够保证我们信号读的是对的。</font></div><div align="left" style="word-wrap:break-word;">一旦读到了起始信号，我们就把当前状态设定成接受状态，并且打开定时器中断，第一次是半个周期进入中断后，对起始位进行二次判断一下，确认一下起始位是低电平，而不是一个干扰信号。以后每经过<font face="Consolas" style="word-wrap:break-word;">9600</font><font face="宋体" style="word-wrap:break-word;">分之一秒进入一次中断，并且把这个引脚的状态读到</font>RxdBuf里边。等待接收完毕之后，我们再把这个RxdBuf加1<font face="宋体" style="word-wrap:break-word;">，再通过</font><font face="Consolas" style="word-wrap:break-word;">TXD</font><font face="宋体" style="word-wrap:break-word;">引脚发送出去，同样需要先发一位起始位，然后发</font><font face="Consolas" style="word-wrap:break-word;">8</font><font face="宋体" style="word-wrap:break-word;">个数据位，再发结束位，发送完毕后，程序运行到</font>while (PIN_RXD)，等待第二轮信号接收的开始。</div><div align="left" style="word-wrap:break-word;">#include &lt;reg52.h&gt;</div><div align="left" style="word-wrap:break-word;">sbit PIN_RXD = P3^0;  //<font face="宋体" style="word-wrap:break-word;">接收引脚定义</font></div><div align="left" style="word-wrap:break-word;">sbit PIN_TXD = P3^1;  //<font face="宋体" style="word-wrap:break-word;">发送引脚定义</font></div><div align="left" style="word-wrap:break-word;">bit RxdOrTxd = 0;  //<font face="宋体" style="word-wrap:break-word;">指示当前状态为接收还是发送</font></div><div align="left" style="word-wrap:break-word;">bit RxdEnd = 0;    //<font face="宋体" style="word-wrap:break-word;">接收结束标志</font></div><div align="left" style="word-wrap:break-word;">bit TxdEnd = 0;    //<font face="宋体" style="word-wrap:break-word;">发送结束标志</font></div><div align="left" style="word-wrap:break-word;">unsigned char RxdBuf = 0;  //<font face="宋体" style="word-wrap:break-word;">接收缓冲器</font></div><div align="left" style="word-wrap:break-word;">unsigned char TxdBuf = 0;  //<font face="宋体" style="word-wrap:break-word;">发送缓冲器</font></div><div align="left" style="word-wrap:break-word;">void ConfigUART(unsigned int baud);</div><div align="left" style="word-wrap:break-word;">void StartTXD(unsigned char dat);</div><div align="left" style="word-wrap:break-word;">void StartRXD();</div><div align="left" style="word-wrap:break-word;">void main ()</div><div align="left" style="word-wrap:break-word;">{</div><div align="left" style="word-wrap:break-word;">    ConfigUART(9600);  //<font face="宋体" style="word-wrap:break-word;">配置波特率为</font><font face="Consolas" style="word-wrap:break-word;">9600</font></div><div align="left" style="word-wrap:break-word;">    EA = 1;            //<font face="宋体" style="word-wrap:break-word;">开总中断</font></div><br style="word-wrap:break-word;"/><div align="left" style="word-wrap:break-word;">    while(1)</div><div align="left" style="word-wrap:break-word;">    {</div><div align="left" style="word-wrap:break-word;">        while (PIN_RXD);    //<font face="宋体" style="word-wrap:break-word;">等待接收引脚出现低电平，即起始位</font></div><div align="left" style="word-wrap:break-word;">        StartRXD();         //<font face="宋体" style="word-wrap:break-word;">启动接收</font></div><div align="left" style="word-wrap:break-word;">        while (!RxdEnd);    //<font face="宋体" style="word-wrap:break-word;">等待接收完成</font></div><div align="left" style="word-wrap:break-word;">        StartTXD(RxdBuf+1); //<font face="宋体" style="word-wrap:break-word;">接收到的数据</font><font face="Consolas" style="word-wrap:break-word;">+1</font><font face="宋体" style="word-wrap:break-word;">后，发送回去</font></div><div align="left" style="word-wrap:break-word;">        while (!TxdEnd);    //<font face="宋体" style="word-wrap:break-word;">等待发送完成</font></div><div align="left" style="word-wrap:break-word;">    }</div><div align="left" style="word-wrap:break-word;">}</div><div align="left" style="word-wrap:break-word;">void ConfigUART(unsigned int baud)  //<font face="宋体" style="word-wrap:break-word;">串口配置函数，</font><font face="Consolas" style="word-wrap:break-word;">baud</font><font face="宋体" style="word-wrap:break-word;">为波特率</font></div><div align="left" style="word-wrap:break-word;">{</div><div align="left" style="word-wrap:break-word;">    TMOD &amp;= 0xF0;   //<font face="宋体" style="word-wrap:break-word;">清零</font><font face="Consolas" style="word-wrap:break-word;">T0</font><font face="宋体" style="word-wrap:break-word;">的控制位</font></div><div align="left" style="word-wrap:break-word;">    TMOD |= 0x02;   //<font face="宋体" style="word-wrap:break-word;">配置</font><font face="Consolas" style="word-wrap:break-word;">T0</font><font face="宋体" style="word-wrap:break-word;">为模式</font><font face="Consolas" style="word-wrap:break-word;">2</font></div><div align="left" style="word-wrap:break-word;">    TH0 = 256 - (11059200/12) / baud;  //<font face="宋体" style="word-wrap:break-word;">计算</font><font face="Consolas" style="word-wrap:break-word;">T0</font><font face="宋体" style="word-wrap:break-word;">重载值</font></div><div align="left" style="word-wrap:break-word;">}</div><div align="left" style="word-wrap:break-word;">void StartRXD()   //<font face="宋体" style="word-wrap:break-word;">启动串行接收</font></div><div align="left" style="word-wrap:break-word;">{</div><div align="left" style="word-wrap:break-word;">    TL0 = 256 - ((256-TH0) &gt;&gt; 1);  //<font face="宋体" style="word-wrap:break-word;">接收启动时的</font><font face="Consolas" style="word-wrap:break-word;">T0</font><font face="宋体" style="word-wrap:break-word;">定时为半个波特率周期</font></div><div align="left" style="word-wrap:break-word;">    ET0 = 1;        //<font face="宋体" style="word-wrap:break-word;">使能</font><font face="Consolas" style="word-wrap:break-word;">T0</font><font face="宋体" style="word-wrap:break-word;">中断</font></div><div align="left" style="word-wrap:break-word;">    TR0 = 1;        //<font face="宋体" style="word-wrap:break-word;">启动</font><font face="Consolas" style="word-wrap:break-word;">T0</font></div><div align="left" style="word-wrap:break-word;">    RxdEnd = 0;     //<font face="宋体" style="word-wrap:break-word;">清零接收结束标志</font></div><div align="left" style="word-wrap:break-word;">    RxdOrTxd = 0;   //<font face="宋体" style="word-wrap:break-word;">设置当前状态为接收</font></div><div align="left" style="word-wrap:break-word;">}</div><div align="left" style="word-wrap:break-word;">void StartTXD(unsigned char dat)  //<font face="宋体" style="word-wrap:break-word;">启动串行发送，</font><font face="Consolas" style="word-wrap:break-word;">dat</font><font face="宋体" style="word-wrap:break-word;">为待发送字节数据</font></div><div align="left" style="word-wrap:break-word;">{</div><div align="left" style="word-wrap:break-word;">    TxdBuf = dat;   //<font face="宋体" style="word-wrap:break-word;">待发送数据保存到发送缓冲器</font></div><div align="left" style="word-wrap:break-word;">    TL0 = TH0;      //T0<font face="宋体" style="word-wrap:break-word;">计数初值为重载值</font></div><div align="left" style="word-wrap:break-word;">    ET0 = 1;        //<font face="宋体" style="word-wrap:break-word;">使能</font><font face="Consolas" style="word-wrap:break-word;">T0</font><font face="宋体" style="word-wrap:break-word;">中断</font></div><div align="left" style="word-wrap:break-word;">    TR0 = 1;        //<font face="宋体" style="word-wrap:break-word;">启动</font><font face="Consolas" style="word-wrap:break-word;">T0</font></div><div align="left" style="word-wrap:break-word;">    PIN_TXD = 0;    //<font face="宋体" style="word-wrap:break-word;">发送起始位</font></div><div align="left" style="word-wrap:break-word;">    TxdEnd = 0;     //<font face="宋体" style="word-wrap:break-word;">清零发送结束标志</font></div><div align="left" style="word-wrap:break-word;">    RxdOrTxd = 1;   //<font face="宋体" style="word-wrap:break-word;">设置当前状态为发送</font></div><div align="left" style="word-wrap:break-word;">}</div><div align="left" style="word-wrap:break-word;">void InterruptTimer0() interrupt 1  //T0<font face="宋体" style="word-wrap:break-word;">中断服务函数，处理串行发送和接收</font></div><div align="left" style="word-wrap:break-word;">{</div><div align="left" style="word-wrap:break-word;">    static unsigned char cnt = 0;   //bit<font face="宋体" style="word-wrap:break-word;">计数器，记录当前正在处理的位</font></div><div align="left" style="word-wrap:break-word;">    if (RxdOrTxd)  //<font face="宋体" style="word-wrap:break-word;">串行发送处理</font></div><div align="left" style="word-wrap:break-word;">    {</div><div align="left" style="word-wrap:break-word;">        cnt++;</div><div align="left" style="word-wrap:break-word;">        if (cnt &lt;= 8)  //<font face="宋体" style="word-wrap:break-word;">低位在先依次发送</font><font face="Consolas" style="word-wrap:break-word;">8bit</font><font face="宋体" style="word-wrap:break-word;">数据位</font></div><div align="left" style="word-wrap:break-word;">        {</div><div align="left" style="word-wrap:break-word;">            PIN_TXD = TxdBuf &amp; 0x01;</div><div align="left" style="word-wrap:break-word;">            TxdBuf &gt;&gt;= 1;</div><div align="left" style="word-wrap:break-word;">        }</div><div align="left" style="word-wrap:break-word;">        else if (cnt == 9)  //<font face="宋体" style="word-wrap:break-word;">发送停止位</font></div><div align="left" style="word-wrap:break-word;">        {</div><div align="left" style="word-wrap:break-word;">            PIN_TXD = 1;</div><div align="left" style="word-wrap:break-word;">        }</div><div align="left" style="word-wrap:break-word;">        else  //<font face="宋体" style="word-wrap:break-word;">发送结束</font></div><div align="left" style="word-wrap:break-word;">        {</div><div align="left" style="word-wrap:break-word;">            cnt = 0;    //<font face="宋体" style="word-wrap:break-word;">复位</font><font face="Consolas" style="word-wrap:break-word;">bit</font><font face="宋体" style="word-wrap:break-word;">计数器</font></div><div align="left" style="word-wrap:break-word;">            TR0 = 0;    //<font face="宋体" style="word-wrap:break-word;">关闭</font><font face="Consolas" style="word-wrap:break-word;">T0</font></div><div align="left" style="word-wrap:break-word;">            TxdEnd = 1; //<font face="宋体" style="word-wrap:break-word;">置发送结束标志</font></div><div align="left" style="word-wrap:break-word;">        }</div><div align="left" style="word-wrap:break-word;">    }</div><div align="left" style="word-wrap:break-word;">    else  //<font face="宋体" style="word-wrap:break-word;">串行接收处理</font></div><div align="left" style="word-wrap:break-word;">    {</div><div align="left" style="word-wrap:break-word;">        if (cnt == 0)     //<font face="宋体" style="word-wrap:break-word;">处理起始位</font></div><div align="left" style="word-wrap:break-word;">        {</div><div align="left" style="word-wrap:break-word;">            if (!PIN_RXD) //<font face="宋体" style="word-wrap:break-word;">起始位为</font><font face="Consolas" style="word-wrap:break-word;">0</font><font face="宋体" style="word-wrap:break-word;">时，清零接收缓冲器，准备接收数据位</font></div><div align="left" style="word-wrap:break-word;">            {</div><div align="left" style="word-wrap:break-word;">                RxdBuf = 0;</div><div align="left" style="word-wrap:break-word;">                cnt++;</div><div align="left" style="word-wrap:break-word;">            }</div><div align="left" style="word-wrap:break-word;">            else          //<font face="宋体" style="word-wrap:break-word;">起始位不为</font><font face="Consolas" style="word-wrap:break-word;">0</font><font face="宋体" style="word-wrap:break-word;">时，中止接收</font></div><div align="left" style="word-wrap:break-word;">            {</div><div align="left" style="word-wrap:break-word;">                TR0 = 0;  //<font face="宋体" style="word-wrap:break-word;">关闭</font><font face="Consolas" style="word-wrap:break-word;">T0</font></div><div align="left" style="word-wrap:break-word;">            }</div><div align="left" style="word-wrap:break-word;">        }</div><div align="left" style="word-wrap:break-word;">        else if (cnt &lt;= 8)   //<font face="宋体" style="word-wrap:break-word;">处理</font><font face="Consolas" style="word-wrap:break-word;">8</font><font face="宋体" style="word-wrap:break-word;">位数据位</font></div><div align="left" style="word-wrap:break-word;">        {</div><div align="left" style="word-wrap:break-word;">            RxdBuf &gt;&gt;= 1;    //<font face="宋体" style="word-wrap:break-word;">低位在先，所以将之前接收的位向右移</font></div><div align="left" style="word-wrap:break-word;">            if (PIN_RXD)     //<font face="宋体" style="word-wrap:break-word;">接收脚为</font><font face="Consolas" style="word-wrap:break-word;">1</font><font face="宋体" style="word-wrap:break-word;">时，缓冲器最高位置</font><font face="Consolas" style="word-wrap:break-word;">1</font><font face="宋体" style="word-wrap:break-word;">；为</font><font face="Consolas" style="word-wrap:break-word;">0</font><font face="宋体" style="word-wrap:break-word;">时不处理即仍保持移位后的</font><font face="Consolas" style="word-wrap:break-word;">0</font></div><div align="left" style="word-wrap:break-word;">            {</div><div align="left" style="word-wrap:break-word;">                RxdBuf |= 0x80;</div><div align="left" style="word-wrap:break-word;">            }</div><div align="left" style="word-wrap:break-word;">            cnt++;</div><div align="left" style="word-wrap:break-word;">        }</div><div align="left" style="word-wrap:break-word;">        else  //<font face="宋体" style="word-wrap:break-word;">停止位处理</font></div><div align="left" style="word-wrap:break-word;">        {</div><div align="left" style="word-wrap:break-word;">            cnt = 0;         //<font face="宋体" style="word-wrap:break-word;">复位</font><font face="Consolas" style="word-wrap:break-word;">bit</font><font face="宋体" style="word-wrap:break-word;">计数器</font></div><div align="left" style="word-wrap:break-word;">            TR0 = 0;         //<font face="宋体" style="word-wrap:break-word;">关闭</font><font face="Consolas" style="word-wrap:break-word;">T0</font></div><div align="left" style="word-wrap:break-word;">            if (PIN_RXD)     //<font face="宋体" style="word-wrap:break-word;">停止位为</font><font face="Consolas" style="word-wrap:break-word;">1</font><font face="宋体" style="word-wrap:break-word;">时，方能认为数据有效</font></div><div align="left" style="word-wrap:break-word;">            {</div><div align="left" style="word-wrap:break-word;">                RxdEnd = 1;  //<font face="宋体" style="word-wrap:break-word;">置接收结束标志</font></div><div align="left" style="word-wrap:break-word;">            }</div><div align="left" style="word-wrap:break-word;">        }</div><div align="left" style="word-wrap:break-word;">    }</div><div align="left" style="word-wrap:break-word;">}</div><div align="left" style="word-wrap:break-word;">    同学们通过学习我们的程序，也慢慢感受到了，程序的延时部分已经不再使用简单的<font face="Times New Roman" style="word-wrap:break-word;">delay</font><font face="宋体" style="word-wrap:break-word;">来完成了，我们要通过我们的程序编写积累，慢慢提高自己灵活运用定时器的能力。一个小小的定时器，可以帮我们完成很多很多工作。</font></div><strong style="word-wrap:break-word;font-weight:700;"><font color="#000" style="word-wrap:break-word;">11.5</font> UART<font face="黑体" style="word-wrap:break-word;">串口通信的基本应用</font></strong><strong style="word-wrap:break-word;font-weight:700;"><font color="#000" style="word-wrap:break-word;">11.5.1</font> <font color="#000" style="word-wrap:break-word;">通信的三种基本类型</font></strong><div align="left" style="word-wrap:break-word;">我们常用的通信通常可以分为单工、半双工、全双工通信。</div><div align="left" style="word-wrap:break-word;">单工就是指只允许一方向另外一方传送信息，而另一方不能回传信息。比如我们的电视遥控器，我们的收音机广播等，都是单工通信技术。</div><div align="left" style="word-wrap:break-word;">半双工是指数据可以在双方之间相互传播，但是同一时刻只能其中一方发给另外一方，比如我们的对讲机就是典型的半双工。</div><div align="left" style="word-wrap:break-word;">全双工通信就发送数据的同时也能够接受数据，两者同步进行，就如同我们的电话一样，我们说话的同时也可以听到对方的声音。</div><strong style="word-wrap:break-word;font-weight:700;"><font color="#000" style="word-wrap:break-word;">11.5.2</font> UART<font face="黑体" style="word-wrap:break-word;">模块介绍</font></strong><div align="left" style="word-wrap:break-word;">IO<font face="宋体" style="word-wrap:break-word;">口模拟串口通信，大家了解了串口通信的实质，但是我们的单片机程序却需要不停的检测扫描单片机</font><font face="Times New Roman" style="word-wrap:break-word;">IO</font><font face="宋体" style="word-wrap:break-word;">口收到的数据，大量占用了</font><font face="Times New Roman" style="word-wrap:break-word;">CPU</font><font face="宋体" style="word-wrap:break-word;">资源。这时候就会有聪明人想了，其实我们不是很关心通信的过程，我们只需要一个通信的结果，最终得到接收到的数据就行了。这样我们可以在单片机内部做一个硬件模块，让他自动接收数据，接收完了，通知我们一下就可以了，我们的</font><font face="Times New Roman" style="word-wrap:break-word;">51</font><font face="宋体" style="word-wrap:break-word;">单片机内部就存在这样一个</font><font face="Times New Roman" style="word-wrap:break-word;">UART</font><font face="宋体" style="word-wrap:break-word;">模块，要正确使用它，当然还得先把对应的特殊功能寄存器配置好。</font></div><div align="left" style="word-wrap:break-word;">51<font face="宋体" style="word-wrap:break-word;">单片机的</font><font face="Times New Roman" style="word-wrap:break-word;">UART</font><font face="宋体" style="word-wrap:break-word;">串行口的结构由串行口控制寄存器</font><font face="Times New Roman" style="word-wrap:break-word;">SCON</font><font face="宋体" style="word-wrap:break-word;">、发送和接收电路三部分构成，先来了解一下串口控制寄存器</font><font face="Times New Roman" style="word-wrap:break-word;">SCON</font><font face="宋体" style="word-wrap:break-word;">。</font></div><div align="center" style="word-wrap:break-word;">表11-1 SCON--串行控制寄存器的位分配<font face="Times New Roman" style="word-wrap:break-word;">(</font><font face="宋体" style="word-wrap:break-word;">地址：</font>98H)</div><div align="left" style="word-wrap:break-word;">       可位寻址；复位值：<font face="Times New Roman" style="word-wrap:break-word;">0x00</font><font face="宋体" style="word-wrap:break-word;">；复位源：任何复位</font></div><table cellspacing="0" style="font-size:inherit;font-weight:inherit;font-style:inherit;font-variant:inherit;word-wrap:break-word;empty-cells:show;border-collapse:collapse;border:1px solid rgb(227, 237, 245);width:100%;table-layout:auto;"><tbody style="word-wrap:break-word;"><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="62"><div align="center" style="word-wrap:break-word;">位</div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="62"><div align="center" style="word-wrap:break-word;">7</div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="62"><div align="center" style="word-wrap:break-word;">6</div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="62"><div align="center" style="word-wrap:break-word;">5</div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="62"><div align="center" style="word-wrap:break-word;">4</div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="62"><div align="center" style="word-wrap:break-word;">3</div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="62"><div align="center" style="word-wrap:break-word;">2</div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="62"><div align="center" style="word-wrap:break-word;">1</div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="62"><div align="center" style="word-wrap:break-word;">0</div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="62"><div align="center" style="word-wrap:break-word;">符号</div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="62"><div align="center" style="word-wrap:break-word;">SM0</div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="62"><div align="center" style="word-wrap:break-word;">SM1</div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="62"><div align="center" style="word-wrap:break-word;">SM2</div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="62"><div align="center" style="word-wrap:break-word;">REN</div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="62"><div align="center" style="word-wrap:break-word;">TB8</div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="62"><div align="center" style="word-wrap:break-word;">RB8</div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="62"><div align="center" style="word-wrap:break-word;">TI</div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="62"><div align="center" style="word-wrap:break-word;">RI</div></td></tr></tbody></table><div align="center" style="word-wrap:break-word;">表11-2 SCON--串行控制寄存器的位描述</div><table cellspacing="0" style="font-size:inherit;font-weight:inherit;font-style:inherit;font-variant:inherit;word-wrap:break-word;empty-cells:show;border-collapse:collapse;border:1px solid rgb(227, 237, 245);width:100%;table-layout:auto;"><tbody style="word-wrap:break-word;"><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">位</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="49"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">符号</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="470"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">描述</div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">7</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="49"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">SM0</div></div></td><td rowspan="2" style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="470"><div align="center" style="word-wrap:break-word;"><div align="left" style="word-wrap:break-word;">这两位共同决定了串口通信的模式0<font face="宋体" style="word-wrap:break-word;">到模式</font><font face="Times New Roman" style="word-wrap:break-word;">3</font><font face="宋体" style="word-wrap:break-word;">共</font><font face="Times New Roman" style="word-wrap:break-word;">4</font><font face="宋体" style="word-wrap:break-word;">种模式</font>。我们最常用的就是模式1<font face="宋体" style="word-wrap:break-word;">，也就是</font><font face="Times New Roman" style="word-wrap:break-word;">SM0=0</font><font face="宋体" style="word-wrap:break-word;">，</font><font face="Times New Roman" style="word-wrap:break-word;">SM1=1</font><font face="宋体" style="word-wrap:break-word;">，下边我们重点就讲模式</font><font face="Times New Roman" style="word-wrap:break-word;">1</font><font face="宋体" style="word-wrap:break-word;">，其他模式从略。</font></div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">6</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="49"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">SM1</div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">5</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="49"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">SM2</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="470"><div align="center" style="word-wrap:break-word;"><div align="left" style="word-wrap:break-word;">多机通信控制位(<font face="宋体" style="word-wrap:break-word;">很少用</font><font face="Times New Roman" style="word-wrap:break-word;">)</font><font face="宋体" style="word-wrap:break-word;">，模式</font><font face="Times New Roman" style="word-wrap:break-word;">1</font><font face="宋体" style="word-wrap:break-word;">直接清零。</font></div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">4</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="49"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">REN</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="470"><div align="center" style="word-wrap:break-word;"><div align="left" style="word-wrap:break-word;">使能串行接收。由软件置位使能接收，软件清零则禁止接收</div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">3</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="49"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">TB8</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="470"><div align="center" style="word-wrap:break-word;"><div align="left" style="word-wrap:break-word;">模式2<font face="宋体" style="word-wrap:break-word;">和</font><font face="Times New Roman" style="word-wrap:break-word;">3</font><font face="宋体" style="word-wrap:break-word;">中将要发送的第</font><font face="Times New Roman" style="word-wrap:break-word;">9</font><font face="宋体" style="word-wrap:break-word;">位数据</font><font face="Times New Roman" style="word-wrap:break-word;">(</font><font face="宋体" style="word-wrap:break-word;">很少用</font><font face="Times New Roman" style="word-wrap:break-word;">)</font></div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">2</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="49"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">RB8</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="470"><div align="center" style="word-wrap:break-word;"><div align="left" style="word-wrap:break-word;">模式2<font face="宋体" style="word-wrap:break-word;">和</font><font face="Times New Roman" style="word-wrap:break-word;">3</font><font face="宋体" style="word-wrap:break-word;">中接收第</font><font face="Times New Roman" style="word-wrap:break-word;">9</font><font face="宋体" style="word-wrap:break-word;">位数据</font><font face="Times New Roman" style="word-wrap:break-word;">(</font><font face="宋体" style="word-wrap:break-word;">很少用</font><font face="Times New Roman" style="word-wrap:break-word;">)</font><font face="宋体" style="word-wrap:break-word;">，模式</font><font face="Times New Roman" style="word-wrap:break-word;">1</font><font face="宋体" style="word-wrap:break-word;">用来接收停止位</font></div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">1</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="49"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">TI</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="470"><div align="center" style="word-wrap:break-word;"><div align="left" style="word-wrap:break-word;">发送中断标志位，模式1<font face="宋体" style="word-wrap:break-word;">下，</font>在数据位最后一位发送结束，开始发送停止位时由硬件自动置1<font face="宋体" style="word-wrap:break-word;">，必须通过软件清零。也就是说，再发送前我们清零</font><font face="Times New Roman" style="word-wrap:break-word;">TI</font><font face="宋体" style="word-wrap:break-word;">，发送数据，数据发送到停止位时，</font><font face="Times New Roman" style="word-wrap:break-word;">TI</font><font face="宋体" style="word-wrap:break-word;">硬件置</font><font face="Times New Roman" style="word-wrap:break-word;">1</font><font face="宋体" style="word-wrap:break-word;">，方便我们</font><font face="Times New Roman" style="word-wrap:break-word;">CPU</font><font face="宋体" style="word-wrap:break-word;">查询发送完毕状态。</font></div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">0</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="49"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">RI</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="470"><div align="center" style="word-wrap:break-word;"><div align="left" style="word-wrap:break-word;">接收中断标志位，当接收电路接收到停止位的中间位置时，RI<font face="宋体" style="word-wrap:break-word;">由硬件置</font><font face="Times New Roman" style="word-wrap:break-word;">1</font><font face="宋体" style="word-wrap:break-word;">。也就是说，接收数据之前我们必须清零</font><font face="Times New Roman" style="word-wrap:break-word;">RI</font><font face="宋体" style="word-wrap:break-word;">，接受数据到停止位的中间位置时，</font><font face="Times New Roman" style="word-wrap:break-word;">RI</font><font face="宋体" style="word-wrap:break-word;">硬件置</font><font face="Times New Roman" style="word-wrap:break-word;">1</font><font face="宋体" style="word-wrap:break-word;">，方便我们</font><font face="Times New Roman" style="word-wrap:break-word;">CPU</font><font face="宋体" style="word-wrap:break-word;">查询到接收状态。</font></div></div></td></tr></tbody></table><div align="left" style="word-wrap:break-word;">前边学了那么多寄存器的配置，相信<font face="Times New Roman" style="word-wrap:break-word;">SCON</font><font face="宋体" style="word-wrap:break-word;">这个地方，对于大多数同学来说已经不是难点了，应该能看懂并且可以自己配置了。对于串口的四种模式，模式</font><font face="Times New Roman" style="word-wrap:break-word;">1</font><font face="宋体" style="word-wrap:break-word;">是最常用的，就是我们前边提到的</font><font face="Times New Roman" style="word-wrap:break-word;">1</font><font face="宋体" style="word-wrap:break-word;">位起始位，</font><font face="Times New Roman" style="word-wrap:break-word;">8</font><font face="宋体" style="word-wrap:break-word;">位数据位和</font><font face="Times New Roman" style="word-wrap:break-word;">1</font><font face="宋体" style="word-wrap:break-word;">位结束位。因为我们的教程不同于教科书，只要有的功能都一一介绍，我们只介绍实用的技术，所以其他</font><font face="Times New Roman" style="word-wrap:break-word;">3</font><font face="宋体" style="word-wrap:break-word;">种模式，真正遇到需要使用的时候大家再去查资料就行。</font></div><div align="left" style="word-wrap:break-word;">在我们使用<font face="Times New Roman" style="word-wrap:break-word;">IO</font><font face="宋体" style="word-wrap:break-word;">口模拟串口通信的时候，我们串口的波特率是使用定时器</font><font face="Times New Roman" style="word-wrap:break-word;">0</font><font face="宋体" style="word-wrap:break-word;">的中断体现出来的。在实际串口模块中，有一个专门的波特率发生器用来控制发送数据的速度和读取接收数据的速度。对于</font><font face="Times New Roman" style="word-wrap:break-word;">STC89C52RC</font><font face="宋体" style="word-wrap:break-word;">单片机来讲，这个波特率发生器只能由定时器</font><font face="Times New Roman" style="word-wrap:break-word;">1</font><font face="宋体" style="word-wrap:break-word;">或定时器</font><font face="Times New Roman" style="word-wrap:break-word;">2</font><font face="宋体" style="word-wrap:break-word;">产生，而不能由定时器</font><font face="Times New Roman" style="word-wrap:break-word;">0</font><font face="宋体" style="word-wrap:break-word;">产生，这和我们模拟的通信是完全不同的概念。</font></div><div align="left" style="word-wrap:break-word;">如果用定时器<font face="Times New Roman" style="word-wrap:break-word;">2</font><font face="宋体" style="word-wrap:break-word;">，需要配置额外的寄存器，默认是使用定时器</font><font face="Times New Roman" style="word-wrap:break-word;">1</font><font face="宋体" style="word-wrap:break-word;">的，我们本章内容主要是使用定时器</font><font face="Times New Roman" style="word-wrap:break-word;">1</font><font face="宋体" style="word-wrap:break-word;">作为波特率发生器来讲解，方式</font><font face="Times New Roman" style="word-wrap:break-word;">1</font><font face="宋体" style="word-wrap:break-word;">下的波特率发生器必须使用定时器</font><font face="Times New Roman" style="word-wrap:break-word;">1</font><font face="宋体" style="word-wrap:break-word;">的模式</font><font face="Times New Roman" style="word-wrap:break-word;">2</font><font face="宋体" style="word-wrap:break-word;">，也就是自动重装载模式，定时器的初值具体的计算公式是：</font></div><div align="left" style="word-wrap:break-word;">           TH1 = TL1 = 256 - 晶振值/12 /2/16 /波特率</div><div align="left" style="word-wrap:break-word;">和波特率有关的还有一个寄存器，是一个电源管理寄存器PCON，他的最高位可以把波特率提高一倍，也就是如果写PCON |=0x80<font face="宋体" style="word-wrap:break-word;">以后，计算公式就成了</font></div><div align="left" style="word-wrap:break-word;">           TH1 = TL1 = 256 - 晶振值/12 /16 /波特率</div><div align="left" style="word-wrap:break-word;">数字的含义这里解释一下，<font face="Times New Roman" style="word-wrap:break-word;">256</font><font face="宋体" style="word-wrap:break-word;">是</font><font face="Times New Roman" style="word-wrap:break-word;">8</font><font face="宋体" style="word-wrap:break-word;">位数据的溢出值，也就是</font><font face="Times New Roman" style="word-wrap:break-word;">TL1</font><font face="宋体" style="word-wrap:break-word;">的溢出值，</font><font face="Times New Roman" style="word-wrap:break-word;">11059200</font><font face="宋体" style="word-wrap:break-word;">就是我们板子上单片机的晶振，</font><font face="Times New Roman" style="word-wrap:break-word;">12</font><font face="宋体" style="word-wrap:break-word;">是说</font><font face="Times New Roman" style="word-wrap:break-word;">1</font><font face="宋体" style="word-wrap:break-word;">个机器周期是</font><font face="Times New Roman" style="word-wrap:break-word;">12</font><font face="宋体" style="word-wrap:break-word;">个时钟周期，值得关注的是这个</font><font face="Times New Roman" style="word-wrap:break-word;">16</font><font face="宋体" style="word-wrap:break-word;">，重点说明。我们在</font><font face="Times New Roman" style="word-wrap:break-word;">IO</font><font face="宋体" style="word-wrap:break-word;">口模拟串口通信接收数据的时候，我们采集的是这一位数据的中间位置，而实际上串口模块比我们模拟的要复杂和精确一些。他采取的方式是把一位信号采集</font><font face="Times New Roman" style="word-wrap:break-word;">16</font><font face="宋体" style="word-wrap:break-word;">次，其中第</font><font face="Times New Roman" style="word-wrap:break-word;">7</font><font face="宋体" style="word-wrap:break-word;">、</font><font face="Times New Roman" style="word-wrap:break-word;">8</font><font face="宋体" style="word-wrap:break-word;">、</font><font face="Times New Roman" style="word-wrap:break-word;">9</font><font face="宋体" style="word-wrap:break-word;">次取出来，这三次中其中两次如果是高电平，那么就认定这一位数据是</font><font face="Times New Roman" style="word-wrap:break-word;">1</font><font face="宋体" style="word-wrap:break-word;">，如果两次是低电平，那么就认定这一位是</font><font face="Times New Roman" style="word-wrap:break-word;">0</font><font face="宋体" style="word-wrap:break-word;">，这样一旦受到意外干扰读错一次数据，也依然可以保证最终数据的正确性。</font></div><div align="left" style="word-wrap:break-word;">了解了串口采集模式，在这里要给大家留一个思考题。“晶振值<font face="Times New Roman" style="word-wrap:break-word;">/12/2/16/</font><font face="宋体" style="word-wrap:break-word;">波特率”这个地方计算的时候，出现不能除尽，或者出现小数怎么办，允许出现多大的偏差？把这部分理解了，也就理解了我们的晶振为何使用</font><font face="Times New Roman" style="word-wrap:break-word;">11.0592M</font><font face="宋体" style="word-wrap:break-word;">了。</font></div><div align="left" style="word-wrap:break-word;">串口通信的发送和接收电路，我们主要了解一下他们在物理上有<font face="Times New Roman" style="word-wrap:break-word;">2</font><font face="宋体" style="word-wrap:break-word;">个名字相同的</font><font face="Times New Roman" style="word-wrap:break-word;">SBUF</font><font face="宋体" style="word-wrap:break-word;">寄存器，他们的地址也都是</font><font face="Times New Roman" style="word-wrap:break-word;">99H</font><font face="宋体" style="word-wrap:break-word;">，但是一个用来做发送缓冲，一个用来做接收缓冲。意思就是说，有</font><font face="Times New Roman" style="word-wrap:break-word;">2</font><font face="宋体" style="word-wrap:break-word;">个房间，两个房间的门牌号是一样的，其中一个只出人不进人，另外一个只进人不出人，这样的话，我们就可以实现</font><font face="Times New Roman" style="word-wrap:break-word;">UART</font><font face="宋体" style="word-wrap:break-word;">的全双工通信，相互之间不会产生干扰。但是在逻辑上呢，我们每次只操作</font><font face="Times New Roman" style="word-wrap:break-word;">SBUF</font><font face="宋体" style="word-wrap:break-word;">，单片机会自动根据对它执行的是“读”还是“写”操作来选择是接收</font><font face="Times New Roman" style="word-wrap:break-word;">SBUF</font><font face="宋体" style="word-wrap:break-word;">还是发送</font><font face="Times New Roman" style="word-wrap:break-word;">SBUF</font><font face="宋体" style="word-wrap:break-word;">，后边通过程序，我们就会彻底了解这个问题。</font></div><strong style="word-wrap:break-word;font-weight:700;"><font color="#000" style="word-wrap:break-word;">11.5.3</font> UART<font face="黑体" style="word-wrap:break-word;">串口程序</font></strong><div align="left" style="word-wrap:break-word;">一般情况下，我们编写串口通信程序的基本步骤如下所示：</div><div align="left" style="word-wrap:break-word;">1、配置串口为模式<font face="Times New Roman" style="word-wrap:break-word;">1</font><font face="宋体" style="word-wrap:break-word;">。</font></div><div align="left" style="word-wrap:break-word;">2、配置定时器<font face="Times New Roman" style="word-wrap:break-word;">T1</font><font face="宋体" style="word-wrap:break-word;">为模式</font><font face="Times New Roman" style="word-wrap:break-word;">2</font><font face="宋体" style="word-wrap:break-word;">，即自动重装模式。</font></div><div align="left" style="word-wrap:break-word;">3、确定波特率大小，计算定时器<font face="Times New Roman" style="word-wrap:break-word;">TH1</font><font face="宋体" style="word-wrap:break-word;">和</font><font face="Times New Roman" style="word-wrap:break-word;">TL1</font><font face="宋体" style="word-wrap:break-word;">的初值，如果有需要可以使用</font><font face="Times New Roman" style="word-wrap:break-word;">PCON</font><font face="宋体" style="word-wrap:break-word;">进行波特率加倍。</font></div><div align="left" style="word-wrap:break-word;">4、打开定时器控制寄存器<font face="Times New Roman" style="word-wrap:break-word;">TR1</font><font face="宋体" style="word-wrap:break-word;">，让定时器跑起来。</font></div><div align="left" style="word-wrap:break-word;">这个地方还要特别注意一下，就是在使用<font face="Times New Roman" style="word-wrap:break-word;">T1</font><font face="宋体" style="word-wrap:break-word;">做波特率发生器的时候，千万不要再使能</font><font face="Times New Roman" style="word-wrap:break-word;">T1</font><font face="宋体" style="word-wrap:break-word;">的中断了。</font></div><div align="left" style="word-wrap:break-word;">我们先来看一下由<font face="Times New Roman" style="word-wrap:break-word;">IO</font><font face="宋体" style="word-wrap:break-word;">口模拟串口通信直接改为使用硬件</font><font face="Times New Roman" style="word-wrap:break-word;">UART</font><font face="宋体" style="word-wrap:break-word;">模块时程序代码，看看程序是不是简单了很多，因为大部分的工作硬件模块都替我们做了。程序功能和</font><font face="Times New Roman" style="word-wrap:break-word;">IO</font><font face="宋体" style="word-wrap:break-word;">口模拟的是完全一样的。</font></div><div align="left" style="word-wrap:break-word;">#include &lt;reg52.h&gt;</div><div align="left" style="word-wrap:break-word;">void ConfigUART(unsigned int baud);</div><div align="left" style="word-wrap:break-word;">void main ()</div><div align="left" style="word-wrap:break-word;">{</div><div align="left" style="word-wrap:break-word;">    ConfigUART(9600);  //<font face="宋体" style="word-wrap:break-word;">配置波特率为</font><font face="Consolas" style="word-wrap:break-word;">9600</font></div><br style="word-wrap:break-word;"/><div align="left" style="word-wrap:break-word;">    while(1)</div><div align="left" style="word-wrap:break-word;">    {</div><div align="left" style="word-wrap:break-word;">        while (!RI);     //<font face="宋体" style="word-wrap:break-word;">等待接收完成</font></div><div align="left" style="word-wrap:break-word;">        RI = 0;          //<font face="宋体" style="word-wrap:break-word;">清零接收中断标志位</font></div><div align="left" style="word-wrap:break-word;">        SBUF = SBUF + 1; //<font face="宋体" style="word-wrap:break-word;">接收到的数据</font><font face="Consolas" style="word-wrap:break-word;">+1</font><font face="宋体" style="word-wrap:break-word;">后，发送回去</font>；</div><div align="left" style="word-wrap:break-word;">                           //等号左边的SBUF<font face="宋体" style="word-wrap:break-word;">实际上就是发送</font><font face="Consolas" style="word-wrap:break-word;">SBUF</font><font face="宋体" style="word-wrap:break-word;">，因为对它的操作是“写”；</font></div><div align="left" style="word-wrap:break-word;">                           //<font face="宋体" style="word-wrap:break-word;">等号右边的是接收</font><font face="Consolas" style="word-wrap:break-word;">SBUF</font><font face="宋体" style="word-wrap:break-word;">，因为对它的操作是“读”。</font></div><div align="left" style="word-wrap:break-word;">        while (!TI);     //<font face="宋体" style="word-wrap:break-word;">等待发送完成</font></div><div align="left" style="word-wrap:break-word;">        TI = 0;          //<font face="宋体" style="word-wrap:break-word;">清零发送中断标志位</font></div><div align="left" style="word-wrap:break-word;">    }</div><div align="left" style="word-wrap:break-word;">}</div><div align="left" style="word-wrap:break-word;">void ConfigUART(unsigned int baud)  //<font face="宋体" style="word-wrap:break-word;">串口配置函数，</font><font face="Consolas" style="word-wrap:break-word;">baud</font><font face="宋体" style="word-wrap:break-word;">为波特率</font></div><div align="left" style="word-wrap:break-word;">{</div><div align="left" style="word-wrap:break-word;">    SCON = 0x50;   //<font face="宋体" style="word-wrap:break-word;">配置串口为模式</font><font face="Consolas" style="word-wrap:break-word;">1</font></div><div align="left" style="word-wrap:break-word;">    TMOD &amp;= 0x0F;  //<font face="宋体" style="word-wrap:break-word;">清零</font><font face="Consolas" style="word-wrap:break-word;">T1</font><font face="宋体" style="word-wrap:break-word;">的控制位</font></div><div align="left" style="word-wrap:break-word;">    TMOD |= 0x20;  //<font face="宋体" style="word-wrap:break-word;">配置</font><font face="Consolas" style="word-wrap:break-word;">T1</font><font face="宋体" style="word-wrap:break-word;">为模式</font><font face="Consolas" style="word-wrap:break-word;">2</font></div><div align="left" style="word-wrap:break-word;">    TH1 = 256 - (11059200/12/32) / baud;  //<font face="宋体" style="word-wrap:break-word;">计算</font><font face="Consolas" style="word-wrap:break-word;">T1</font><font face="宋体" style="word-wrap:break-word;">重载值</font></div><div align="left" style="word-wrap:break-word;">    TL1 = TH1;     //<font face="宋体" style="word-wrap:break-word;">初值等于重载值</font></div><div align="left" style="word-wrap:break-word;">    ET1 = 0;       //<font face="宋体" style="word-wrap:break-word;">禁止</font><font face="Consolas" style="word-wrap:break-word;">T1</font><font face="宋体" style="word-wrap:break-word;">中断</font></div><div align="left" style="word-wrap:break-word;">    TR1 = 1;       //<font face="宋体" style="word-wrap:break-word;">启动</font><font face="Consolas" style="word-wrap:break-word;">T1</font></div><div align="left" style="word-wrap:break-word;">}</div><div align="left" style="word-wrap:break-word;">当然了，这个程序还是在主循环里等待接收中断标志位和发送中断标志位的方法来编写的，而实际工程开发中，当然就不能这么干了，所以就用到了串口中断，来看一下程序。</div><div align="left" style="word-wrap:break-word;">#include &lt;reg52.h&gt;</div><div align="left" style="word-wrap:break-word;">void ConfigUART(unsigned int baud);</div><div align="left" style="word-wrap:break-word;">void main ()</div><div align="left" style="word-wrap:break-word;">{</div><div align="left" style="word-wrap:break-word;">    ConfigUART(9600);  //<font face="宋体" style="word-wrap:break-word;">配置波特率为</font><font face="Consolas" style="word-wrap:break-word;">9600</font></div><br style="word-wrap:break-word;"/><div align="left" style="word-wrap:break-word;">    while(1);</div><div align="left" style="word-wrap:break-word;">}</div><div align="left" style="word-wrap:break-word;">void ConfigUART(unsigned int baud)  //<font face="宋体" style="word-wrap:break-word;">串口配置函数，</font><font face="Consolas" style="word-wrap:break-word;">baud</font><font face="宋体" style="word-wrap:break-word;">为波特率</font></div><div align="left" style="word-wrap:break-word;">{</div><div align="left" style="word-wrap:break-word;">    SCON = 0x50;   //<font face="宋体" style="word-wrap:break-word;">配置串口为模式</font><font face="Consolas" style="word-wrap:break-word;">1</font></div><div align="left" style="word-wrap:break-word;">    TMOD &amp;= 0x0F;  //<font face="宋体" style="word-wrap:break-word;">清零</font><font face="Consolas" style="word-wrap:break-word;">T1</font><font face="宋体" style="word-wrap:break-word;">的控制位</font></div><div align="left" style="word-wrap:break-word;">    TMOD |= 0x20;  //<font face="宋体" style="word-wrap:break-word;">配置</font><font face="Consolas" style="word-wrap:break-word;">T1</font><font face="宋体" style="word-wrap:break-word;">为模式</font><font face="Consolas" style="word-wrap:break-word;">2</font></div><div align="left" style="word-wrap:break-word;">    TH1 = 256 - (11059200/12/32) / baud;  //<font face="宋体" style="word-wrap:break-word;">计算</font><font face="Consolas" style="word-wrap:break-word;">T1</font><font face="宋体" style="word-wrap:break-word;">重载值</font></div><div align="left" style="word-wrap:break-word;">    TL1 = TH1;     //<font face="宋体" style="word-wrap:break-word;">初值等于重载值</font></div><div align="left" style="word-wrap:break-word;">    ET1 = 0;       //<font face="宋体" style="word-wrap:break-word;">禁止</font><font face="Consolas" style="word-wrap:break-word;">T1</font><font face="宋体" style="word-wrap:break-word;">中断</font></div><div align="left" style="word-wrap:break-word;">    TR1 = 1;       //<font face="宋体" style="word-wrap:break-word;">启动</font><font face="Consolas" style="word-wrap:break-word;">T1</font></div><div align="left" style="word-wrap:break-word;">    ES = 1;   //<font face="宋体" style="word-wrap:break-word;">打开串口中断</font></div><div align="left" style="word-wrap:break-word;">    EA = 1;   //<font face="宋体" style="word-wrap:break-word;">打开总中断</font></div><div align="left" style="word-wrap:break-word;">}</div><div align="left" style="word-wrap:break-word;">void InterruptUART() interrupt 4</div><div align="left" style="word-wrap:break-word;">{</div><div align="left" style="word-wrap:break-word;">    if (RI)  //<font face="宋体" style="word-wrap:break-word;">接收到字节</font></div><div align="left" style="word-wrap:break-word;">    {</div><div align="left" style="word-wrap:break-word;">        RI = 0;  //<font face="宋体" style="word-wrap:break-word;">手动清零接收中断标志位</font></div><div align="left" style="word-wrap:break-word;">        SBUF = SBUF + 1;//<font face="宋体" style="word-wrap:break-word;">接收数据</font><font face="Consolas" style="word-wrap:break-word;">+1</font><font face="宋体" style="word-wrap:break-word;">发回去</font>，左边为发送SBUF<font face="宋体" style="word-wrap:break-word;">，右边为接收</font><font face="Consolas" style="word-wrap:break-word;">SBUF</font><font face="宋体" style="word-wrap:break-word;">。</font></div><div align="left" style="word-wrap:break-word;">    }</div><div align="left" style="word-wrap:break-word;">    if (TI)  //<font face="宋体" style="word-wrap:break-word;">字节发送完毕</font></div><div align="left" style="word-wrap:break-word;">    {</div><div align="left" style="word-wrap:break-word;">        TI = 0;  //<font face="宋体" style="word-wrap:break-word;">手动清零发送中断标志位</font></div><div align="left" style="word-wrap:break-word;">    }  </div><div align="left" style="word-wrap:break-word;">}</div><div align="left" style="word-wrap:break-word;">    大家可以试验一下试试，看看是不是和前边用<font face="Consolas" style="word-wrap:break-word;">IO</font><font face="宋体" style="word-wrap:break-word;">口模拟通信实现的效果一致，而主循环却完全空出来了，我们就可以随意添加其它功能代码进去。</font></div><strong style="word-wrap:break-word;font-weight:700;"><font color="#000" style="word-wrap:break-word;">11.6</font> <font color="#000" style="word-wrap:break-word;">字符和数据之间的转换</font></strong><div align="left" style="word-wrap:break-word;">我们学串口通信的应用主要是实现单片机和电脑之间的信息互发，可以用电脑控制单片机的一些信息，可以把单片机的一些信息状况发给电脑上的软件。下面我们就做一个简单的例程，实现单片机串口调试助手发送的数据，在我们开发板上的数码管上显示出来。</div><div align="left" style="word-wrap:break-word;">#include &lt;reg52.h&gt;</div><div align="left" style="word-wrap:break-word;">sbit ADDR3 = P1^3;      //LED<font face="宋体" style="word-wrap:break-word;">选择地址线</font><font face="Consolas" style="word-wrap:break-word;">3</font></div><div align="left" style="word-wrap:break-word;">sbit ENLED = P1^4;      //LED<font face="宋体" style="word-wrap:break-word;">总使能引脚</font></div><div align="left" style="word-wrap:break-word;">unsigned char code LedChar[] = {  //<font face="宋体" style="word-wrap:break-word;">数码管显示字符转换表</font></div><div align="left" style="word-wrap:break-word;">    0xC0, 0xF9, 0xA4, 0xB0, 0x99, 0x92, 0x82, 0xF8,</div><div align="left" style="word-wrap:break-word;">    0x80, 0x90, 0x88, 0x83, 0xC6, 0xA1, 0x86, 0x8E</div><div align="left" style="word-wrap:break-word;">};</div><div align="left" style="word-wrap:break-word;">unsigned char LedBuff[6] = {  //<font face="宋体" style="word-wrap:break-word;">数码管</font></div><div align="left" style="word-wrap:break-word;">    0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF</div><div align="left" style="word-wrap:break-word;">};</div><div align="left" style="word-wrap:break-word;">unsigned char T0RH = 0;  //T0<font face="宋体" style="word-wrap:break-word;">重载值的高字节</font></div><div align="left" style="word-wrap:break-word;">unsigned char T0RL = 0;  //T0<font face="宋体" style="word-wrap:break-word;">重载值的低字节</font></div><div align="left" style="word-wrap:break-word;">unsigned char RxdByte = 0;  //<font face="宋体" style="word-wrap:break-word;">串口接收到的字节</font></div><div align="left" style="word-wrap:break-word;">void ConfigTimer0(unsigned int ms);</div><div align="left" style="word-wrap:break-word;">void ConfigUART(unsigned int baud);</div><div align="left" style="word-wrap:break-word;">void main ()</div><div align="left" style="word-wrap:break-word;">{</div><div align="left" style="word-wrap:break-word;">    P0 = 0xFF;  //P0<font face="宋体" style="word-wrap:break-word;">口初始化</font></div><div align="left" style="word-wrap:break-word;">    ADDR3 = 1;  //<font face="宋体" style="word-wrap:break-word;">选择数码管</font></div><div align="left" style="word-wrap:break-word;">    ENLED = 0;  //LED<font face="宋体" style="word-wrap:break-word;">总使能</font></div><div align="left" style="word-wrap:break-word;">    EA = 1;     //<font face="宋体" style="word-wrap:break-word;">开总中断</font></div><div align="left" style="word-wrap:break-word;">    ConfigTimer0(1);   //<font face="宋体" style="word-wrap:break-word;">配置</font><font face="Consolas" style="word-wrap:break-word;">T0</font><font face="宋体" style="word-wrap:break-word;">定时</font><font face="Consolas" style="word-wrap:break-word;">1ms</font></div><div align="left" style="word-wrap:break-word;">    ConfigUART(9600);  //<font face="宋体" style="word-wrap:break-word;">配置波特率为</font><font face="Consolas" style="word-wrap:break-word;">9600</font></div><br style="word-wrap:break-word;"/><div align="left" style="word-wrap:break-word;">    while(1)</div><div align="left" style="word-wrap:break-word;">    {   //<font face="宋体" style="word-wrap:break-word;">将接收字节在数码管上以十六进制形式显示出来</font></div><div align="left" style="word-wrap:break-word;">        LedBuff[0] = LedChar[RxdByte &amp; 0x0F];</div><div align="left" style="word-wrap:break-word;">        LedBuff[1] = LedChar[RxdByte &gt;&gt; 4];</div><div align="left" style="word-wrap:break-word;">    }</div><div align="left" style="word-wrap:break-word;">}</div><div align="left" style="word-wrap:break-word;">void ConfigTimer0(unsigned int ms)  //T0<font face="宋体" style="word-wrap:break-word;">配置函数</font></div><div align="left" style="word-wrap:break-word;">{</div><div align="left" style="word-wrap:break-word;">    unsigned long tmp;</div><br style="word-wrap:break-word;"/><div align="left" style="word-wrap:break-word;">    tmp = 11059200 / 12;      //<font face="宋体" style="word-wrap:break-word;">定时器计数频率</font></div><div align="left" style="word-wrap:break-word;">    tmp = (tmp * ms) / 1000;  //<font face="宋体" style="word-wrap:break-word;">计算所需的计数值</font></div><div align="left" style="word-wrap:break-word;">    tmp = 65536 - tmp;        //<font face="宋体" style="word-wrap:break-word;">计算定时器重载值</font></div><div align="left" style="word-wrap:break-word;">    tmp = tmp + 31;           //<font face="宋体" style="word-wrap:break-word;">修正中断响应延时造成的误差</font></div><br style="word-wrap:break-word;"/><div align="left" style="word-wrap:break-word;">    T0RH = (unsigned char)(tmp &gt;&gt; 8);  //<font face="宋体" style="word-wrap:break-word;">定时器重载值拆分为高低字节</font></div><div align="left" style="word-wrap:break-word;">    T0RL = (unsigned char)tmp;</div><div align="left" style="word-wrap:break-word;">    TMOD &amp;= 0xF0;   //<font face="宋体" style="word-wrap:break-word;">清零</font><font face="Consolas" style="word-wrap:break-word;">T0</font><font face="宋体" style="word-wrap:break-word;">的控制位</font></div><div align="left" style="word-wrap:break-word;">    TMOD |= 0x01;   //<font face="宋体" style="word-wrap:break-word;">配置</font><font face="Consolas" style="word-wrap:break-word;">T0</font><font face="宋体" style="word-wrap:break-word;">为模式</font><font face="Consolas" style="word-wrap:break-word;">1</font></div><div align="left" style="word-wrap:break-word;">    TH0 = T0RH;     //<font face="宋体" style="word-wrap:break-word;">加载</font><font face="Consolas" style="word-wrap:break-word;">T0</font><font face="宋体" style="word-wrap:break-word;">重载值</font></div><div align="left" style="word-wrap:break-word;">    TL0 = T0RL;</div><div align="left" style="word-wrap:break-word;">    ET0 = 1;        //<font face="宋体" style="word-wrap:break-word;">使能</font><font face="Consolas" style="word-wrap:break-word;">T0</font><font face="宋体" style="word-wrap:break-word;">中断</font></div><div align="left" style="word-wrap:break-word;">    TR0 = 1;        //<font face="宋体" style="word-wrap:break-word;">启动</font><font face="Consolas" style="word-wrap:break-word;">T0</font></div><div align="left" style="word-wrap:break-word;">}</div><div align="left" style="word-wrap:break-word;">void ConfigUART(unsigned int baud)  //<font face="宋体" style="word-wrap:break-word;">串口配置函数，</font><font face="Consolas" style="word-wrap:break-word;">baud</font><font face="宋体" style="word-wrap:break-word;">为波特率</font></div><div align="left" style="word-wrap:break-word;">{</div><div align="left" style="word-wrap:break-word;">    SCON = 0x50;   //<font face="宋体" style="word-wrap:break-word;">配置串口为模式</font><font face="Consolas" style="word-wrap:break-word;">1</font></div><div align="left" style="word-wrap:break-word;">    TMOD &amp;= 0x0F;  //<font face="宋体" style="word-wrap:break-word;">清零</font><font face="Consolas" style="word-wrap:break-word;">T1</font><font face="宋体" style="word-wrap:break-word;">的控制位</font></div><div align="left" style="word-wrap:break-word;">    TMOD |= 0x20;  //<font face="宋体" style="word-wrap:break-word;">配置</font><font face="Consolas" style="word-wrap:break-word;">T1</font><font face="宋体" style="word-wrap:break-word;">为模式</font><font face="Consolas" style="word-wrap:break-word;">2</font></div><div align="left" style="word-wrap:break-word;">    TH1 = 256 - (11059200/12/32) / baud;  //<font face="宋体" style="word-wrap:break-word;">计算</font><font face="Consolas" style="word-wrap:break-word;">T1</font><font face="宋体" style="word-wrap:break-word;">重载值</font></div><div align="left" style="word-wrap:break-word;">    TL1 = TH1;     //<font face="宋体" style="word-wrap:break-word;">初值等于重载值</font></div><div align="left" style="word-wrap:break-word;">    ET1 = 0;       //<font face="宋体" style="word-wrap:break-word;">禁止</font><font face="Consolas" style="word-wrap:break-word;">T1</font><font face="宋体" style="word-wrap:break-word;">中断</font></div><div align="left" style="word-wrap:break-word;">    ES  = 1;       //<font face="宋体" style="word-wrap:break-word;">使能串口中断</font></div><div align="left" style="word-wrap:break-word;">    TR1 = 1;       //<font face="宋体" style="word-wrap:break-word;">启动</font><font face="Consolas" style="word-wrap:break-word;">T1</font></div><div align="left" style="word-wrap:break-word;">}</div><div align="left" style="word-wrap:break-word;">void LedScan()  //LED<font face="宋体" style="word-wrap:break-word;">显示扫描函数</font></div><div align="left" style="word-wrap:break-word;">{</div><div align="left" style="word-wrap:break-word;">    static unsigned char index = 0;</div><br style="word-wrap:break-word;"/><div align="left" style="word-wrap:break-word;">    P0 = 0xFF;                 //<font face="宋体" style="word-wrap:break-word;">关闭所有段选位，显示消隐</font></div><div align="left" style="word-wrap:break-word;">    P1 = (P1 &amp; 0xF8) | index;  //<font face="宋体" style="word-wrap:break-word;">位选索引值赋值到</font><font face="Consolas" style="word-wrap:break-word;">P1</font><font face="宋体" style="word-wrap:break-word;">口低</font><font face="Consolas" style="word-wrap:break-word;">3</font><font face="宋体" style="word-wrap:break-word;">位</font></div><div align="left" style="word-wrap:break-word;">    P0 = LedBuff[index];       //<font face="宋体" style="word-wrap:break-word;">相应显示缓冲区的值赋值到</font><font face="Consolas" style="word-wrap:break-word;">P0</font><font face="宋体" style="word-wrap:break-word;">口</font></div><div align="left" style="word-wrap:break-word;">    if (index &lt; 5)             //<font face="宋体" style="word-wrap:break-word;">位选索引</font><font face="Consolas" style="word-wrap:break-word;">0-5</font><font face="宋体" style="word-wrap:break-word;">循环，因有</font><font face="Consolas" style="word-wrap:break-word;">6</font><font face="宋体" style="word-wrap:break-word;">个数码管</font></div><div align="left" style="word-wrap:break-word;">        index++;</div><div align="left" style="word-wrap:break-word;">    else</div><div align="left" style="word-wrap:break-word;">        index = 0;</div><div align="left" style="word-wrap:break-word;">}</div><div align="left" style="word-wrap:break-word;">void InterruptTimer0() interrupt 1  //T0<font face="宋体" style="word-wrap:break-word;">中断服务函数</font></div><div align="left" style="word-wrap:break-word;">{</div><div align="left" style="word-wrap:break-word;">    TH0 = T0RH;  //<font face="宋体" style="word-wrap:break-word;">定时器重新加载重载值</font></div><div align="left" style="word-wrap:break-word;">    TL0 = T0RL;</div><div align="left" style="word-wrap:break-word;">    LedScan();   //LED<font face="宋体" style="word-wrap:break-word;">扫描显示</font></div><div align="left" style="word-wrap:break-word;">}</div><div align="left" style="word-wrap:break-word;">void InterruptUART() interrupt 4</div><div align="left" style="word-wrap:break-word;">{</div><div align="left" style="word-wrap:break-word;">    if (RI)  //<font face="宋体" style="word-wrap:break-word;">接收到字节</font></div><div align="left" style="word-wrap:break-word;">    {</div><div align="left" style="word-wrap:break-word;">        RI = 0;  //<font face="宋体" style="word-wrap:break-word;">手动清零接收中断标志位</font></div><div align="left" style="word-wrap:break-word;">        RxdByte = SBUF;  //<font face="宋体" style="word-wrap:break-word;">接收到的数据保存到接收字节变量中</font></div><div align="left" style="word-wrap:break-word;">        SBUF = RxdByte;  //<font face="宋体" style="word-wrap:break-word;">接收到的数据又直接发回，这叫回显</font><font face="Consolas" style="word-wrap:break-word;">-&quot;echo&quot;</font><font face="宋体" style="word-wrap:break-word;">，以提示用户输入的信息是否已正确接收</font></div><div align="left" style="word-wrap:break-word;">    }</div><div align="left" style="word-wrap:break-word;">    if (TI)  //<font face="宋体" style="word-wrap:break-word;">字节发送完毕</font></div><div align="left" style="word-wrap:break-word;">    {</div><div align="left" style="word-wrap:break-word;">        TI = 0;  //<font face="宋体" style="word-wrap:break-word;">手动清零发送中断标志位</font></div><div align="left" style="word-wrap:break-word;">    }</div><div align="left" style="word-wrap:break-word;">}</div><div align="left" style="word-wrap:break-word;">大家在做这个实验的时候，有个小问题要注意一下。因为我们<font face="Times New Roman" style="word-wrap:break-word;">STC89C52RC</font><font face="宋体" style="word-wrap:break-word;">下载程序是使用了</font><font face="Times New Roman" style="word-wrap:break-word;">UART</font><font face="宋体" style="word-wrap:break-word;">串口下载，下载完程序后，程序运行起来了，可是下载软件最后还会通过串口发送一些额外的数据，所以程序刚下载进去不是显示</font><font face="Times New Roman" style="word-wrap:break-word;">00</font><font face="宋体" style="word-wrap:break-word;">，而可能是其他数据。大家只要把开关关闭，重新打开一次就好了。</font></div><div align="left" style="word-wrap:break-word;">细心的同学可能会发现，在串口调试助手发送选项和接收选项处，还有个“字符格式发送”和“字符格式显示”，这是什么意思呢？</div><div align="left" style="word-wrap:break-word;">先抛开我们使用的汉字不谈，那么我们常用的字符就包含了<font face="Times New Roman" style="word-wrap:break-word;">0~9</font><font face="宋体" style="word-wrap:break-word;">的数字、</font><font face="Times New Roman" style="word-wrap:break-word;">A~Z/a~z</font><font face="宋体" style="word-wrap:break-word;">的字母、还有各种标点符号等。那么在单片机系统里面我们怎么来表示它们呢？</font><font face="Times New Roman" style="word-wrap:break-word;">ASCII</font><font face="宋体" style="word-wrap:break-word;">码</font>（American Standard Code for Information Interchange<font face="宋体" style="word-wrap:break-word;">，</font>即美国信息互换标准代码）可以完成这个使命：我们知道，在单片机中一个字节的数据可以有<font face="Times New Roman" style="word-wrap:break-word;">0</font><font face="宋体" style="word-wrap:break-word;">～</font><font face="Times New Roman" style="word-wrap:break-word;">255</font><font face="宋体" style="word-wrap:break-word;">共</font><font face="Times New Roman" style="word-wrap:break-word;">256</font><font face="宋体" style="word-wrap:break-word;">个值，我们取其中的</font><font face="Times New Roman" style="word-wrap:break-word;">0</font><font face="宋体" style="word-wrap:break-word;">～</font><font face="Times New Roman" style="word-wrap:break-word;">127</font><font face="宋体" style="word-wrap:break-word;">共</font><font face="Times New Roman" style="word-wrap:break-word;">128</font><font face="宋体" style="word-wrap:break-word;">个值赋予了它另外一层涵义，即让它们分别来代表一个常用字符，其具体的对应关系如下表</font>。</div><div align="center" style="word-wrap:break-word;">表<font face="Times New Roman" style="word-wrap:break-word;">11-3 ASCII</font><font face="宋体" style="word-wrap:break-word;">表</font></div><table cellspacing="0" style="font-size:inherit;font-weight:inherit;font-style:inherit;font-variant:inherit;word-wrap:break-word;empty-cells:show;border-collapse:collapse;border:1px solid rgb(227, 237, 245);width:100%;table-layout:auto;"><tbody style="word-wrap:break-word;"><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">ASCII值</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">控制字符</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">ASCII值</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">字符</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">ASCII值</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">字符</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">ASCII值</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">字符</div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">000</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">NUL</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">032</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">(space)</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">064</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">@</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">096</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">’</div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">001</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">SOH</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">033</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">!</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">065</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">A</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">097</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">a</div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">002</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">STX</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">034</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">&quot;</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">066</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">B</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">098</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">b</div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">003</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">ETX</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">035</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">#</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">067</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">C</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">099</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">c</div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">004</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">EOT</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">036</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">$</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">068</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">D</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">100</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">d</div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">005</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">END</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">037</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">%</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">069</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">E</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">101</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">e</div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">006</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">ACK</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">038</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">&amp;</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">070</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">F</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">102</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">f</div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">007</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">BEL</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">039</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">'</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">071</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">G</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">103</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">g</div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">008</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">BS</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">040</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">(</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">072</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">H</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">104</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">h</div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">009</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">HT</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">041</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">)</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">073</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">I</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">105</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">i</div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">010</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">LF</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">042</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">*</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">074</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">J</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">106</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">j</div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">011</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">VT</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">043</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">+</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">075</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">K</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">107</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">k</div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">012</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">FF</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">044</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">，</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">076</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">L</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">108</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">l</div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">013</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">CR</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">045</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">-</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">077</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">M</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">109</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">m</div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">014</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">SO</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">046</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">．</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">078</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">N</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">110</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">n</div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">015</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">SI</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">047</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">/</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">079</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">O</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">111</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">o</div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">016</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">DLE</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">048</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">0</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">080</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">P</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">112</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">p</div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">017</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">DC1</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">049</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">1</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">081</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">Q</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">113</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">q</div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">018</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">DC2</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">050</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">2</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">082</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">R</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">114</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">r</div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">019</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">DC3</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">051</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">3</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">083</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">S</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">115</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">s</div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">020</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">DC4</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">052</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">4</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">084</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">T</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">116</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">t</div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">021</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">NAK</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">053</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">5</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">085</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">U</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">117</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">u</div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">022</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">SYN</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">054</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">6</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">086</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">V</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">118</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">v</div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">023</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">ETB</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">055</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">7</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">087</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">W</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">119</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">w</div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">024</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">CAN</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">056</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">8</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">088</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">X</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">120</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">x</div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">025</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">EM</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">057</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">9</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">089</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">Y</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">121</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">y</div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">026</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">SUB</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">058</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">:</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">090</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">Z</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">122</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">z</div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">027</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">ESC</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">059</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">;</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">091</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">[</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">123</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">{</div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">028</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">FS</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">060</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">&lt;</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">092</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">\</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">124</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">|</div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">029</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">GS</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">061</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">=</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">093</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><br style="word-wrap:break-word;"/></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">125</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">}</div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">030</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">RS</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">062</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">&gt;</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">094</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">^</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">126</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">~</div></div></td></tr><tr style="word-wrap:break-word;"><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="42"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">031</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">US</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">063</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">?</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">095</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">_</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">127</div></div></td><td style="word-wrap:break-word;font-size:14px;padding:4px;border:1px solid rgb(227, 237, 245);overflow:hidden;" width="54"><div align="center" style="word-wrap:break-word;"><div align="center" style="word-wrap:break-word;">DEL</div></div></td></tr></tbody></table><div align="left" style="word-wrap:break-word;">这样我们就在常用字符和字节数据之间建立了一一对应的关系，那么现在一个字节就既可以代表一个整数又可以代表一个字符了，但它本质上只是一个字节的数据，而我们赋予了它不同的涵义，什么时候赋予它那种涵义就看编程者的意图了。<font face="Times New Roman" style="word-wrap:break-word;">ASCII</font><font face="宋体" style="word-wrap:break-word;">码在单片机系统中应用非常广泛，我们后续的课程也会经常使用到它，下面我们来对它做一个直观的认识，同学们一定要深刻理解其本质。</font></div><div align="left" style="word-wrap:break-word;">对照上述表格，我们就可以实现字符和数字之间的转换了，比如还是这个程序，我们发送的时候改成字符格式发送，接收还是用十六进制接收，这样接收和数码管好做一下对比。</div><div align="left" style="word-wrap:break-word;">我们用字符格式发送一个小写的<font face="Times New Roman" style="word-wrap:break-word;">a</font><font face="宋体" style="word-wrap:break-word;">，返回一个十六进制的</font><font face="Times New Roman" style="word-wrap:break-word;">0x61</font><font face="宋体" style="word-wrap:break-word;">，数码管上显示的也是</font><font face="Times New Roman" style="word-wrap:break-word;">61</font><font face="宋体" style="word-wrap:break-word;">，</font><font face="Times New Roman" style="word-wrap:break-word;">ASCII</font><font face="宋体" style="word-wrap:break-word;">码表里字符</font><font face="Times New Roman" style="word-wrap:break-word;">a</font><font face="宋体" style="word-wrap:break-word;">对应十进制是</font><font face="Times New Roman" style="word-wrap:break-word;">97</font><font face="宋体" style="word-wrap:break-word;">，等于十六进制的</font><font face="Times New Roman" style="word-wrap:break-word;">0x61</font><font face="宋体" style="word-wrap:break-word;">；我们再用字符格式发送一个数字</font><font face="Times New Roman" style="word-wrap:break-word;">1</font><font face="宋体" style="word-wrap:break-word;">，返回一个十六进制的</font><font face="Times New Roman" style="word-wrap:break-word;">0x31</font><font face="宋体" style="word-wrap:break-word;">，数码管上显示的也是</font><font face="Times New Roman" style="word-wrap:break-word;">31</font><font face="宋体" style="word-wrap:break-word;">，</font><font face="Times New Roman" style="word-wrap:break-word;">ASCII</font><font face="宋体" style="word-wrap:break-word;">表里字符</font><font face="Times New Roman" style="word-wrap:break-word;">1</font><font face="宋体" style="word-wrap:break-word;">对应的十进制是</font><font face="Times New Roman" style="word-wrap:break-word;">49</font><font face="宋体" style="word-wrap:break-word;">，等于十六进制的</font><font face="Times New Roman" style="word-wrap:break-word;">0x31</font><font face="宋体" style="word-wrap:break-word;">。这下大家就该清楚了：所谓的十六进制发送和十六进制接收，都是按字节数据的真实值进行的；而字符格式发送和字符格式接收，是按</font><font face="Times New Roman" style="word-wrap:break-word;">ASCII</font><font face="宋体" style="word-wrap:break-word;">码表中字符形式进行的，但它实际上最终传输的还是一个字节数据。这个表格，当然不需要大家去记住，理解它，用的时候过来查就行了。</font></div><div align="left" style="word-wrap:break-word;">通信的学习，不像前边控制部分那么直观了，通信部分我们的程序只能获得一个结果，而其过程我们却无法直接看到，所以慢慢的可能大家就会知道有示波器和逻辑分析仪这类测量仪器。如果学校实验室或者公司里有示波器或者逻辑分析仪这类仪器，可以拿过来抓一下串口波形，直观的了解一下。如果暂时还没有这些仪器，先知道这么回事，有条件再说。因为工具类的东西有的比较昂贵，有条件可以尽量使用学校或者公司的。在这里我用一款简易的逻辑分析仪把串口通信的波形抓出来给大家看一下，大家了解一下即可，如图<font face="Times New Roman" style="word-wrap:break-word;">11-7</font><font face="宋体" style="word-wrap:break-word;">所示。</font></div><div align="left" style="word-wrap:break-word;"><span style="word-wrap:break-word;"><img src="第11章 UART串行通信 - 单片机学习教程(初学者入门) 单片机论坛_files/143108vaqz55be5sywb68t.jpg" type="image/jpeg" height="191" style="word-wrap: break-word; cursor: pointer; height: auto;" width="733"/></span> <span style="word-wrap:break-word;"><img src="第11章 UART串行通信 - 单片机学习教程(初学者入门) 单片机论坛_files/143108vw3vfvnwfn9449vw.jpg" type="image/jpeg" height="149" style="word-wrap: break-word; cursor: pointer; height: auto;" width="219"/></span></div><div align="center" style="word-wrap:break-word;">图11-7 <font face="宋体" style="word-wrap:break-word;">逻辑分析仪串口数据示意图</font></div><div align="left" style="word-wrap:break-word;">分析仪和示波器的作用，就是把通信过程的波形抓出来进行分析。先大概说一下波形的意思。波形左边是低位，右边是高位，上边这个波形是电脑发送给单片机的，下边这个波形是单片机回发给电脑的。以上边的波形为例，左边第一位是起始位<font face="Times New Roman" style="word-wrap:break-word;">0</font><font face="宋体" style="word-wrap:break-word;">，从低位到高位依次是</font><font face="Times New Roman" style="word-wrap:break-word;">10001100</font><font face="宋体" style="word-wrap:break-word;">，顺序倒一下，就是数据</font><font face="Times New Roman" style="word-wrap:break-word;">0x31</font><font face="宋体" style="word-wrap:break-word;">，也就是</font><font face="Times New Roman" style="word-wrap:break-word;">ASCII</font><font face="宋体" style="word-wrap:break-word;">码表里的‘</font><font face="Times New Roman" style="word-wrap:break-word;">1</font><font face="宋体" style="word-wrap:break-word;">’。大家可以注意到分析仪在每个数据位都给标了一个白色的点，表示是数据，起始位和无数据的时候都没有这个白点。时间标</font><font face="Times New Roman" style="word-wrap:break-word;">T1</font><font face="宋体" style="word-wrap:break-word;">和</font><font face="Times New Roman" style="word-wrap:break-word;">T2</font><font face="宋体" style="word-wrap:break-word;">的差值在右边显示出来是</font><font face="Times New Roman" style="word-wrap:break-word;">0.102ms</font><font face="宋体" style="word-wrap:break-word;">，大概是</font><font face="Times New Roman" style="word-wrap:break-word;">9600</font><font face="宋体" style="word-wrap:break-word;">分之一，稍微有点偏差，在容许范围内即可。通过图</font><font face="Times New Roman" style="word-wrap:break-word;">11-7</font><font face="宋体" style="word-wrap:break-word;">，我们可以清晰的了解了串口通信的收发的详细过程。</font></div><div align="left" style="word-wrap:break-word;">那我们这里再来了解一下，如果我们使用串口调试助手，用字符格式直接发送一个“<font face="Times New Roman" style="word-wrap:break-word;">12</font><font face="宋体" style="word-wrap:break-word;">”，我们在我们的数码管上应该显示什么呢？串口调试助手应该返回什么呢？经过试验发现，我们数码管显示的是</font><font face="Times New Roman" style="word-wrap:break-word;">32</font><font face="宋体" style="word-wrap:break-word;">，而串口调试助手返回十六进制显示的是</font><font face="Times New Roman" style="word-wrap:break-word;">31</font><font face="宋体" style="word-wrap:break-word;">、</font><font face="Times New Roman" style="word-wrap:break-word;">32</font><font face="宋体" style="word-wrap:break-word;">两个数据，如图</font><font face="Times New Roman" style="word-wrap:break-word;">11-8</font><font face="宋体" style="word-wrap:break-word;">所示。</font></div><div align="center" style="word-wrap:break-word;"><span style="word-wrap:break-word;"><img src="第11章 UART串行通信 - 单片机学习教程(初学者入门) 单片机论坛_files/143353mhhlw9fi5bhlzhlz.jpg" type="image/jpeg" height="588" style="word-wrap: break-word; cursor: pointer; height: auto;" width="404"/></span></div><div align="center" style="word-wrap:break-word;">图<font face="Times New Roman" style="word-wrap:break-word;">11-8</font> <font face="宋体" style="word-wrap:break-word;">串口调试助手数据显示</font></div><div align="left" style="word-wrap:break-word;">我们用逻辑分析仪把这个数据抓出来看一下，如图<font face="Times New Roman" style="word-wrap:break-word;">11-9</font><font face="宋体" style="word-wrap:break-word;">所示。</font></div><div align="left" style="word-wrap:break-word;"><span style="word-wrap:break-word;"><img src="第11章 UART串行通信 - 单片机学习教程(初学者入门) 单片机论坛_files/143354x3fnnjldgfdfnigi.jpg" type="image/jpeg" height="133" style="word-wrap: break-word; cursor: pointer; height: auto;" width="733"/></span></div><div align="center" style="word-wrap:break-word;">图<font face="Times New Roman" style="word-wrap:break-word;">11-9</font> <font face="宋体" style="word-wrap:break-word;">逻辑分析仪抓取数据</font></div><div align="left" style="word-wrap:break-word;">对于<font face="Times New Roman" style="word-wrap:break-word;">ASCII</font><font face="宋体" style="word-wrap:break-word;">码表来说，数字本身是字符而非数据，所以如果发送“</font><font face="Times New Roman" style="word-wrap:break-word;">12</font><font face="宋体" style="word-wrap:break-word;">”的话，实际上是是分别发送了“</font><font face="Times New Roman" style="word-wrap:break-word;">1</font><font face="宋体" style="word-wrap:break-word;">”和“</font><font face="Times New Roman" style="word-wrap:break-word;">2</font><font face="宋体" style="word-wrap:break-word;">”两个字符，单片机呢，先收到第一个字符“</font><font face="Times New Roman" style="word-wrap:break-word;">1</font><font face="宋体" style="word-wrap:break-word;">”，在数码管上会显示出</font><font face="Times New Roman" style="word-wrap:break-word;">31</font><font face="宋体" style="word-wrap:break-word;">这个对应数字，但是瞬间马上就又收到了“</font><font face="Times New Roman" style="word-wrap:break-word;">2</font><font face="宋体" style="word-wrap:break-word;">”这个字符，数码管瞬间从</font><font face="Times New Roman" style="word-wrap:break-word;">31</font><font face="宋体" style="word-wrap:break-word;">变成了</font><font face="Times New Roman" style="word-wrap:break-word;">32</font><font face="宋体" style="word-wrap:break-word;">，而我们视觉上呢，根本是没有办法发现这种快速变化的，所以我们感觉数码管直接显示的是</font><font face="Times New Roman" style="word-wrap:break-word;">32</font><font face="宋体" style="word-wrap:break-word;">。</font></div><strong style="word-wrap:break-word;font-weight:700;"><font color="#000" style="word-wrap:break-word;">11.7</font> <font color="#000" style="word-wrap:break-word;">作业</font></strong><div align="left" style="word-wrap:break-word;">1、能够理解<font face="Times New Roman" style="word-wrap:break-word;">UART</font><font face="宋体" style="word-wrap:break-word;">串口通信的基本原理和通信过程。</font></div><div align="left" style="word-wrap:break-word;">2、通过<font face="Times New Roman" style="word-wrap:break-word;">IO</font><font face="宋体" style="word-wrap:break-word;">口模拟</font><font face="Times New Roman" style="word-wrap:break-word;">UART</font><font face="宋体" style="word-wrap:break-word;">串口通信把通信的底层操作原理弄明白。</font></div><div align="left" style="word-wrap:break-word;">3、学会通过配置寄存器，实现串口通信的基本操作过程。</div><div align="left" style="word-wrap:break-word;">4、了解字符和数据之间的转换依据和方法。</div><div align="left" style="word-wrap:break-word;">5、完成通过串口控制流水灯流动和停止的程序。</div><div align="left" style="word-wrap:break-word;">    6<font face="宋体" style="word-wrap:break-word;">、完成通过串口实现蜂鸣器响的程序。</font></div><br style="word-wrap:break-word;"/></td></tr></tbody></table><div style="word-wrap:break-word;padding-left:20px;background:url(&quot;../../static/image/common/tag.gif&quot;) 0px 2px no-repeat;margin-top:5px;margin-bottom:10px;"><a href="http://www.51hei.com/bbs/misc.php?mod=tag&amp;id=68" style="word-wrap:break-word;text-decoration:none;color:rgb(51, 102, 153);" target="_blank" title="通信">通信</a></div></div></div></div></td></tr></tbody></table></div></div></div></div></div></div></div><br/></div></span>
</div></body></html> 